/* ND.JS v0.8.6
 *
 * ND.JS is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * ND.JS is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.
 */
 (function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["nd"] = factory();
	else
		root["nd"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/help.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@babel/runtime/helpers/arrayWithHoles.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithHoles.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/arrayWithHoles.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/assertThisInitialized.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/assertThisInitialized.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/assertThisInitialized.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/classCallCheck.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/classCallCheck.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/classCallCheck.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/construct.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/construct.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/construct.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/createClass.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/createClass.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/createClass.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/getPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/getPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/getPrototypeOf.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/inherits.js":
/*!*********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/inherits.js ***!
  \*********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/inherits.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/isNativeFunction.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/isNativeFunction.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/isNativeFunction.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/iterableToArray.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArray.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/iterableToArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js ***!
  \*********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/nonIterableRest.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableRest.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/nonIterableRest.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/nonIterableSpread.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/nonIterableSpread.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/nonIterableSpread.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _typeof = __webpack_require__(/*! ../helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n\nvar assertThisInitialized = __webpack_require__(/*! ./assertThisInitialized */ \"./node_modules/@babel/runtime/helpers/assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/setPrototypeOf.js":
/*!***************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/setPrototypeOf.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/setPrototypeOf.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/slicedToArray.js":
/*!**************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/slicedToArray.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var arrayWithHoles = __webpack_require__(/*! ./arrayWithHoles */ \"./node_modules/@babel/runtime/helpers/arrayWithHoles.js\");\n\nvar iterableToArrayLimit = __webpack_require__(/*! ./iterableToArrayLimit */ \"./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js\");\n\nvar nonIterableRest = __webpack_require__(/*! ./nonIterableRest */ \"./node_modules/@babel/runtime/helpers/nonIterableRest.js\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/slicedToArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/toConsumableArray.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/toConsumableArray.js ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var arrayWithoutHoles = __webpack_require__(/*! ./arrayWithoutHoles */ \"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js\");\n\nvar iterableToArray = __webpack_require__(/*! ./iterableToArray */ \"./node_modules/@babel/runtime/helpers/iterableToArray.js\");\n\nvar nonIterableSpread = __webpack_require__(/*! ./nonIterableSpread */ \"./node_modules/@babel/runtime/helpers/nonIterableSpread.js\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/toConsumableArray.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/typeof.js":
/*!*******************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/typeof.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/typeof.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/wrapNativeSuper.js ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var getPrototypeOf = __webpack_require__(/*! ./getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n\nvar setPrototypeOf = __webpack_require__(/*! ./setPrototypeOf */ \"./node_modules/@babel/runtime/helpers/setPrototypeOf.js\");\n\nvar isNativeFunction = __webpack_require__(/*! ./isNativeFunction */ \"./node_modules/@babel/runtime/helpers/isNativeFunction.js\");\n\nvar construct = __webpack_require__(/*! ./construct */ \"./node_modules/@babel/runtime/helpers/construct.js\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js ***!
  \****************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g = (function() {\n  return this || (typeof self === \"object\" && self);\n})() || Function(\"return this\")();\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = __webpack_require__(/*! ./runtime */ \"./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js ***!
  \*********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  (function() {\n    return this || (typeof self === \"object\" && self);\n  })() || Function(\"return this\")()\n);\n\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js?");

/***/ }),

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! regenerator-runtime */ \"./node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime-module.js\");\n\n\n//# sourceURL=webpack://nd/./node_modules/@babel/runtime/regenerator/index.js?");

/***/ }),

/***/ "./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n//# sourceURL=webpack://nd/./node_modules/inherits/inherits_browser.js?");

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n//# sourceURL=webpack://nd/./node_modules/process/browser.js?");

/***/ }),

/***/ "./node_modules/util/support/isBufferBrowser.js":
/*!******************************************************!*\
  !*** ./node_modules/util/support/isBufferBrowser.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n//# sourceURL=webpack://nd/./node_modules/util/support/isBufferBrowser.js?");

/***/ }),

/***/ "./node_modules/util/util.js":
/*!***********************************!*\
  !*** ./node_modules/util/util.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(process) {// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = __webpack_require__(/*! ./support/isBuffer */ \"./node_modules/util/support/isBufferBrowser.js\");\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = __webpack_require__(/*! inherits */ \"./node_modules/inherits/inherits_browser.js\");\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ \"./node_modules/process/browser.js\")))\n\n//# sourceURL=webpack://nd/./node_modules/util/util.js?");

/***/ }),

/***/ "./src/concat.js":
/*!***********************!*\
  !*** ./src/concat.js ***!
  \***********************/
/*! exports provided: concat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"concat\", function() { return concat; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction concat(axis, dtype, ndarrays) {\n  if (null == ndarrays) {\n    if (null == dtype) {\n      ndarrays = axis;\n      axis = undefined;\n    } else {\n      ndarrays = dtype;\n      dtype = undefined;\n\n      if ('string' === typeof axis) {\n        dtype = axis;\n        axis = undefined;\n      }\n    }\n  }\n\n  if (!('length' in ndarrays)) ndarrays = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(ndarrays);\n  if (null == axis) axis = 0;\n  if (null == dtype) dtype = _dt__WEBPACK_IMPORTED_MODULE_2__[\"super_dtype\"].apply(void 0, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(ndarrays.map(function (a) {\n    return a.dtype;\n  })));\n  if (0 > axis) axis += ndarrays[0].shape.length;\n  if (0 > axis || axis >= ndarrays[0].shape.length) throw new Error('Axis out of bounds.');\n  var newShape = Int32Array.from(ndarrays[0].shape);\n\n  var _loop = function _loop(i) {\n    var shape = ndarrays[i].shape;\n    if (newShape.length != shape.length) throw new Error('All shapes must have the same length.');\n    if (!newShape.every(function (len, d) {\n      return newShape[d] === shape[d] || axis === d;\n    })) throw new Error('Shape along all axes but the concatentation axis must match.');\n    newShape[axis] += shape[axis];\n  };\n\n  for (var i = ndarrays.length; --i > 0;) {\n    _loop(i);\n  }\n\n  var rest = newShape.slice(axis + 1).reduce(function (a, b) {\n    return a * b;\n  }, 1),\n      indices = Int32Array.from(ndarrays, function (ndarr) {\n    return ndarr.data.length;\n  }),\n      newData = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][dtype](newShape.reduce(function (a, b) {\n    return a * b;\n  }, 1));\n  var newIdx = newData.length;\n\n  function fill(d) {\n    if (d === axis) for (var i = ndarrays.length; i-- > 0;) {\n      for (var j = ndarrays[i].shape[d] * rest; j-- > 0;) {\n        newData[--newIdx] = ndarrays[i].data[--indices[i]];\n      }\n    } else for (var _i = newShape[d]; _i-- > 0;) {\n      fill(d + 1);\n    }\n  }\n\n  fill(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](newShape, newData);\n}\n\n//# sourceURL=webpack://nd/./src/concat.js?");

/***/ }),

/***/ "./src/dt/complex.js":
/*!***************************!*\
  !*** ./src/dt/complex.js ***!
  \***************************/
/*! exports provided: Complex */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Complex\", function() { return Complex; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nvar Complex =\n/*#__PURE__*/\nfunction () {\n  function Complex(re, im) {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, Complex);\n\n    if (null == re) re = 0.0;\n    if (null == im) im = 0.0;\n\n    if (re.re != null || re.im != null) {\n      im = re.im || 0;\n      re = re.re || 0;\n    }\n\n    this.re = re * 1;\n    this.im = im * 1; // TODO: remove these assertions\n\n    if (isNaN(re)) throw new Error('Real value is NaN.');\n    if (isNaN(im)) throw new Error('Imaginary value is NaN.');\n    Object.freeze(this);\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(Complex, [{\n    key: \"add\",\n    value: function add(re, im) {\n      if (null == re) re = 0.0;\n      if (null == im) im = 0.0;\n\n      if (re.re != null || re.im != null) {\n        im = re.im || 0;\n        re = re.re || 0;\n      }\n\n      return new Complex(this.re + re, this.im + im);\n    }\n  }, {\n    key: \"sub\",\n    value: function sub(re, im) {\n      if (null == re) re = 0.0;\n      if (null == im) im = 0.0;\n\n      if (re.re != null || re.im != null) {\n        im = re.im || 0;\n        re = re.re || 0;\n      }\n\n      return new Complex(this.re - re, this.im - im);\n    }\n  }, {\n    key: \"mul\",\n    value: function mul(re, im) {\n      if (null == re) re = 0.0;\n      if (null == im) im = 0.0;\n\n      if (re.re != null || re.im != null) {\n        im = re.im || 0;\n        re = re.re || 0;\n      }\n\n      return new Complex(this.re * re - this.im * im, this.re * im + this.im * re);\n    }\n  }, {\n    key: \"div\",\n    value: function div(re, im) {\n      if (null == re) re = 0.0;\n      if (null == im) im = 0.0;\n\n      if (re.re != null || re.im != null) {\n        im = re.im || 0;\n        re = re.re || 0;\n      }\n\n      if (im == 0) return new Complex(this.re / re, this.im / re); //    return new Complex(\n      //      (this.re*re + this.im*im) / (re*re + im*im),\n      //      (this.im*re - this.re*im) / (re*re + im*im)\n      //    );\n\n      if (Math.abs(re) >= Math.abs(im)) {\n        var R = im / re;\n        return new Complex((this.re + this.im * R) / (re + im * R), (this.im - this.re * R) / (re + im * R));\n      } else {\n        var _R = re / im;\n\n        return new Complex((this.re * _R + this.im) / (re * _R + im), (this.im * _R - this.re) / (re * _R + im));\n      }\n    }\n  }, {\n    key: \"equals\",\n    value: function equals(re, im) {\n      if (null == re) re = 0.0;\n      if (null == im) im = 0.0;\n\n      if (re.re != null || re.im != null) {\n        im = re.im || 0;\n        re = re.re || 0;\n      }\n\n      return this.re == re && this.im == im;\n    }\n  }, {\n    key: \"abs\",\n    value: function abs() {\n      return Math.hypot(this.re, this.im);\n    }\n  }, {\n    key: \"arg\",\n    value: function arg() {\n      return Math.atan2(this.im, this.re);\n    }\n  }, {\n    key: \"conj\",\n    value: function conj() {\n      return new Complex(this.re, -this.im);\n    }\n  }, {\n    key: \"toFixed\",\n    value: function toFixed(digits) {\n      return new Complex(this.re.toFixed(digits), this.im.toFixed(digits));\n    }\n  }, {\n    key: \"sqrt\",\n    value: function sqrt() {\n      // https://en.wikipedia.org/wiki/Square_root#Algebraic_formula\n      var abs = this.abs();\n      return new Complex(_math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sqrt(_math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].mul(_math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].add(abs, this.re), 0.5)), _math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sqrt(_math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].mul(_math__WEBPACK_IMPORTED_MODULE_2__[\"default\"].sub(abs, this.re), 0.5)));\n    } // https://nodejs.org/api/util.html#util_util_inspect_custom\n\n  }, {\n    key: Symbol.for('nodejs.util.inspect.custom'),\n    value: function value() {\n      return this.toString();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      if (this.im == 0) return this.re.toString();\n      if (this.re == 0) return \"\".concat(this.im, \"j\");\n      if (this.im < 0) return \"\".concat(this.re, \" - \").concat(-this.im, \"j\");\n      return \"\".concat(this.re, \" + \").concat(this.im, \"j\");\n    }\n  }, {\n    key: \"valueOf\",\n    value: function valueOf() {\n      if (this.im == 0) return this.re;\n      return this;\n    }\n  }]);\n\n  return Complex;\n}();\n\n//# sourceURL=webpack://nd/./src/dt/complex.js?");

/***/ }),

/***/ "./src/dt/complex_array.js":
/*!*********************************!*\
  !*** ./src/dt/complex_array.js ***!
  \*********************************/
/*! exports provided: Complex128Array */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Complex128Array\", function() { return Complex128Array; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _complex__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./complex */ \"./src/dt/complex.js\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! util */ \"./node_modules/util/util.js\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_6__);\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nfunction createComplexArrayType(FloatArray) {\n  var HANDLER = {\n    get: function get(complexArray, property) {\n      if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_4___default()(property) !== 'symbol' && property % 1 === 0) return complexArray.get(property);\n      return complexArray[property];\n    },\n    set: function set(complexArray, property, value) {\n      if (_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_4___default()(property) !== 'symbol' && property % 1 === 0) {\n        complexArray.set(property, value);\n        return true; // <- FIXME bounds check?\n      }\n\n      complexArray[property] = value;\n      return true;\n    }\n  };\n\n  var ComplexArray =\n  /*#__PURE__*/\n  function () {\n    _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ComplexArray, null, [{\n      key: \"BYTES_PER_ELEMENT\",\n      get: function get() {\n        return FloatArray.BYTES_PER_ELEMENT * 2;\n      }\n    }, {\n      key: \"name\",\n      get: function get() {\n        return \"Complex\".concat(ComplexArray.BYTES_PER_ELEMENT * 8, \"Array\");\n      }\n    }]);\n\n    function ComplexArray(buffer, byteOffset, length) {\n      _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, ComplexArray);\n\n      if (buffer % 1 === 0) {\n        length = buffer;\n        this._array = new FloatArray(length * 2);\n      } else {\n        if (null != length) length *= 2;\n        this._array = new FloatArray(buffer, byteOffset, length);\n      }\n\n      return new Proxy(this, HANDLER);\n    }\n\n    _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default()(ComplexArray, [{\n      key: Symbol.iterator,\n      value:\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function value() {\n        var i;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function value$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < this.length)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.next = 4;\n                return this[i];\n\n              case 4:\n                i++;\n                _context.next = 1;\n                break;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, value, this);\n      })\n    }, {\n      key: \"keys\",\n      value:\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function keys() {\n        var i;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function keys$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < this.length)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 4;\n                return i;\n\n              case 4:\n                i++;\n                _context2.next = 1;\n                break;\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, keys, this);\n      })\n    }, {\n      key: \"values\",\n      value:\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function values() {\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function values$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.delegateYield(this[Symbol.iterator](), \"t0\", 1);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, values, this);\n      })\n    }, {\n      key: \"entries\",\n      value:\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function entries() {\n        var i;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function entries$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < this.length)) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                _context4.next = 4;\n                return [i, this[i]];\n\n              case 4:\n                i++;\n                _context4.next = 1;\n                break;\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, entries, this);\n      })\n    }, {\n      key: \"forEach\",\n      value: function forEach(callback, thisArg) {\n        for (var i = 0; i < source.length; i++) {\n          callback.call(thisArg, source[i], i);\n        }\n      }\n    }, {\n      key: \"map\",\n      value: function map(mapFn, thisArg) {\n        return ComplexArray.from(this, mapFn, thisArg);\n      }\n    }, {\n      key: \"reduce\",\n      value: function reduce(reduceFn, initialValue) {\n        var i = 0;\n\n        if (null == initialValue) {\n          if (this.length == 0) throw new TypeError('TypeError: Reduce of empty array with no initial value.');\n          initialValue = this[i++];\n        }\n\n        for (; i < this.length; i++) {\n          initialValue = reduceFn(initialValue, this[i], i, this);\n        }\n\n        return initialValue;\n      }\n    }, {\n      key: \"slice\",\n      value: function slice(begin, end) {\n        if (null != begin) begin *= 2;\n        if (null != end) end *= 2;\n        return new ComplexArray(this._array.slice(begin, end).buffer);\n      }\n    }, {\n      key: \"subarray\",\n      value: function subarray(begin, end) {\n        if (null != begin) begin *= 2;\n        if (null != end) end *= 2;\n\n        var sub = this._array.subarray(begin, end);\n\n        return new ComplexArray(sub.buffer, sub.byteOffset, sub.length / 2);\n      }\n    }, {\n      key: \"join\",\n      value: function join(separator) {\n        if (null == separator) separator = ', ';\n        var result = '';\n\n        for (var i = 0; i < this.length; i++) {\n          if (i > 0) result += separator;\n          result += this[i].toString();\n        }\n\n        return result;\n      }\n    }, {\n      key: \"fill\",\n      value: function fill(value, start, end) {\n        if (!(value instanceof _complex__WEBPACK_IMPORTED_MODULE_5__[\"Complex\"])) value = new _complex__WEBPACK_IMPORTED_MODULE_5__[\"Complex\"](value);\n        if (null == start) start = 0;\n        if (null == end) end = this.length;\n        if (0 > end) end += this.length;\n        if (0 > start) start += this.length;\n\n        for (var i = this._array.length; (i -= 2) >= 0;) {\n          this._array[i + 1] = value.im;\n          this._array[i + 0] = value.re;\n        }\n\n        return this;\n      }\n    }, {\n      key: \"get\",\n      value: function get(index) {\n        return new _complex__WEBPACK_IMPORTED_MODULE_5__[\"Complex\"](this._array[2 * index + 0], this._array[2 * index + 1]);\n      }\n    }, {\n      key: \"set\",\n      value: function set(index, value) {\n        index *= 2;\n\n        if (typeof value === 'number' || !isNaN(value)) {\n          this._array[index + 0] = value;\n          this._array[index + 1] = isNaN(value) ? NaN : 0;\n          return;\n        }\n\n        if (!('re' in value) || !('im' in value)) value = new _complex__WEBPACK_IMPORTED_MODULE_5__[\"Complex\"](value);\n        this._array[index + 0] = value.re;\n        this._array[index + 1] = value.im;\n      }\n    }, {\n      key: Symbol.for('nodejs.util.inspect.custom'),\n      value: function value(options) {\n        return 'Complex128Array ' + util.inspect(Array.from(this), options);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString(max_len) {\n        return this.join(',');\n      }\n    }, {\n      key: \"buffer\",\n      get: function get() {\n        return this._array.buffer;\n      }\n    }, {\n      key: \"byteOffset\",\n      get: function get() {\n        return this._array.byteOffset;\n      }\n    }, {\n      key: \"byteLength\",\n      get: function get() {\n        return this._array.byteLength;\n      }\n    }, {\n      key: \"length\",\n      get: function get() {\n        return this._array.length >>> 1;\n      }\n    }, {\n      key: Symbol.toStringTag,\n      get: function get() {\n        throw new Error('not yet implemented.');\n      }\n    }], [{\n      key: \"from\",\n      value: function from(source, mapFn, thisArg) {\n        if (!source.hasOwnProperty('length')) source = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(source); // fast-copy complex arrays\n\n        if (null == mapFn) {\n          if (source instanceof ComplexArray) return new ComplexArray(FloatArray.from(source._array).buffer, 0, source.length);\n\n          if (source instanceof Int32Array || source instanceof Float32Array || source instanceof Float64Array) {\n            var array = new FloatArray(source.length * 2);\n\n            for (var i = source.length; i-- > 0;) {\n              array[i << 1] = source[i];\n            }\n\n            return new ComplexArray(array.buffer, 0, source.length);\n          }\n        }\n\n        var result = new ComplexArray(source.length);\n\n        mapFn = mapFn || function (x) {\n          return x;\n        };\n\n        for (var _i = 0; _i < source.length; _i++) {\n          result[_i] = mapFn.call(thisArg, source[_i], _i);\n        }\n\n        return result;\n      }\n    }, {\n      key: \"of\",\n      value: function of() {\n        var result = new ComplexArray(arguments.length);\n\n        for (var i = 0; i < arguments.length; i++) {\n          result[i] = i < 0 || arguments.length <= i ? undefined : arguments[i];\n        }\n\n        return result;\n      }\n    }]);\n\n    return ComplexArray;\n  }();\n\n  ;\n  return ComplexArray;\n}\n\nvar Complex128Array = createComplexArrayType(Float64Array);\n\n//# sourceURL=webpack://nd/./src/dt/complex_array.js?");

/***/ }),

/***/ "./src/dt/index.js":
/*!*************************!*\
  !*** ./src/dt/index.js ***!
  \*************************/
/*! exports provided: ARRAY_TYPES, eps, cast_scalar, _check_dtype, dtypeof, super_dtype, is_subdtype, Complex, Complex128Array */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ARRAY_TYPES\", function() { return ARRAY_TYPES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eps\", function() { return eps; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cast_scalar\", function() { return cast_scalar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_check_dtype\", function() { return _check_dtype; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dtypeof\", function() { return dtypeof; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"super_dtype\", function() { return super_dtype; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"is_subdtype\", function() { return is_subdtype; });\n/* harmony import */ var _complex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./complex */ \"./src/dt/complex.js\");\n/* harmony import */ var _complex_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./complex_array */ \"./src/dt/complex_array.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Complex\", function() { return _complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"Complex128Array\", function() { return _complex_array__WEBPACK_IMPORTED_MODULE_1__[\"Complex128Array\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nvar ARRAY_TYPES = {\n  'int32': Int32Array,\n  'float32': Float32Array,\n  'float64': Float64Array,\n  'complex128': _complex_array__WEBPACK_IMPORTED_MODULE_1__[\"Complex128Array\"],\n  'object': Array\n};\nfunction eps(dtype) {\n  _check_dtype(dtype);\n\n  switch (dtype) {\n    case 'complex128':\n      return new _complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"](Number.EPSILON);\n\n    case 'float32':\n      return 1.1920928955078125e-7;\n\n    default:\n      return Number.EPSILON;\n  }\n}\nfunction cast_scalar(x, dtype) {\n  if (dtype === 'int32') return x & 0xFFFFFFFF;\n  if (dtype === 'float32') return Math.fround(x);\n  if (dtype === 'complex128') return x instanceof _complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x : new _complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"](x);\n  return x * 1;\n}\nfunction _check_dtype(dtype) {\n  if (!ARRAY_TYPES.hasOwnProperty(dtype)) throw new Error(\"Invalid dtype '\" + dtype + \"'. Must be one of {'\" + Object.getOwnPropertyNames(nd.dtypes).join(\"', '\") + \"'}.\");\n}\nfunction dtypeof(value) {\n  if (value % 1 === 0) {\n    if (value <= ~(1 << 31) && value >= 1 << 31) return 'int32';\n    return 'object';\n  }\n\n  if (value * 1 == value) return 'float64';\n  if (value instanceof _complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return 'complex128';\n  return 'object';\n}\nvar super_dtype = function super_dtype() {\n  for (var _len = arguments.length, dtypes = new Array(_len), _key = 0; _key < _len; _key++) {\n    dtypes[_key] = arguments[_key];\n  }\n\n  return dtypes.reduce(function (dtype1, dtype2) {\n    _check_dtype(dtype1);\n\n    _check_dtype(dtype2);\n\n    if (dtype1 === 'object' || dtype2 === 'object') return 'object';\n    if (dtype1 === 'complex128' || dtype2 === 'complex128') return 'complex128';\n    if (dtype1 === 'float64' || dtype2 === 'float64') return 'float64';\n    if (dtype1 === 'float32' || dtype2 === 'float32') return 'float32';\n    return 'int32';\n  });\n};\nfunction is_subdtype(sub_dtype, sup_dtype) {\n  _check_dtype(sub_dtype);\n\n  _check_dtype(sup_dtype);\n\n  var rank = {\n    'int32': 0,\n    'float32': 1,\n    'float64': 2,\n    'complex128': 3,\n    'object': 4\n  };\n  return rank[sub_dtype] <= rank[sup_dtype];\n}\n\n//# sourceURL=webpack://nd/./src/dt/index.js?");

/***/ }),

/***/ "./src/dt/mutable_complex.js":
/*!***********************************!*\
  !*** ./src/dt/mutable_complex.js ***!
  \***********************************/
/*! exports provided: MutableComplex */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MutableComplex\", function() { return MutableComplex; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nvar MutableComplex =\n/*#__PURE__*/\nfunction () {\n  function MutableComplex(re, im) {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, MutableComplex);\n\n    this.re = re * 1.0;\n    this.im = im * 1.0;\n  }\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(MutableComplex, [{\n    key: \"abs\",\n    value: function abs() {\n      return Math.hypot(this.re, this.im);\n    }\n  }, {\n    key: '/=',\n    value: function _(re, im) {\n      if (im === 0) {\n        this.re /= re;\n        this.im /= re;\n      } else {\n        var this_re = this.re;\n\n        if (Math.abs(re) >= Math.abs(im)) {\n          var R = im / re;\n          this.re = (this_re + this.im * R) / (re + im * R);\n          this.im = (this.im - this_re * R) / (re + im * R);\n        } else {\n          var _R = re / im;\n\n          this.re = (this_re * _R + this.im) / (re * _R + im);\n          this.im = (this.im * _R - this_re) / (re * _R + im);\n        }\n      }\n    }\n  }, {\n    key: '= c0*c1',\n    value: function c0C1(re0, im0, re1, im1) {\n      this.re = re0 * re1 - im0 * im1;\n      this.im = re0 * im1 + im0 * re1;\n    }\n  }, {\n    key: '-= c0*c1',\n    value: function c0C1(re0, im0, re1, im1) {\n      this.re -= re0 * re1 - im0 * im1;\n      this.im -= re0 * im1 + im0 * re1;\n    } //\n    //  ['/= c0']( re, im )\n    //  {\n    //    throw new Error('Not yet implemented!');\n    //  }\n    //  add( re, im ) {\n    //    if( null == re ) re = 0.0;\n    //    if( null == im ) im = 0.0;\n    //    if( re.re != null ||\n    //        re.im != null ) {\n    //      im = re.im || 0;\n    //      re = re.re || 0;\n    //    }\n    //    return new Complex(\n    //      this.re + re,\n    //      this.im + im\n    //    );\n    //  }\n    //\n    //  sub( re, im ) {\n    //    if( null == re ) re = 0.0;\n    //    if( null == im ) im = 0.0;\n    //    if( re.re != null ||\n    //        re.im != null ) {\n    //      im = re.im || 0;\n    //      re = re.re || 0;\n    //    }\n    //    return new Complex(\n    //      this.re - re,\n    //      this.im - im\n    //    );\n    //  }\n    //\n    //  mul( re, im ) {\n    //    if( null == re ) re = 0.0;\n    //    if( null == im ) im = 0.0;\n    //    if( re.re != null ||\n    //        re.im != null ) {\n    //      im = re.im || 0;\n    //      re = re.re || 0;\n    //    }\n    //    return new Complex(\n    //      this.re*re - this.im*im,\n    //      this.re*im + this.im*re\n    //    );\n    //  }\n    //\n    //  div( re, im ) {\n    //    if( null == re ) re = 0.0;\n    //    if( null == im ) im = 0.0;\n    //    if( re.re != null ||\n    //        re.im != null ) {\n    //      im = re.im || 0;\n    //      re = re.re || 0;\n    //    }\n    //    if( im == 0 ) return new Complex(this.re/re, this.im/re);\n    //\n    ////    return new Complex(\n    ////      (this.re*re + this.im*im) / (re*re + im*im),\n    ////      (this.im*re - this.re*im) / (re*re + im*im)\n    ////    );\n    //\n    //    if( Math.abs(re) >= Math.abs(im) )\n    //    {\n    //      const R = im / re;\n    //      return new Complex(\n    //        (this.re + this.im*R) / (re + im*R),\n    //        (this.im - this.re*R) / (re + im*R)\n    //      );\n    //    } else {\n    //      const R = re / im;\n    //      return new Complex(\n    //        (this.re*R + this.im) / (re*R + im),\n    //        (this.im*R - this.re) / (re*R + im)\n    //      );        \n    //    }\n    //  }\n    //\n    //  equals( re, im ) {\n    //    if( null == re ) re = 0.0;\n    //    if( null == im ) im = 0.0;\n    //    if( re.re != null ||\n    //        re.im != null ) {\n    //      im = re.im || 0;\n    //      re = re.re || 0;\n    //    }\n    //    return this.re == re\n    //        && this.im == im;\n    //  }\n    //\n    //  abs() {\n    //    return Math.hypot(this.re, this.im);\n    //  }\n    //\n    //  arg() {\n    //    return Math.atan2(this.im, this.re);\n    //  }\n    //\n    //  conj() {\n    //    return new Complex(this.re, -this.im );\n    //  }\n    //\n    //  toFixed(digits) {\n    //    return new Complex(\n    //      this.re.toFixed(digits),\n    //      this.im.toFixed(digits)\n    //    );\n    //  }\n    //\n    //  sqrt() {\n    //    // https://en.wikipedia.org/wiki/Square_root#Algebraic_formula\n    //    const abs = this.abs();\n    //    return new Complex(\n    //      math.sqrt( math.mul( math.add(abs,this.re), 0.5 ) ),\n    //      math.sqrt( math.mul( math.sub(abs,this.re), 0.5 ) )\n    //    );\n    //  }\n    // https://nodejs.org/api/util.html#util_util_inspect_custom\n\n  }, {\n    key: Symbol.for('nodejs.util.inspect.custom'),\n    value: function value() {\n      return this.toString();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      if (this.im == 0) return this.re.toString();\n      if (this.re == 0) return \"\".concat(this.im, \"j\");\n      if (this.im < 0) return \"\".concat(this.re, \" - \").concat(-this.im, \"j\");\n      return \"\".concat(this.re, \" + \").concat(this.im, \"j\");\n    }\n  }]);\n\n  return MutableComplex;\n}();\n\n//# sourceURL=webpack://nd/./src/dt/mutable_complex.js?");

/***/ }),

/***/ "./src/help.js":
/*!*********************!*\
  !*** ./src/help.js ***!
  \*********************/
/*! exports provided: help, help_str, math, dt, opt, la, io, array, asarray, NDArray, tabulate, zip_elems, concat, stack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"help\", function() { return help; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"help_str\", function() { return help_str; });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! . */ \"./src/index.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"math\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"math\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"dt\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"dt\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"opt\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"opt\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"la\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"la\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"io\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"io\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"array\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"array\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"asarray\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"asarray\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NDArray\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"tabulate\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"tabulate\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"zip_elems\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"zip_elems\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"concat\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"concat\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"stack\", function() { return ___WEBPACK_IMPORTED_MODULE_0__[\"stack\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n___WEBPACK_IMPORTED_MODULE_0__[\"help_str\"] = function (func_or_obj) {\n  return func_or_obj.__doc__ || 'No documentation available.';\n};\n\n___WEBPACK_IMPORTED_MODULE_0__[\"help\"] = function (func_or_obj) {\n  return console.log(___WEBPACK_IMPORTED_MODULE_0__[\"help_str\"](func_or_obj));\n};\n\n\nvar help = ___WEBPACK_IMPORTED_MODULE_0__[\"help\"];\nvar help_str = ___WEBPACK_IMPORTED_MODULE_0__[\"help_str\"];\n___WEBPACK_IMPORTED_MODULE_0__[\"dt\"].Complex.__doc__ = \"Rudimentary implementation of the Complex number type, used\\nmainly for the calculation of eigenvalues. Other than that,\\ncomplex dtype is not yet supported in NDJS.\\n\"; //\n// FACTORY METHODS\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].constructor.__doc__ = \"Creates a new NDArray with given shape and data array. This\\nconstructor may not create any protection copies of the given\\ndata but use it directly instead. This method is intended\\nfor internal use mostly. More user-friendly and convenient\\nfactory methods are available like nd.array, nd.tabulate or\\nNDArray.from.\\n\\nWARNING: This method freezes the buffer that's underlying the shape it's given.\\n\\nParameters\\n----------\\nshape: Int32Array\\n  The shape of new NDArray. May be used directly (no protection\\n  copy may be perfomed). The buffer behind this Int32Array will be frozen.\\ndata: dtype[]\\n  The flat data array to be used in this NDArray. May be used\\n  directly (no protection copy may be performed).\\n\\nReturns\\n-------\\nndarray: NDArray\\n  A new NDArray.\\n\\nExamples\\n--------\\n>>> a = new NDArray([2,3,2], [111,112,121,122,131,132,211,212,221,222,231,232])\\n>>> console.log( a.toString() )\\n  [[[111,112],\\n    [121,122],\\n    [131,132]],\\n   [[211,212],\\n    [221,222],\\n    [231,232]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"zip_elems\"].__doc__ = \"Creates a new NDArray from one or more NDArrays, using a function to\\nmerge the values of the NDArray(s) to the values of the new NDArray.\\n\\nThis can be used to perform unary (sin, cos, exp, ...) and binary\\n(+, -, *, ...) operations.\\n\\nThis method supports NumPy-style broadcasting of the NDArray arguments.\\n\\nParameters\\n----------\\nndarray: NDArray or NDArray[]\\n  The NDArray or list of NDArrays from which the new NDArray is built.\\ndtype: String\\n  [OPTIONAL] The data type of the new NDArray.\\nmapper: (...values, ...indices) => dtype\\n  A function used to determine the entry values of the new NDArray from\\n  the entry values of the old NDArray(s). May be omitted if only a single\\n  NDArray is given by ndarray, in which case the entry values are copied.\\n\\nReturns\\n-------\\nndarray: NDArray\\n  The newly created NDArray, where:\\n  ndarray(i0,i1,...,i[n]) = mapper(ndarray[0](i0,i1,...,i[n]), ndarray[1](i0,i1,...,i[n]), ..., ndarray[m](i0,i1,...,i[n]), i0,i1,...,i[n]).\\n\\nExamples\\n--------\\n>>> let a = nd.array([1,2,3,4])\\n>>> let b = nd.zip_elems(a, x => x*x)\\n>>> console.log( b.toString() )\\n  [1, 4, 9, 16]\\n\\n\\n>>> let c = nd.array([[1],[2]])\\n>>> let d = nd.array([1,2,3,4])\\n>>> let e = zip_elems([c,d], (x,y) => 10*x+y )\\n>>> console.log( e.toString() )\\n  [[11,12,13,14],\\n   [21,22,23,24]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"array\"].__doc__ = \"Tries to heuristically create an NDArray from the input. This\\nmethod is usually used to create NDArrays nested arrays, which\\nallows for a creation of NDArray which is well readable by\\nhumans.\\n\\n  * If the input is an object containing a 'shape' and 'data'\\n    property, a new NDArray is created using said shape and data\\n    directly (creating a protection copy of data).\\n  * If the input is a (possibly nested) JavaScript array-like, it\\n    is converted to an NDArray, copying the array data in the\\n    process. The nesting defines the shape of the resulting\\n    NDArray. \\n  * Otherwise the data is interpreted as a scalar value and\\n    is put into an NDArray of shape [].\\n\\nParameters\\n----------\\ndtype: String\\n  [Optional] The dtype of the returned NDArray.\\ncontent: { length: int[], data: dtype[] } or dtype or dtype[] or dtype[][] or ...\\n  The content of the returned NDArray.\\n\\nReturns\\n-------\\nndarray: NDArray\\n  An NDArray representation of the content.\\n\\nExamples\\n--------\\n>>> let content = { shape: [2,3], data: [1,2,3,4,5,6] }\\n>>> let a = nd.array(content)\\n>>> console.log( a.toString() )\\n  [[1,2,3],\\n   [4,5,6]]\\n>>> content.data[3] = 7\\n>>> console.log( a.toString() )\\n  [[1,2,3],\\n   [7,5,6]]\\n\\n\\n>>> let content = { shape: [2,3], data: [1,2,3,4,5,6] }\\n>>> let a = nd.array('int32',content)\\n>>> console.log( a.toString() )\\n  [[1,2,3],\\n   [4,5,6]]\\n>>> content.data[3] = 7\\n>>> console.log( a.toString() )\\n  [[1,2,3],\\n   [4,5,6]]\\n\\n\\n>>> let a = nd.array([\\n...   [1,2,3,4],\\n...   [5,6,7,8]\\n... ])\\n>>> console.log( a.toString() )\\n  [[1,2,3,4],\\n   [5,6,7,8]]\\n\\n\\n>>> console.log( nd.array(12) )\\n  { [NDArray: self] shape: [], data: Int32Array[12] }\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"asarray\"].__doc__ = \"Similar to `nd.array(content)` except that input is not copied if\\nit already is an `NDArray`.\\n\\nParameters\\n----------\\ncontent: { length: int[], data: dtype[] } or dtype or dtype[] or dtype[][] or ...\\n  The content of the returned NDArray.\\n\\nReturns\\n-------\\nndarray: NDArray\\n  `ndarray = content instanceof NDArray ? content : nd.array(content);`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"tabulate\"].__doc__ = \"Creates a new NDArray of the given shape, calling a function for\\neach entry index and using the returned value as entry value of\\nthe new NDArray.\\n\\nParameters\\n----------\\nshape: int[]\\n  The shape of the new NDArray.\\ndtype: String\\n  [OPTIONAL] The data type of the newly created NDArray.\\nidx2val: (...int) => dtype\\n  The function returning the entry value for a given entry index as input.\\n\\nReturns\\n-------\\nndarray: NDArray\\n  The newly tabulated NDArray, where:\\n  ndarray(i0,i1,...,i[n]) = idx2val(i0,i1,...i[n])\\n\\nExamples\\n--------\\n>>> let a = nd.tabulate([3,2], (i,j) => 10*(i+1) + (j+1) )\\n>>> console.log( a.toString() )\\n  [[11,12],\\n   [21,22],\\n   [31,32]]\\n\"; //\n// GENERAL\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].__doc__ = \"An n-dimensional, axis-aligned grid of entries, very similar\\nto NumPy ndarrays in Python.\\n\\nAttributes\\n----------\\nshape: int[]\\n  The shape of the NDArray.\\ndata : dtype[]\\n  The flat data array backing this NDArray. May be either\\n  a standard JavaScript Array, or one of JavaScripts primitive\\n  array types. See nd.dtypes for a list of supported data types.\\nndim: int\\n  The number of dimensions in this NDArray, i.e. the number of\\n  indices used to address the entries. Equivalent to shape.length.\\n  \\ndtype: String\\n  The data type of this NDArray. Specifies which type of values\\n  may be stored in the NDArray. See nd.dtypes for the available\\n  data types and their respective (primitive) array types.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.call.__doc__ = \"Returns the value of the entry specified by the given index.\\n\\nParameters\\n----------\\nthis: NDArray\\n  The array whose entry is being read.\\nindices: ...int\\n  The multi-index of the entry whose value is to be returned.\\n\\nReturns\\n-------\\nvalue: dtype\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2,3],[4,5,6]])\\n>>> console.log( a(0,0), a(0,1), a(0,2), a(1,0), a(1,1), a(1,2) )\\n  1 2 3 4 5 6\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.apply.__doc__ = ___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.call.__doc__;\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.set.__doc__ = \"Sets the value of the specified entry to the given value.\\n\\nParameters\\n----------\\nindices: int[]\\n  The multi index of the entry that is to be changed.\\nvalue: dtype\\n  The new value for the entry at indices.\\n\\nExamples\\n--------\\n>>> let a = nd.array([ [0,0,0], [0,0,0], [0,0,0] )\\n>>> a.set([0,0], 1)\\n>>> a.set([0,1], 2)\\n>>> a.set([1,1], 3)\\n>>> a.set([2,2], 4)\\n>>> console.log( a.toString() )\\n  [[1,2,0],\\n   [0,3,0],\\n   [0,0,4]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.modify.__doc__ = \"Modifies an array entriy by applying the given functions to it.\\nThis method call is equivalent to:\\n`ndarray.set( indices, modifier(ndarray(...indices), ...indices) )`\\n\\nParameters\\n----------\\nindices: int[]\\n  The multi index of the entry that is to modified.\\nmodifier: (dtype, ...int) => dtype\\n  The function that is applied to the NDArray entry.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.toString.__doc__ = \"Returns a readable string representation of this NDArray.\\n\\nParameters\\n----------\\nmax_len: int\\n  [OPTIONAL] The maximum number of elements along each to be represented\\n  in the String. If there is more elements along an axis than that, an\\n  ellipsis (...) is inserted instead of the central elements.\\n\\nReturns\\n-------\\nrepr: String\\n  A readable string representation of this nd.Arrray.\\n\\nExamples\\n--------\\n>>> let a = nd.tabulate([6,6], (i,j) => 10*(i+1) + (j+1) )\\n>>> console.log( a.toString() )\\n  [[11,12,13,14,15,16],\\n   [21,22,23,24,25,26],\\n   [31,32,33,34,35,36],\\n   [41,42,43,44,45,46],\\n   [51,52,53,54,55,56],\\n   [61,62,63,64,65,66]]\\n\\n>>> console.log( a.toString(4) )\\n  [[11, 12, ...2 more..., 15, 16],\\n   [21, 22, ...2 more..., 25, 26],\\n    ...2 more...,\\n   [51, 52, ...2 more..., 55, 56],\\n   [61, 62, ...2 more..., 65, 66]]\\n\"; //\n// ITERATIONS\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype[Symbol.iterator].__doc__ = \"Returns an iterator that iterates through the slices of this NDArray along\\nthe first axis. Equivalent to:\\n\\nfunction*() {\\n  for( let i=0; i < this.shape[0]; i++ )\\n    yield this.slice(i)\\n}\\n\\nReturns\\n-------\\niter: Iterator\\n  An iterator that yields the slices of this NDArray along its first axis.\\n\\nExamples\\n--------\\n>>> a = nd.array([[1,2],[3,4],[5,6]])\\n>>> for( let row of a )\\n...   console.log( row.toString() )\\n  [1,2]\\n  [3,4]\\n  [5,6]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.forEach.__doc__ = \"Calls the given callback for each slice of this NDArray along the\\nfirst axis. Equivalent to:\\n\\nfor( let i=0; i < this.shape[0]; i++ )\\n  consumer( this.slice(i), i )\\n\\nParameters\\n----------\\nconsumer: (slice: NDArray, index: int) => ()\\n  The callback to be called for each slice of this NDArray along the first axis.\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2,3],[4,5,6]])\\n>>> a.forEach( (row,i) => console.log(`${i} -> ${row}`) )\\n  0 -> [1,2,3]\\n  1 -> [4,5,6]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.elems.__doc__ = \"Returns an iterator of all multiindex-value pairs of entries in\\nthis NDArray.\\n\\nReturns\\n-------\\niter: *[[...int], dtype]\\n  An iterator of multiindex-value pairs, one for each entry in this\\n  NDArray.\\n\\nExamples\\n--------\\n>>> a = nd.array([[1,2,3],[4,5,6]])\\n>>> for( let [[i,j],a_ij] of a.entries() )\\n...   console.log(`a[${i},${j}] = ${val}`)\\n  a[0,0] = 1\\n  a[0,1] = 2\\n  a[0,2] = 3\\n  a[1,0] = 4\\n  a[1,1] = 5\\n  a[1,2] = 6\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.forElems.__doc__ = \"Calls the given callback for each entry in this NDArray.\\n\\nParameters\\n----------\\nconsumer: (val: dtype, indices: ...int) => ()\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2,3],[4,5,6]])\\n>>> a.forEntries( (a_ij,i,j) => console.log(`a[${i},${j}] = ${a_ij}`) )\\n  a[0,0] = 1\\n  a[0,1] = 2\\n  a[0,2] = 3\\n  a[1,0] = 4\\n  a[1,1] = 5\\n  a[1,2] = 6\\n\"; //\n// TRANSFORMATION\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.valueOf.__doc__ = \"\\nIf this NDArray is scalar (shape == []), the only entry's value is returned,\\notherwise this NDArray itself is returned.\\n\\nThis method rarely has to be called explicitly but is used by JavaScript\\nwhenever it deems it appropriate.\\n\\nReturns\\n-------\\nvalue: dtype or NDArray\\n  Returns the only entry if this NDArray is scalar. Returns this otherwise.\\n\\nExample\\n-------\\n>>> a = nd.array(12)\\n>>> console.log( a+1 )\\n  13\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.mapElems.__doc__ = \"Creates a new NDArray by applying the given mapping function to each entry\\nof this array and writing the results back into a new array.\\n\\nEquivalent to NDArray.from(this, dtype, mapper).\\n\\nParameters\\n----------\\ndtype: String\\n  [OPTIONAL] The data type of the newly created NDArray.\\nmapper: (value, ...indices) => dtype\\n  The function used to map the old NDArray's entries to the values of the\\n  new NDArray.\\n\\nReturns\\n-------\\nmapped: NDArray\\n  The newly created NDArray, where:\\n  mapped(i0,i1,...,i[n]) = mapper(this(i0,i1,...,i[n]), i0,i1,...,i[n]).\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2],[3,4]])\\n>>> let b = a.mapElems( x => x*x )\\n>>> console.log( b.toString() )\\n  [[1, 4],\\n   [9,16]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.transpose.__doc__ = \"Reorders the axes of this NDArray. By default the last two axes are\\nswapped.\\n\\nParameters\\n----------\\naxes: ...int\\n  The order in which the axes of the this NDArray appear in the\\n  transposed array. If indices are missing from `axes`, they are\\n  appended to `axes` in order.\\n\\nReturns\\n-------\\ntransposed: NDArray\\n  A transposed copy A of this NDArray, where:\\n  `A[i[0], i[1], ...]  =  this[i[axes[0]], i[axes[1], ...]`\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2,3]])\\n>>> console.log( a.transpose() )\\n  [[1],\\n   [2],\\n   [3]]\\n\\n>>> let a = nd.array([ [[1,2,3], [4,5,6]], [[7,8,9], [10,11,12]] ])\\n>>> console.log( a.transpose(2).toString() )\\n  [[[ 1,  4],\\n    [ 7, 10]],\\n   [[ 2,  5],\\n    [ 8, 11]],\\n   [[ 3,  6],\\n    [ 9, 12]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.reshape.__doc__ = \"Returns view of this NDArray with a different shape. This is similar\\nto NumPy's reshape with a 'C'-order.\\n\\nParameters\\n----------\\nshape: ...int\\n  The shape of the view. May contain a single -1 entry, in which case\\n  the respective axis' size is inferred.\\n\\nReturns\\n-------\\nreshaped: NDArray\\n  A reshaped view of this NDArray.\\n\\nExamples\\n--------\\n>>> let a = nd.array([1,2,3,4,5,6,7,8,9])\\n>>> let b = a.reshape(3,-1)\\n>>> console.log( b.toString() )\\n  [[1,2,3],\\n   [4,5,6],\\n   [7,8,9]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.reduceElems.__doc__ = \"Uses the given binary operator to reduce the entries of of this NDArray\\nalong the specified axes. If no axes are specified all entries are reduce\\nto a single value and said value is returned instead of an NDArray.\\n\\nParameters\\n----------\\naxes: int or int[]\\n  [OPTIONAL] The axes along which the array is to be reduced. If not defined\\n  the NDArray is reduced along all axes and a scalar value is returned instead\\n  of an NDArray.\\ndtype: String\\n  The data type of the reduced NDArray. Has to be a super-dtype of the original\\n  NDArray.\\nreducer: (dtype,dtype) => dtype\\n  The function used to reduce the entries along the axes.\\n\\nReturns\\n-------\\nreduced: NDArray or dtype\\n  The reduced NDArray if axes were specified or the reduced value id no\\n  axes were specified.\\n\\nExamples\\n--------\\n>>> let a = nd.array([\\n...   [1,2,3],\\n...   [4,5,6]\\n... ])\\n>>> console.log( a.reduce( (x,y) => x+y ) )\\n  21\\n\\n\\n>>> console.log( a.reduce( [0,1], (x,y) => x+y ) )\\n  { [NDArray: self] shape: [], data: [21] }\\n\\n>>> console.log( a.reduce( 0, (x,y) => x+y ).toString() )\\n  [5,7,9]\\n\\n>>> console.log( a.reduce( [1], (x,y) => x+y ).toString() )\\n  [6,15]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"].prototype.sliceElems.__doc__ = \"Extracts a sub-region specified by combination of indices, ranges, newaxis symbols.\\n\\nParameters\\n----------\\nslices: int or nd.newaxis or nd.ellipsis or [start,stop,step]\\n  The slices to be taken along each axis, e.g 3 would only take the fourth entries\\n  along an axis, [,,] would take all elements along and axis, [1,,] would take all\\n  but the first entries along an axis, [,,3] would take ever third element along\\n  an axis, [,-1,] would take all but the last entries along an axis, nd.newaxis\\n  would insert a new axis of size 1.\\n\\n  nd.ellipsis can be used to fill up with [,,] for the remaining axes.\\n\\nReturns\\n-------\\nsliced: NDArray\\n  A sliced subregion of this NDArray.\\n\\nExamples\\n--------\\n>>> let a = nd.array([\\n...   [11,12,13,14],\\n...   [21,22,23,24],\\n...   [31,32,33,34]\\n... ])\\n>>> console.log( a.sliceElems('...', -2).toString() )\\n  [13, 23, 33]\\n\\n>>> console.log( a.sliceElems([,,2]).toString() )\\n  [[11,12,13,14],\\n   [31,32,33,34]]\\n\\n>>> console.log( a.sliceElems(2,[1,3,]).toString() )\\n  [32,33]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"stack\"].__doc__ = \"Arranges a list of NDArrays into a new NDArray. The NDArrays are stacked\\nalong a newly axis, inserted at the specified index. All stacked NDArrays\\nmust have the same shape.\\n\\nParameters\\n----------\\naxis: int\\n  [OPTIONAL] The index at which the new index is to be inserted. Default value: 0.\\ndtype: String\\n  [OPTIONAL] The type of the stacked NDArray. Should be a super-dtype of all NDArrays'\\n  dtypes.\\nndarrays: NDArray[]\\n  The NDArrays that are to be stacked. All NDArrays must have the same shape.\\n\\nReturns\\n-------\\nstacked: NDArray\\n\\nExamples\\n--------\\n>>> let a = nd.array([1,2,3])\\n>>> let b = nd.array([4,5,6])\\n>>> console.log( nd.stack([a,b]).toString )\\n  [[1,2,3],\\n   [4,5,6]]\\n\\n>>> console.log( nd.stack(1,'float64',[a,b]).toString )\\n  [[1.0, 4.0],\\n   [2.0, 5.0],\\n   [3.0, 6.0]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"concat\"].__doc__ = \"Arranges a list of NDArrays into a new NDArray. The NDArrays are concatenated\\nalong an existing specified axis. Aside from said axis, the shape of all NDArrays\\nmust be the same.\\n\\nParameters\\n----------\\naxis: int\\n  [OPTIONAL] The axis along which the NDArrays are concatenated. Default value: 0.\\ndtype: String\\n  [OPTIONAL] The type of the concatenated NDArray. Should be a super-dtype of all NDArrays'\\n  dtypes.\\nndarrays: NDArray[]\\n  The NDArrays that are to be concatenated. All NDArrays must have the same shape.\\n\\nReturns\\n-------\\nconcatenated: NDArray\\n\\n\\nExamples\\n--------\\n>>> let a = nd.array([[1,2],[3,4]])\\n>>> let b = nd.array([[5,6],[7,8]])\\n>>> console.log( nd.concat([a,b]).toString() )\\n  [[1,2],\\n   [3,4],\\n   [5,6],\\n   [7,8]]\\n   \\n>>> console.log( nd.concat(1,[a,b]).toString() )\\n  [[1,2,5,6],\\n   [3,4,7,8]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"help\"].__doc__ = \"Outputs a documentation string for the given method ND.JS method to the console. This method\\nis intended to be used in interactive mode to explore and learn the ND.JS API.\\n\\nThis method is only available in the non-minfied version of ND.JS.\\n\\nParameters\\n----------\\nfun: Function\\n  The function or package ND.JS API method for which the documentation is to be retrieved.\\n\\nExamples\\n--------\\n>>> nd.help(nd.la)\\n  The Linear Algebra subpackage of ND.JS. Contains methods for the handling and decomposition\\n  of matrices as well as solvers for linear equations and linear least square systems.\\n\\n  As convention the last two axes of an `NDArray` are considered as the matrix dimensions.\\n  Higher dimensional arrays are considered \\\"arrays of matrices\\\" and the broadcasting rules\\n  apply for the leading dimenions, i.e. for all dimensions of the shape except the last two.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"help_str\"].__doc__ = \"Returns a documentation string for the given method ND.JS method to the console. This method\\nis used by `create_doc_jsdom()` to create the documentation and by `nd.help()` to\\nprint help to the console.\\n\\nThis method is only available in the non-minfied version of ND.JS.\\n\\nParameters\\n----------\\nfun: Function\\n  The function or package ND.JS API method for which the documentation is to be retrieved.\\n\\nReturns\\n-------\\nhelp: String\\n  A documentation String for the given method or package.\\n\\nExamples\\n--------\\n>>> console.log( nd.help(nd.la) )\\n  \\\"The Linear Algebra subpackage of ND.JS. Contains methods for the handling and decomposition\\n   of matrices as well as solvers for linear equations and linear least square systems.\\n\\n   As convention the last two axes of an `NDArray` are considered as the matrix dimensions.\\n   Higher dimensional arrays are considered \\\"arrays of matrices\\\" and the broadcasting rules\\n   apply for the leading dimenions, i.e. for all dimensions of the shape except the last two.\\\"\\n\"; //\n// OPTIMIZATION\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"opt\"].min_lbfgs_gen.__doc__ = \"Iteratively minimizes a function using the L-BFGS method. An indefinite number of solutions is\\nreturned unless the line search does not make any further progress, in which case a\\n`LineSearchNoProgressError` is thrown. The user must check for a proper stopping condition\\nher-/himself.\\n\\nParameters\\n----------\\nfg: (x: NDArray[N]) => [f: NDArray[], g: NDArray[N]]\\n  A method return both the function value and gradients of the optimized function for\\n  the given input `x`. \\nx0: NDArray[N]\\n  The starting point for the minimization.\\noptions: {\\n  historySize=8: int\\n    The number of past value-gradient pairs that are memoized in order to approximate the Hessian.\\n  lineSearch=nd.opt.line_search.strong_wolfe()\\n    The line search method used to advance the solution along the current search direction.\\n    Must at least satisfy the Wolfe Condition.\\n  negDir0 = g=>g: (g: NDArray[N]) => (negDir: NDArray[N])\\n    Returns the gradient-descent-like initial search direction. Can be used to control the initial\\n    search step.\\n}\\n\\nReturns\\n-------\\napproximations: Iterator<[x: NDArray[N], f: NDArray[] g: NDArray[N]]>\\n  An iterator over the approximations/iterations made by the L-BFGS method. Will return an indefinite\\n  amount of approximations unless a `LineSearchNoProgressError` is thrown.\\n\\nThrows\\n------\\nnoProgress: nd.opt.LineSearchNoProgressError\\n  If the optimization is not making any more progress. This is usally happens when the optimizer\\n  is already very close to the minimum.\\n\\nReferences\\n----------\\n.. [1] https://en.wikipedia.org/wiki/Limited-memory_BFGS\\n.. [2] https://en.wikipedia.org/wiki/Wolfe_conditions\\n\\nExample\\n-------\\n>>> const fg = ([x,y]) => [\\n...   nd.array(  (x-1)**2 + 100*(y-x*x)**2 ),\\n...   nd.array([ (x-1) *2 - 400*(y-x*x) *x,\\n...                         200*(y-x*x) ])\\n... ];\\n... let x,f,g, nIter = -1;\\n... try {\\n...   for( [x,f,g] of nd.opt.min_lbfgs_gen(fg, /*x0=*/[0,0], {negDir: g => g.mapElems(x => x*0.1)}) )\\n...   {\\n...     const gNorm = g.reduceElems(nd.math.hypot);\\n...     if( ++nIter > 1e3 )\\n...       throw new Error('Too many iterations.');\\n...     if( gNorm <= 1e-8 )\\n...       break;\\n...   }\\n... }\\n... catch(err) {\\n...   if( ! (err instanceof nd.opt.LineSearchNoProgressError) )\\n...     throw err;\\n...   console.log('No progress.');\\n... }\\n... console.log('Solution:', x);\\n  Solution: [ 0.9999999998879853, 0.9999999997700713 ]\\n\"; //\n// I/O\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"io\"].istr_parse.__doc__ = \"Parses an inlineable string representation (ISTR) of an `NDArray`. ISTR is intended\\nfor inlining large `NDArray`s into JavaScript code or JSON files. The string representation\\nconsists of a data type string, followed by a JSON array for the shape and finally a Base64\\nencoded, little-endian representation of the `NDArray`'s data/content. Except for within\\nthe type string or in between the digits of a shape integer, ISTR is whitespace-agnostic.\\n\\nParameters\\n----------\\nchars: Iterable<char>\\n  The character sequence that is to be parsed.\\n\\nReturns\\n-------\\nndarray: NDArray\\n  The `NDArray` parsed from `chars`.\\n\\nExamples\\n--------\\n>>> const a = nd.io.istr_parse(`int32[7,6]\\n...   CwAAAAwAAAANAAAADgAAAA8AAAAQAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAKQAAACoAAAArAAAALAAAAC0AAAAuAAAA\\n...   MwAAADQAAAA1AAAANgAAADcAAAA4AAAAPQAAAD4AAAA/AAAAQAAAAEEAAABCAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAA`\\n... );\\n>>> console.log( a.toString() )\\n  [[ 11, 12, 13, 14, 15, 16 ],\\n   [ 21, 22, 23, 24, 25, 26 ],\\n   [ 31, 32, 33, 34, 35, 36 ],\\n   [ 41, 42, 43, 44, 45, 46 ],\\n   [ 51, 52, 53, 54, 55, 56 ],\\n   [ 61, 62, 63, 64, 65, 66 ],\\n   [ 71, 72, 73, 74, 75, 76 ]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"io\"].istr_stringify.__doc__ = \"Converts an `NDArray` into an inlineable string representation (ISTR). ISTR is intended\\nfor inlining large `NDArray`s into JavaScript code or JSON files. The string representation\\nconsists of a data type string, followed by a JSON array for the shape and finally a Base64\\nencoded, little-endian representation of the `NDArray`'s data/content. Except for within\\nthe type string or in between the digits of a shape integer, ISTR is whitespace-agnostic.\\n\\nParameters\\n----------\\nndarray: NDArray\\n  The array that is to be converted to an inlineable string representation.\\noptions: {linewidth=128}\\n  [optional] The maximum number of Base64 characters per line before a newline\\n  character is inserted.\\n\\nReturns\\n-------\\nistr: string\\n  An inlineable string representation of `ndarray`.\\n\\nExamples\\n--------\\n>>> const a = nd.tabulate([7,6], 'int32', (i,j) => 10*i+j+11)\\n>>> console.log('`' + nd.io.istr_stringify(a) + '`')\\n  `int32[7,6]\\n  CwAAAAwAAAANAAAADgAAAA8AAAAQAAAAFQAAABYAAAAXAAAAGAAAABkAAAAaAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAAKQAAACoAAAArAAAALAAAAC0AAAAuAAAA\\n  MwAAADQAAAA1AAAANgAAADcAAAA4AAAAPQAAAD4AAAA/AAAAQAAAAEEAAABCAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAA`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"io\"].npy_serialize.__doc__ = \"Serializes an `NDArray` into an `Uint8Array` using version 1.0 of the NumPy NPY-format.\\nNPY is popular matrix exchange format that is implemented in several programming languages.\\nIt is well-suited for network streaming or file system storage.\\n\\nIn order to reduce memory overhead, consider using `nd.io.npy_serialize_gen()` which returns\\nan `Iterable<uint8>` instead of an `Uint8Array`.\\n\\nParameters\\n----------\\nndarray: NDArray\\n  The array that is to be serialized.\\n\\nReturns\\n-------\\nbytes: Uint8Array\\n  The bytes of the NPY representation of `ndarray`.\\n\"; //\n// LINEAR ALGEBRA\n//\n\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].__doc__ = \"The Linear Algebra subpackage of ND.JS. Contains methods for the handling and decomposition\\nof matrices as well as solvers for linear equations and linear least square systems.\\n\\nAs convention the last two axes of an `NDArray` are considered as the matrix dimensions.\\nHigher dimensional arrays are considered \\\"arrays of matrices\\\" and the broadcasting rules\\napply for the leading dimenions, i.e. for all dimensions of the shape except the last two.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].eye.__doc__ = \"Returns an NDArray of identity matrices, where the last two axes are the matrix dimensions.\\n\\nParameters\\n----------\\nshape: ...int\\n  The shape of the resulting array. If only one value N is given, an N*N identity\\n  matrix is returned.\\n\\nReturns\\n-------\\nI: NDArray\\n  The array of identity matrices, where the last two axes are the matrix dimensions.\\n\\nExamples\\n--------\\n>>> const I = nd.la.eye(2);\\n>>> console.log( I.toString() );\\n  [[1,0],\\n   [0,1]]\\n\\n>>> const J = nd.la.eye(2,3,4);\\n>>> console.log( J.toString() );\\n  [[[ 1, 0, 0, 0],\\n    [ 0, 1, 0, 0],\\n    [ 0, 0, 1, 0]],\\n   [[ 1, 0, 0, 0],\\n    [ 0, 1, 0, 0],\\n    [ 0, 0, 1, 0]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].tril.__doc__ = \"Returns a copy of an array with all entries outside of the lower triangular part set to 0.\\nThe last two axes are considered the matrix dimensions.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The array of matrices whose lower triangular parts are to be returned.\\noffset: int\\n  [Optional] The offset from the main diagonal of entries included in the  result.\\n  If `offset = +1` the entries above/right of the main diagonal are not set to zero.\\n  If `offset = -2` the entries on the main diagonal and one below/left of if are set to zero.\\n  The default value is 0.\\n\\nReturns\\n-------\\nL: NDArray[...,N,M]\\n  The lower triangular part of A, where `L(i,j) == i >= j-offset ? A(i,j) : 0`.\\n\\nExamples\\n--------\\n>>> const A = nd.tabulate([2,3,3], (k,i,j) => 100*(k+1) + 10*(i+1) + (j+i) );\\n>>> console.log( A.toString() );\\n  [[[ 110, 111, 112 ],\\n    [ 121, 122, 123 ],\\n    [ 132, 133, 134 ]],\\n   [[ 210, 211, 212 ],\\n    [ 221, 222, 223 ],\\n    [ 232, 233, 234 ]]]\\n\\n>>> const L1 = nd.la.tril(A);\\n>>> console.log( L1.toString() );\\n  [[[ 110,   0,   0 ],\\n    [ 121, 122,   0 ],\\n    [ 132, 133, 134 ]],\\n   [[ 210,   0,   0 ],\\n    [ 221, 222,   0 ],\\n    [ 232, 233, 234 ]]]\\n>>> const L2 = nd.la.tril(A,-1);\\n>>> console.log( L2.toString() );\\n  [[[   0,   0,  0 ],\\n    [ 121,   0,  0 ],\\n    [ 132, 133,  0 ]],\\n   [[   0,   0,  0 ],\\n    [ 221,   0,  0 ],\\n    [ 232, 233,  0 ]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].triu.__doc__ = \"Returns a copy of an array with all entries outside of the upper triangular part set to 0.\\nThe last two axes are considered the matrix dimensions.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The array of matrices whose upper triangular parts are to be returned.\\noffset: int\\n  [Optional] The offset from the main diagonal of entries included in the result.\\n  If `offset = +1` the main diagonal is set to zero.\\n  If `offset = -2` the entries on the main diagonal and one below/left of if are not set to zero.\\n  The default value is 0.\\n\\nReturns\\n-------\\nU: NDArray[...,N,M]\\n  The upper triangular part of A, where `L(i,j) == i <= j-offset ? A(i,j) : 0`.\\n\\nExamples\\n--------\\n>>> const A = nd.tabulate([2,3,3], (k,i,j) => 100*(k+1) + 10*(i+1) + (j+i) );\\n>>> console.log( A.toString() );\\n  [[[ 110, 111, 112 ],\\n    [ 121, 122, 123 ],\\n    [ 132, 133, 134 ]],\\n   [[ 210, 211, 212 ],\\n    [ 221, 222, 223 ],\\n    [ 232, 233, 234 ]]]\\n\\n>>> const L1 = nd.la.triu(A);\\n>>> console.log( L1.toString() );\\n[[[ 110, 111, 112 ],\\n  [   0, 122, 123 ],\\n  [   0,   0, 134 ]],\\n [[ 210, 211, 212 ],\\n  [   0, 222, 223 ],\\n  [   0,   0, 234 ]]]\\n>>> const L2 = nd.la.triu(A,+1);\\n>>> console.log( L2.toString() );\\n[[[ 0, 111, 112 ],\\n  [ 0,   0, 123 ],\\n  [ 0,   0,   0 ]],\\n [[ 0, 211, 212 ],\\n  [ 0,   0, 223 ],\\n  [ 0,   0,   0 ]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].diag_mat.__doc__ = \"Creates a (main) diagonal matrix with the given diagonal values.\\n\\nParameters\\n----------\\ndiag: NDArray[...,N]\\n  The diagonal values.\\n\\nReturns\\n-------\\nD: NDArray[...,N,N]\\n  Such that `D(i,j) == i==j ? diag(i) : 0`.\\n\\nExamples\\n--------\\n>>> const D = nd.la.diag_mat([[1,2,3],[4,5,6]]);\\n>>> console.log( D.toString() );\\n  [[[ 1, 0, 0 ],\\n    [ 0, 2, 0 ],\\n    [ 0, 0, 3 ]],\\n   [[ 4, 0, 0 ],\\n    [ 0, 5, 0 ],\\n    [ 0, 0, 6 ]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].matmul.__doc__ = \"Computes the matrix product of a series of matrices. The order\\nof multiplications is optimized to minimize the number of floating\\npoint operations required. The last two axes are considered to be\\nthe matrix dimensions. For the leading axes, broadcasting rules apply.\\nAlong with `nd.la.matmul2`, this is one of the only two methods\\nthat currently allows complex inputs.\\n\\nParameters\\n----------\\nmatrices: ...NDArray\\n  The matrices that are to be multiplied.\\n\\nReturns\\n-------\\nproduct: NDArray\\n  Where `product = matrices[0] @ matrices[1] @ ... @ matrices[n-1]`.\\n\\nExamples\\n--------\\n>>> const v = nd.tabulate([1e6,1], () => 1);\\n>>> console.log( v.toString() );\\n  [[ 1 ],\\n   [ 1 ],\\n   [ 1 ],\\n   [ 1 ],\\n   [ 1 ],\\n   ...999990 more...,\\n   [ 1 ],\\n   [ 1 ],\\n   [ 1 ],\\n   [ 1 ],\\n   [ 1 ]]\\n>>> const u = nd.la.matmul(v,v.T,v,v.T,v);\\n>>> console.log( u.toString() );\\n  [[1000000000000],\\n   [1000000000000],\\n   [1000000000000],\\n   [1000000000000],\\n   [1000000000000],\\n   ...999990 more...,\\n   [1000000000000],\\n   [1000000000000],\\n   [1000000000000],\\n   [1000000000000],\\n   [1000000000000]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].matmul2.__doc__ = \"Computes the matrix product of exactly two matrices. The last two axes\\nare considered to be the matrix dimensions. For the leading axes,\\nbroadcasting rules apply. Along with `nd.la.matmul`, this is one\\nof the only two methods that currently allows complex inputs.\\n\\nParameters\\n----------\\na: NDArray[...,N,K]\\n  The left factor matrices.\\nb: NDArray[...,K,M]\\n  The right factor matrices.\\n\\nReturns\\n-------\\nproduct: NDArray[...,N,M]\\n  Where `product = a @ b`.\\n\\nExamples\\n--------\\n>>> const A = [\\n...   [2, 0],\\n...   [0,-1]\\n... ];\\n>>> const x = nd.array([\\n...   [[1,2]],\\n...   [[3,4]],\\n...   [[5,6]]\\n... ]).T;\\n>>> console.log( x.toString() );\\n  [ [[1],\\n     [2]],\\n\\n    [[3],\\n     [4]],\\n\\n    [[5],\\n     [6]] ]\\n>>> const y = nd.la.matmul2(A,x);\\n>>> console.log( y.toString() );\\n  [ [[ 2 ],\\n     [-2 ]],\\n  \\n    [[ 6 ],\\n     [-4 ]],\\n  \\n    [[10 ],\\n     [-6 ]] ]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].cholesky_decomp.__doc__ = \"Computes the Cholesky Decomposition of an `NDArray` of symmetric, positive\\ndefinite (square) matrices. The implementation assume the matrices to be symmetric\\nand only looks at the lower triangular values. The last two axes of the `NDArray`\\nare considered to be the matrix dimensions.\\n\\nParameters\\n----------\\nS: NDArray[...,N,N]\\n  An `NDArray` of symmetric, positive definite (square) matrices. In other words\\n  S is symmetric and has only positive eigenvalues. \\n\\nReturns\\n-------\\nL: NDArray[...,N,N]\\n  A lower triangular matrix, such that `S = L @ L.T`.\\n\\nExamples\\n--------\\n>>> const S = [\\n...   [ 25, -50],\\n...   [-50, 101]\\n... ];\\n>>> const L = nd.la.cholesky_decomp(S);\\n>>> console.log( nd.la.matmul2(L,L.T).toString() );\\n  [[ 25, -50],\\n   [-50, 101]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].cholesky_solve.__doc__ = \"Given a cholesky decomposition and the right hand side of a linear equation system,\\nthis method computes the result of said system.\\n\\nParameters\\n----------\\nL: NDArray[...,N,N]\\n  An array of lower triangular (square) matrices. L is assumed to be lower triangular\\n  without looking at the upper triangular values.\\ny: NDArray[...,N,M]\\n  The right hand side of the linear equations system.\\n\\nReturns\\n-------\\nx: NDArray[...,N,M]\\n  Such that `L @ L.T @ x == y`.\\n\\nExamples\\n--------\\n>>> const S = [\\n...   [ 25, -50],\\n...   [-50, 101]\\n... ];\\n>>> const y = [\\n...   [[1],\\n...    [2]],\\n...   [[3],\\n...    [4]]\\n... ];\\n>>> const L = nd.la.cholesky_decomp(S);\\n>>> const x = nd.la.cholesky_solve(L,y);\\n>>> console.log( nd.la.matmul2(S,x) );\\n [[[1.0],\\n   [2.0]],\\n  [[3.0],\\n   [4.0]]]\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].tril_solve.__doc__ = \"Given the lower triangular (square) matrix and the right hand side of a linear\\nequation system, this method computes the result.\\n\\nParameters\\n----------\\nL: NDArray[...,N,N]\\n  The lower triangular matrix of the linear equations system. L is assumed to\\n  be lower triangular without ever looking at the values in the upper triangular\\n  region.\\ny: NDArray[...,N,M]\\n  The right hand side matrix of the linear equation system.\\n\\nReturns\\n-------\\nx: NDArray[...,N,M]\\n  Such that `L @ x = y`.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].triu_solve.__doc__ = \"Given the upper triangular (square) matrix and the right hand side of a linear\\nequation system, this method computes the result.\\n\\nParameters\\n----------\\nU: NDArray[...,N,N]\\n  The upper triangular matrix of the linear equations system. U is assumed to\\n  be upper triangular without ever looking at the values in the lower triangular\\n  region.\\ny: NDArray[...,N,M]\\n  The right hand side matrix of the linear equation system.\\n\\nReturns\\n-------\\nx: NDArray[...,N,M]\\n  Such that `U @ x = y`.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].lu_decomp.__doc__ = \"Given an `NDArray` of square matrices, this method Computes the\\nLU(P) decomposition with Column Pivotization.\\n\\nParameters\\n----------\\nA: NDArray[...,N,N]\\n\\nReturns\\n-------\\nLU: NDArray[...,N,N]\\n  A matrix containing both the lower and upper triangular part of the\\n  LU decomposition. The diagonal of ther lower triangular matrix L\\n  is not contained in LU. It only containes ones and is implied.\\nP : NDArray[...,N]\\n  The order in which the row indices of A appear in the LU decomposition, i.e.:\\n  `A(P[i],j) == (L @ U)[i,j]`.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].lu_solve.__doc__ = \"Given the LU(P) decomposition and the right hand side of a\\nLinear Equations System, this method computes the result of\\nsaid system.\\n\\nParameters\\n----------\\nLU: NDArray[...,N,N]\\nP : NDArray[...,N]\\ny : NDArray[...,N,M]\\n\\nReturns\\n-------\\nx : NDArray[...,N,M]\\n  The solution of the Linear Equation System, such that:\\n  `y[P[i],:] == (L @ U @ x)[i,:] `\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].qr_decomp_full.__doc__ = \"Computes the (full) QR Decomposition of a matrix. The QR\\nDecomposition can be used to solve both Linear Equations\\nand Linear Least Square problems with high numeric accuracy.\\nUnder normal circumstances, the incomplete QR Decomposition\\n(`nd.la.qr_decomp`) is to be preferred over this method\\nas it may be significantly more memory efficient.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The matrix for which the QR Decomposition is computed.\\n\\nReturns\\n-------\\nQ: NDArray[...,N,N]\\n  An orthogonal square matrix, i.e. `Q @ Q.T == Q.T @ Q == nd.la.eye(N)`.\\nR: NDArray[...,N,M]\\n  An upper triangular matrix, such that: `A = Q @ R`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].hessenberg_decomp.__doc__ = \"Computes the (Upper) Hessenberg Decomposition of a matrix. It\\nis worth mentioning that the Hessenberg Decomposition of a\\nsymmetric matrix is tridiagonal.\\n\\nParameters\\n----------\\nA: NDArray[...,N,N]\\n  The matrix for which the Hessemberg Decomposition is computed.\\n\\nReturns\\n-------\\nU: NDArray[...,N,N]\\n  An orthogonal matrix, i.e. `U @ U.T == U.T @ U == nd.la.eye(N)`.\\nH: NDArray[...,N,N]\\n  An upper Hessemberg matrix, i.e. `nd.la.tril(H,-2) == 0`, such that `U @ H @ U.T == A`.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].eigen.__doc__ = \"Returns the eigenpairs of a real square matrix.\\n\\nParameters\\n----------\\nA: NDArray[...,N,N]\\n  The non-symmetric real squre matrix for which the eigenvalues are computed.\\n\\nReturns\\n-------\\n\\u039B: NDArray[...,N]\\n  A matrix containing all eigenvalues.\\nV: NDArray[...,N,N]\\n  A matrix containing the eigenvectors corresponding to \\u039B as columns, i.e.:\\n  `\\u039B[i]*V[j,i] == (A @ V)[j,i]`.\\n  The columns are normalized using the 2-norm. \\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].schur_decomp.__doc__ = \"Computes the (real) Schur Decomposition of a matrix. The\\nSchur Decomposition is used to compute the Eigenvalues and\\nEigenvectors.\\n\\nParameters\\n----------\\nA: NDArray[...,N,N]\\n\\nReturns\\n-------\\nQ: NDArray[...,N,N]\\n  An orthogonal square matrix.\\nT: NDArray[...,N,N]\\n  An upper quasi-triangular matrix, such that `Q @ T @ Q.T == A`.\\n  The diagonal of T consists of 2x2 blocks that represent complex\\n  eigenpairs and 1x1 matrix that represent a real eigenvalue.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].qr_decomp.__doc__ = \"Computes the (economic) QR Decomposition of a matrix. The\\nQR Decomposition can be used to solve both Linear Equations\\nand Linear Least Square problems with high numeric accuracy.\\nUnder normal circumstances, this method is to\\nbe preferred over the full QR Decomposition (`nd.la.qr_decomp_full`)\\nas it may be significantly more memory efficient.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The matrix for which the QR Decomposition is computed.\\n\\nReturns\\n-------\\nQ: NDArray[...,N,min(N,M)]\\n  An orthogonal rectangular matrix, i.e. `Q.T @ Q == nd.la.eye(min(N,M))`.\\nR: NDArray[...,min(N,M),M]\\n  An upper triangular matrix, such that: `A = Q @ R`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].rrqr_decomp.__doc__ = \"Computes the economic Rank-Revealing QR Decomposition of a matrix.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The matrix for which the QR Decomposition is computed.\\n\\nReturns\\n-------\\nQ: NDArray[...,N,min(N,M)]\\n  An orthogonal rectangular matrix, i.e. `Q.T @ Q == nd.la.eye(min(N,M))`.\\nR: NDArray[...,min(N,M),M]\\n  An upper triangular matrix, where `R[i,i] >= R[j,j]` if and only if `i <= j`.\\nP: NDArray[...,M]\\n  The permuted column indices, such that:\\n  `(Q @ R)[:,j] == A[:,P[j]]`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].qr_lstsq.__doc__ = \"Given the QR Decompostion and the right hand side of a full-rank\\nlinear equation system, this method solves it. If the Linear\\nEquation System is under-determined, the Linear Least Square\\nsolution is computed. This method is no suited for rank-deficient\\nor under-determined systems, in which case `rrqr_lstsq` or\\n`svd_lstsq` can be used instead.\\n\\nParameters\\n----------\\nQ: NDArray[...,N,K]\\n  The orthognal rectangular matrix of the QR Decomposition.\\nR: NDArray[...,K,M]\\n  The upper triangular matrix of the QR Decomposition.\\ny: NDArray[...,N,L]\\n  The right hand side of the Linear Equation System.\\n\\nReturns\\n-------\\nx: NDArray[...,N,L]\\n  Such that `\\u2016(Q @ R @ x) - y\\u2016\\u2082` is minimal.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].bidiag_decomp.__doc__ = \"Computes the Upper Bidiagonal Decomposition of a matrix. Bidiagonal\\nDecomposition is a common preprocessing step for the Singular Value\\nDecomposition.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The matrix for which the Upper Bidiagonal Decomposition is\\n  computed.\\n\\nReturns\\n-------\\nU: NDArray[..., N, min(N,M)]\\n  An orthognal rectangular matrix.\\nB: NDArray[..., min(N,M), N >= M ? M : N+1 ]\\n  An upper bidiagonal rectangular matrix.\\nV: NDArray[..., N >= M ? M : N+1, M]\\n  An orthogonal rectangular matrix. Such that `A = U @ B @ V @`\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].solve.__doc__ = \"Solves a full-rank Linear Equations System (LES). The method tries to\\ndetect rank-deficient systems and throw a `SingularMatrixSolveError`,\\nwhich contains some least squares solution to the rank-deficient\\nsystem as property `x`.\\n\\nParameters\\n----------\\nA: NDArray[...,N,K]\\n  The matrix of the LES.\\ny: NDArray[...,K,M]\\n  The right hand side of the LES.\\n\\nReturns\\n-------\\nx: NDArray[...,N,M]\\n  The solution of `(A @ x) = y`.\\n\";\n___WEBPACK_IMPORTED_MODULE_0__[\"la\"].svd_decomp.__doc__ = \"Computes the Singular Value Decomposition (SVD) of a matrix.\\n\\nParameters\\n----------\\nA: NDArray[...,N,M]\\n  The matrix for which the SVD is computed.\\n\\nReturns\\n-------\\nU : NDArray[...,N,min(N,M)]\\n  An orthogonal, rectangular matrix.\\nsv: NDArray[..., min(N,M) ]\\n  The singular values of A sorted in descending order.\\nV : NDArray[...,min(N,M),M]\\n  An orthogonal, rectangular matrix, such that `A == U @ diag(sv) @ V`.\\n\";\n\n//# sourceURL=webpack://nd/./src/help.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: math, dt, opt, la, io, array, asarray, NDArray, tabulate, zip_elems, concat, stack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dt */ \"./src/dt/index.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"dt\", function() { return _dt__WEBPACK_IMPORTED_MODULE_0__; });\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./math */ \"./src/math.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"math\", function() { return _math__WEBPACK_IMPORTED_MODULE_1__[\"math\"]; });\n\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nd_array */ \"./src/nd_array.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"array\", function() { return _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"array\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"asarray\", function() { return _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"NDArray\", function() { return _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"]; });\n\n/* harmony import */ var _tabulate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tabulate */ \"./src/tabulate.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"tabulate\", function() { return _tabulate__WEBPACK_IMPORTED_MODULE_3__[\"tabulate\"]; });\n\n/* harmony import */ var _zip_elems__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./zip_elems */ \"./src/zip_elems.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"zip_elems\", function() { return _zip_elems__WEBPACK_IMPORTED_MODULE_4__[\"zip_elems\"]; });\n\n/* harmony import */ var _concat__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./concat */ \"./src/concat.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"concat\", function() { return _concat__WEBPACK_IMPORTED_MODULE_5__[\"concat\"]; });\n\n/* harmony import */ var _stack__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./stack */ \"./src/stack.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"stack\", function() { return _stack__WEBPACK_IMPORTED_MODULE_6__[\"stack\"]; });\n\n/* harmony import */ var _opt__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./opt */ \"./src/opt/index.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"opt\", function() { return _opt__WEBPACK_IMPORTED_MODULE_7__; });\n/* harmony import */ var _la__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./la */ \"./src/la/index.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"la\", function() { return _la__WEBPACK_IMPORTED_MODULE_8__; });\n/* harmony import */ var _io__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./io */ \"./src/io/index.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"io\", function() { return _io__WEBPACK_IMPORTED_MODULE_9__; });\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://nd/./src/index.js?");

/***/ }),

/***/ "./src/io/b64.js":
/*!***********************!*\
  !*** ./src/io/b64.js ***!
  \***********************/
/*! exports provided: b64_decode, b64_decode_gen, b64_encode, b64_encode_gen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b64_decode\", function() { return b64_decode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b64_decode_gen\", function() { return b64_decode_gen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b64_encode\", function() { return b64_encode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b64_encode_gen\", function() { return b64_encode_gen; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nvar _marked =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(b64_decode_gen),\n    _marked2 =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(b64_encode_gen);\n\nvar BYTE_TO_CHAR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',\n    WHITESPACES = '\\f\\n\\r\\t\\v ',\n    CHAR_TO_BYTE = Int32Array.from({\n  length: 256\n}, function () {\n  return -2;\n});\nif (BYTE_TO_CHAR.length !== 64) throw new Error('Assertion failed.');\n\nfor (var i = BYTE_TO_CHAR.length; i-- > 0;) {\n  CHAR_TO_BYTE[BYTE_TO_CHAR.charCodeAt(i)] = i;\n}\n\nfor (var _i = WHITESPACES.length; _i-- > 0;) {\n  CHAR_TO_BYTE[WHITESPACES.charCodeAt(_i)] = -1;\n}\n\nfunction b64_decode(b64_chars) {\n  return Uint8Array.from(b64_decode_gen(b64_chars));\n}\nfunction b64_decode_gen(b64_chars) {\n  var done, next6, warn, bit0to5, bit6to11, bit12to17, bit18to23;\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function b64_decode_gen$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          warn = function _ref2() {\n            console.warn(\"_b64_decode(b64_chars): Base64 sequence ended unexpectedly.\");\n          };\n\n          next6 = function _ref() {\n            while (true) {\n              var value = void 0;\n\n              var _b64_chars$next = b64_chars.next();\n\n              value = _b64_chars$next.value;\n              done = _b64_chars$next.done;\n              done = done || '=' === value;\n              if (done) return NaN;\n              if ('string' !== typeof value || value.length !== 1) throw new Error(\"_b64_decode(b64_chars): Invalid token in character sequence: \".concat(value, \".\"));\n              value = CHAR_TO_BYTE[value.charCodeAt(0)]; // skip whitespaces\n\n              if (value === -1) continue;\n              if (!(value >= 0)) // <- handles undefined\n                throw new Error(\"_b64_decode(b64_chars): Invalid base64 character '\".concat(value, \"'.\"));\n              return value;\n            }\n          };\n\n          b64_chars = b64_chars[Symbol.iterator]();\n\n        case 3:\n          if (false) {}\n\n          bit0to5 = next6();\n\n          if (!done) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 7:\n          bit6to11 = next6();\n\n          if (!done) {\n            _context.next = 10;\n            break;\n          }\n\n          return _context.abrupt(\"return\", warn());\n\n        case 10:\n          _context.next = 12;\n          return bit0to5 << 2 | bit6to11 >> 4;\n\n        case 12:\n          bit12to17 = next6();\n\n          if (!done) {\n            _context.next = 15;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 15:\n          _context.next = 17;\n          return (bit6to11 & 15) << 4 | bit12to17 >> 2;\n\n        case 17:\n          bit18to23 = next6();\n\n          if (!done) {\n            _context.next = 20;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 20:\n          _context.next = 22;\n          return (bit12to17 & 3) << 6 | bit18to23 & 63;\n\n        case 22:\n          _context.next = 3;\n          break;\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\nfunction b64_encode(bytes) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var result = '';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = b64_encode_gen(bytes, options)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var c = _step.value;\n      result += c;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return result;\n}\nfunction b64_encode_gen(bytes) {\n  var _ref3,\n      _ref3$pad,\n      pad,\n      _ref3$linewidth,\n      linewidth,\n      rawBytes,\n      sixPacks,\n      i,\n      _iteratorNormalCompletion3,\n      _didIteratorError3,\n      _iteratorError3,\n      _iterator3,\n      _step3,\n      six,\n      _args4 = arguments;\n\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function b64_encode_gen$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _ref3 = _args4.length > 1 && _args4[1] !== undefined ? _args4[1] : {}, _ref3$pad = _ref3.pad, pad = _ref3$pad === void 0 ? true : _ref3$pad, _ref3$linewidth = _ref3.linewidth, linewidth = _ref3$linewidth === void 0 ? 128 : _ref3$linewidth;\n\n          if (0 < linewidth) {\n            _context4.next = 3;\n            break;\n          }\n\n          throw new Error(\"_b64_encode(bytes,{linewidth}): Invalid linewidth: \".concat(linewidth, \".\"));\n\n        case 3:\n          rawBytes = bytes[Symbol.iterator]();\n          bytes =\n          /*#__PURE__*/\n          _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n            var _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, byte;\n\n            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context2) {\n              while (1) {\n                switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _iteratorNormalCompletion2 = true;\n                    _didIteratorError2 = false;\n                    _iteratorError2 = undefined;\n                    _context2.prev = 3;\n                    _iterator2 = rawBytes[Symbol.iterator]();\n\n                  case 5:\n                    if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                      _context2.next = 15;\n                      break;\n                    }\n\n                    byte = _step2.value;\n                    byte *= 1;\n\n                    if (0 <= byte && byte < 256) {\n                      _context2.next = 10;\n                      break;\n                    }\n\n                    throw new Error(\"_b64_encode(bytes): Invalid token in byte sequence: \".concat(byte));\n\n                  case 10:\n                    _context2.next = 12;\n                    return byte;\n\n                  case 12:\n                    _iteratorNormalCompletion2 = true;\n                    _context2.next = 5;\n                    break;\n\n                  case 15:\n                    _context2.next = 21;\n                    break;\n\n                  case 17:\n                    _context2.prev = 17;\n                    _context2.t0 = _context2[\"catch\"](3);\n                    _didIteratorError2 = true;\n                    _iteratorError2 = _context2.t0;\n\n                  case 21:\n                    _context2.prev = 21;\n                    _context2.prev = 22;\n\n                    if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                      _iterator2.return();\n                    }\n\n                  case 24:\n                    _context2.prev = 24;\n\n                    if (!_didIteratorError2) {\n                      _context2.next = 27;\n                      break;\n                    }\n\n                    throw _iteratorError2;\n\n                  case 27:\n                    return _context2.finish(24);\n\n                  case 28:\n                    return _context2.finish(21);\n\n                  case 29:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }\n            }, _callee, this, [[3, 17, 21, 29], [22,, 24, 28]]);\n          })();\n          sixPacks =\n          /*#__PURE__*/\n          _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2() {\n            var value, done, six, _bytes$next, _bytes$next2, _bytes$next3;\n\n            return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context3) {\n              while (1) {\n                switch (_context3.prev = _context3.next) {\n                  case 0:\n                    if (false) {}\n\n                    six = void 0;\n                    _bytes$next = bytes.next();\n                    value = _bytes$next.value;\n                    done = _bytes$next.done;\n\n                    if (!done) {\n                      _context3.next = 7;\n                      break;\n                    }\n\n                    return _context3.abrupt(\"return\");\n\n                  case 7:\n                    _context3.next = 9;\n                    return value >> 2;\n\n                  case 9:\n                    six = (value & 3) << 4;\n                    _bytes$next2 = bytes.next();\n                    value = _bytes$next2.value;\n                    done = _bytes$next2.done;\n\n                    if (!done) {\n                      _context3.next = 17;\n                      break;\n                    }\n\n                    _context3.next = 16;\n                    return six;\n\n                  case 16:\n                    return _context3.abrupt(\"return\");\n\n                  case 17:\n                    _context3.next = 19;\n                    return value >> 4 | six;\n\n                  case 19:\n                    six = (value & 15) << 2;\n                    _bytes$next3 = bytes.next();\n                    value = _bytes$next3.value;\n                    done = _bytes$next3.done;\n\n                    if (!done) {\n                      _context3.next = 27;\n                      break;\n                    }\n\n                    _context3.next = 26;\n                    return six;\n\n                  case 26:\n                    return _context3.abrupt(\"return\");\n\n                  case 27:\n                    _context3.next = 29;\n                    return value >> 6 | six;\n\n                  case 29:\n                    _context3.next = 31;\n                    return value & 63;\n\n                  case 31:\n                    _context3.next = 0;\n                    break;\n\n                  case 33:\n                  case \"end\":\n                    return _context3.stop();\n                }\n              }\n            }, _callee2, this);\n          })();\n          i = 0;\n          _iteratorNormalCompletion3 = true;\n          _didIteratorError3 = false;\n          _iteratorError3 = undefined;\n          _context4.prev = 10;\n          _iterator3 = sixPacks[Symbol.iterator]();\n\n        case 12:\n          if (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n            _context4.next = 26;\n            break;\n          }\n\n          six = _step3.value;\n\n          if (!('number' !== typeof six)) {\n            _context4.next = 16;\n            break;\n          }\n\n          throw new Error('Assertion failed.');\n\n        case 16:\n          if (0 <= six && six < 64) {\n            _context4.next = 18;\n            break;\n          }\n\n          throw new Error('Assertion failed.');\n\n        case 18:\n          _context4.next = 20;\n          return BYTE_TO_CHAR[six];\n\n        case 20:\n          if (!(0 === ++i % linewidth)) {\n            _context4.next = 23;\n            break;\n          }\n\n          _context4.next = 23;\n          return '\\n';\n\n        case 23:\n          _iteratorNormalCompletion3 = true;\n          _context4.next = 12;\n          break;\n\n        case 26:\n          _context4.next = 32;\n          break;\n\n        case 28:\n          _context4.prev = 28;\n          _context4.t0 = _context4[\"catch\"](10);\n          _didIteratorError3 = true;\n          _iteratorError3 = _context4.t0;\n\n        case 32:\n          _context4.prev = 32;\n          _context4.prev = 33;\n\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n\n        case 35:\n          _context4.prev = 35;\n\n          if (!_didIteratorError3) {\n            _context4.next = 38;\n            break;\n          }\n\n          throw _iteratorError3;\n\n        case 38:\n          return _context4.finish(35);\n\n        case 39:\n          return _context4.finish(32);\n\n        case 40:\n          if (!pad) {\n            _context4.next = 46;\n            break;\n          }\n\n        case 41:\n          if (!(0 !== i++ % 4)) {\n            _context4.next = 46;\n            break;\n          }\n\n          _context4.next = 44;\n          return '=';\n\n        case 44:\n          _context4.next = 41;\n          break;\n\n        case 46:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked2, this, [[10, 28, 32, 40], [33,, 35, 39]]);\n}\n\n//# sourceURL=webpack://nd/./src/io/b64.js?");

/***/ }),

/***/ "./src/io/index.js":
/*!*************************!*\
  !*** ./src/io/index.js ***!
  \*************************/
/*! exports provided: IS_LITTLE_ENDIAN, WHITESPACES, b64_decode, b64_decode_gen, b64_encode, b64_encode_gen, istr_parse, istr_stringify, istr_stringify_gen, npy_serialize, npy_serialize_gen, npy_deserialize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IS_LITTLE_ENDIAN\", function() { return IS_LITTLE_ENDIAN; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WHITESPACES\", function() { return WHITESPACES; });\n/* harmony import */ var _b64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./b64 */ \"./src/io/b64.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"b64_decode\", function() { return _b64__WEBPACK_IMPORTED_MODULE_0__[\"b64_decode\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"b64_decode_gen\", function() { return _b64__WEBPACK_IMPORTED_MODULE_0__[\"b64_decode_gen\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"b64_encode\", function() { return _b64__WEBPACK_IMPORTED_MODULE_0__[\"b64_encode\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"b64_encode_gen\", function() { return _b64__WEBPACK_IMPORTED_MODULE_0__[\"b64_encode_gen\"]; });\n\n/* harmony import */ var _istr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./istr */ \"./src/io/istr.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"istr_parse\", function() { return _istr__WEBPACK_IMPORTED_MODULE_1__[\"istr_parse\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"istr_stringify\", function() { return _istr__WEBPACK_IMPORTED_MODULE_1__[\"istr_stringify\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"istr_stringify_gen\", function() { return _istr__WEBPACK_IMPORTED_MODULE_1__[\"istr_stringify_gen\"]; });\n\n/* harmony import */ var _npy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./npy */ \"./src/io/npy.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"npy_serialize\", function() { return _npy__WEBPACK_IMPORTED_MODULE_2__[\"npy_serialize\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"npy_serialize_gen\", function() { return _npy__WEBPACK_IMPORTED_MODULE_2__[\"npy_serialize_gen\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"npy_deserialize\", function() { return _npy__WEBPACK_IMPORTED_MODULE_2__[\"npy_deserialize\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar IS_LITTLE_ENDIAN = new Int16Array(Uint8Array.of(1, 0).buffer)[0] === 1;\nvar WHITESPACES = '\\f\\n\\r\\t\\v ';\n\n\n\n\n//# sourceURL=webpack://nd/./src/io/index.js?");

/***/ }),

/***/ "./src/io/istr.js":
/*!************************!*\
  !*** ./src/io/istr.js ***!
  \************************/
/*! exports provided: istr_parse, istr_stringify, istr_stringify_gen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"istr_parse\", function() { return istr_parse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"istr_stringify\", function() { return istr_stringify; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"istr_stringify_gen\", function() { return istr_stringify_gen; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _b64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./b64 */ \"./src/io/b64.js\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! . */ \"./src/io/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nvar _marked =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(istr_stringify_gen);\n\n\n\n\n\nfunction istr_parse(b64_chars) {\n  b64_chars = b64_chars[Symbol.iterator]();\n  var dtype = [];\n\n  for (;;) {\n    var _b64_chars$next = b64_chars.next(),\n        value = _b64_chars$next.value,\n        done = _b64_chars$next.done;\n\n    if (done) throw new Error('b64_parse(b64_chars): Invalid b64_chars.');\n    if (value === '[') break;\n    dtype.push(value);\n  }\n\n  dtype = dtype.join('').trim();\n  if (dtype === '') throw new Error('b64_parse(b64_chars): dtype=object not (yet) supported.');\n\n  Object(_dt__WEBPACK_IMPORTED_MODULE_1__[\"_check_dtype\"])(dtype);\n\n  var shape = [];\n\n  for (var s = [];;) {\n    var _b64_chars$next2 = b64_chars.next(),\n        value = _b64_chars$next2.value,\n        done = _b64_chars$next2.done;\n\n    if (done) throw new Error('b64_parse(b64_chars): Invalid b64_chars.');\n    if (value === ']' && s.length === 0) break;\n\n    if (value === ']' || value === ',') {\n      var d = s.join('');\n      if (isNaN(d)) throw new Error(\"b64_parse(b64_chars): Invalid shape entry: \\\"\".concat(d, \"\\\".\"));\n      shape.push(1 * d);\n      if (value === ']') break;\n      s = [];\n      continue;\n    }\n\n    s.push(value);\n  }\n\n  shape = Int32Array.from(shape);\n  b64_chars = Object(_b64__WEBPACK_IMPORTED_MODULE_2__[\"b64_decode_gen\"])(b64_chars);\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][dtype],\n      data = new Uint8Array(shape.reduce(function (m, n) {\n    return m * n;\n  }, DTypeArray.BYTES_PER_ELEMENT)),\n      word = new Uint8Array(DTypeArray.BYTES_PER_ELEMENT);\n\n  for (var i = 0; i < data.length;) {\n    for (var j = 0; j < word.length; j++) {\n      var _b64_chars$next3 = b64_chars.next(),\n          value = _b64_chars$next3.value,\n          done = _b64_chars$next3.done;\n\n      if (done) throw new Error('b64_parse(b64_chars): b64_chars too short.');\n      word[j] = value;\n    }\n\n    if (!___WEBPACK_IMPORTED_MODULE_3__[\"IS_LITTLE_ENDIAN\"]) word.reverse();\n\n    for (var _j = 0; _j < word.length; _j++, i++) {\n      data[i] = word[_j];\n    }\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_4__[\"NDArray\"](shape, new DTypeArray(data.buffer));\n}\nfunction istr_stringify(ndarray) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var result = '';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = istr_stringify_gen(ndarray, options)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var c = _step.value;\n      result += c;\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return result;\n}\nfunction istr_stringify_gen(ndarray) {\n  var options,\n      data,\n      _args = arguments;\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function istr_stringify_gen$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          ndarray = Object(_nd_array__WEBPACK_IMPORTED_MODULE_4__[\"asarray\"])(ndarray);\n          data = ndarray.data;\n\n          if (!(ndarray.dtype === 'object')) {\n            _context.next = 5;\n            break;\n          }\n\n          throw new Error(\"b64_format(A): A.dtype='\".concat(ndarray.dtype, \"' not supported.\"));\n\n        case 5:\n          if (___WEBPACK_IMPORTED_MODULE_3__[\"IS_LITTLE_ENDIAN\"]) {\n            _context.next = 7;\n            break;\n          }\n\n          throw new Error('Big endianness not (yet) supported.');\n\n        case 7:\n          return _context.delegateYield(\"\".concat(ndarray.dtype, \"[\").concat(ndarray.shape.join(','), \"]\\n\"), \"t0\", 8);\n\n        case 8:\n          return _context.delegateYield(Object(_b64__WEBPACK_IMPORTED_MODULE_2__[\"b64_encode_gen\"])(new Uint8Array(data.buffer, data.byteOffset, data.byteLength), options), \"t1\", 9);\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\n//# sourceURL=webpack://nd/./src/io/istr.js?");

/***/ }),

/***/ "./src/io/npy.js":
/*!***********************!*\
  !*** ./src/io/npy.js ***!
  \***********************/
/*! exports provided: npy_serialize, npy_serialize_gen, npy_deserialize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"npy_serialize\", function() { return npy_serialize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"npy_serialize_gen\", function() { return npy_serialize_gen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"npy_deserialize\", function() { return npy_deserialize; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _pyon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pyon */ \"./src/io/pyon.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! . */ \"./src/io/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nvar _marked =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(npy_serialize_gen);\n\n\n\n\n\nvar MAGIC_STRING = \"\\x93NUMPY\";\nfunction npy_serialize(A) {\n  return Uint8Array.from(npy_serialize_gen(A));\n}\nfunction npy_serialize_gen(A) {\n  var dt, header, i, headerLen, _i, _i2;\n\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function npy_serialize_gen$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_4__[\"asarray\"])(A);\n\n          dt = function () {\n            switch (A.dtype) {\n              default:\n                throw new Error(\"nd_to_npy: A.dtype=\".concat(A.dtype, \" not yet supported.\"));\n\n              case 'int32':\n                return 'i4';\n\n              case 'float32':\n                return 'f4';\n\n              case 'float64':\n                return 'f8';\n\n              case 'complex128':\n                return 'c16';\n            }\n          }();\n\n          if (___WEBPACK_IMPORTED_MODULE_5__[\"IS_LITTLE_ENDIAN\"]) dt = '<' + dt;else dt = '>' + dt;\n          header = \"{\\\"descr\\\": \\\"\".concat(dt, \"\\\", \\\"fortran_order\\\": False, \\\"shape\\\": (\").concat(A.shape).concat(A.ndim > 0 ? ',' : '', \")}\"); // MAGIC STRING\n\n          i = 0;\n\n        case 5:\n          if (!(i < MAGIC_STRING.length)) {\n            _context.next = 11;\n            break;\n          }\n\n          _context.next = 8;\n          return MAGIC_STRING.codePointAt(i);\n\n        case 8:\n          i++;\n          _context.next = 5;\n          break;\n\n        case 11:\n          _context.next = 13;\n          return 1;\n\n        case 13:\n          _context.next = 15;\n          return 0;\n\n        case 15:\n          headerLen = header.length + 11 + 63 >>> 6 << 6;\n\n          if (!(headerLen > 0xFFFF)) {\n            _context.next = 18;\n            break;\n          }\n\n          throw new Error('nd_to_npy: Header too large.');\n\n        case 18:\n          _context.next = 20;\n          return headerLen - 10 >>> 0 & 255;\n\n        case 20:\n          _context.next = 22;\n          return headerLen - 10 >>> 8 & 255;\n\n        case 22:\n          if (!(headerLen % 64 !== 0)) {\n            _context.next = 24;\n            break;\n          }\n\n          throw new Error('Assertion failed.');\n\n        case 24:\n          _i = 0;\n\n        case 25:\n          if (!(_i < header.length)) {\n            _context.next = 31;\n            break;\n          }\n\n          _context.next = 28;\n          return header.codePointAt(_i);\n\n        case 28:\n          _i++;\n          _context.next = 25;\n          break;\n\n        case 31:\n          _i2 = header.length + 11;\n\n        case 32:\n          if (!(_i2 < headerLen)) {\n            _context.next = 38;\n            break;\n          }\n\n          _context.next = 35;\n          return ' '.codePointAt(0);\n\n        case 35:\n          _i2++;\n          _context.next = 32;\n          break;\n\n        case 38:\n          _context.next = 40;\n          return '\\n'.codePointAt(0);\n\n        case 40:\n          return _context.delegateYield(new Uint8Array(A.data.buffer, A.data.byteOffset, A.data.byteLength), \"t0\", 41);\n\n        case 41:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\nfunction npy_deserialize(npy_bytes) {\n  var _result;\n\n  var nRead = 0;\n\n  var next = function () {\n    var iter = npy_bytes[Symbol.iterator]();\n    return function () {\n      var _iter$next = iter.next(),\n          value = _iter$next.value,\n          done = _iter$next.done;\n\n      ++nRead;\n      if (done) throw new Error('npy_to_nd: byte sequence ended unexpectedly.');\n      return value;\n    };\n  }();\n\n  npy_bytes = undefined;\n  var magic_str = '';\n\n  while (magic_str.length < 6) {\n    magic_str += String.fromCodePoint(next());\n  }\n\n  if (magic_str !== MAGIC_STRING) throw new Error(\"npy_to_nd: byte sequence does not start with '\\x93NUMPY'.\");\n  var version = \"\".concat(next(), \".\").concat(next());\n\n  switch (version) {\n    default:\n      throw new Error(\"npy_bytes: npy-file version \".concat(version, \" not supported.\"));\n\n    case '1.0':\n    case '2.0':\n  }\n\n  var header = function () {\n    var headerLen = next() * (1 << 0) + next() * (1 << 8);\n\n    if (version === '2.0') {\n      headerLen += next() * (1 << 16) + next() * (1 << 24);\n    }\n\n    if (headerLen < 0) throw new Error('Assertion failed.');\n    return Object(_pyon__WEBPACK_IMPORTED_MODULE_2__[\"pyon_parse\"])(\n    /*#__PURE__*/\n    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(headerLen-- > 0)) {\n                _context2.next = 5;\n                break;\n              }\n\n              _context2.next = 3;\n              return String.fromCodePoint(next());\n\n            case 3:\n              _context2.next = 0;\n              break;\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee, this);\n    })());\n  }();\n\n  var LE = function () {\n    switch (header.descr[0]) {\n      default:\n        throw new Error(\"npy_to_nd: dtype '\".concat(header.descr, \"' not yet supported.\"));\n\n      case '<':\n        return true;\n\n      case '>':\n        return false;\n    }\n  }();\n\n  var dtype = function () {\n    switch (header.descr.slice(1)) {\n      default:\n        throw new Error(\"npy_to_nd: dtype '\".concat(header.descr, \"' not yet supported.\"));\n\n      case 'i4':\n        return 'int32';\n\n      case 'f4':\n        return 'float32';\n\n      case 'f8':\n        return 'float64';\n\n      case 'c16':\n        return 'complex128';\n    }\n  }();\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][dtype];\n  var data = Uint8Array.from({\n    length: header.shape.reduce(function (m, n) {\n      return m * n;\n    }, DTypeArray.BYTES_PER_ELEMENT)\n  }, next);\n\n  if (LE !== ___WEBPACK_IMPORTED_MODULE_5__[\"IS_LITTLE_ENDIAN\"]) {\n    var wordLen = DTypeArray.BYTES_PER_ELEMENT >>> dtype.startsWith('complex');\n\n    for (var off = 0; off < data.length; off += wordLen) {\n      for (var i = off, j = off + wordLen; i < --j; i++) {\n        var data_i = data[i];\n        data[i] = data[j];\n        data[j] = data_i;\n      }\n    }\n  }\n\n  var shape = Int32Array.from(header.shape);\n  if (header.fortran_order) shape.reverse();\n  var result = new _nd_array__WEBPACK_IMPORTED_MODULE_4__[\"NDArray\"](shape, new DTypeArray(data.buffer));\n  if (header.fortran_order && result.ndim > 1) result = (_result = result).transpose.apply(_result, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(\n  /*#__PURE__*/\n  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {\n    var _i3;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _i3 = result.ndim;\n\n          case 1:\n            if (!(_i3-- > 0)) {\n              _context3.next = 6;\n              break;\n            }\n\n            _context3.next = 4;\n            return _i3;\n\n          case 4:\n            _context3.next = 1;\n            break;\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee2, this);\n  })()));\n  return result;\n}\n\n//# sourceURL=webpack://nd/./src/io/npy.js?");

/***/ }),

/***/ "./src/io/pyon.js":
/*!************************!*\
  !*** ./src/io/pyon.js ***!
  \************************/
/*! exports provided: pyon_parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pyon_parse\", function() { return pyon_parse; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nfunction pyon_parse(char_seq) {\n  // next: returns the next character\n  // skip: returns the next non-whitespace character\n  var _ref = function () {\n    var end = false,\n        counter = 0;\n\n    var iter = char_seq[Symbol.iterator](),\n        next = function next() {\n      var _iter$next = iter.next(),\n          value = _iter$next.value,\n          done = _iter$next.done;\n\n      ++counter;\n\n      if (done) {\n        if (end) throw new Error('pyon_parse: Character sequence ended unexpectedly.');\n        end = true;\n        return null;\n      }\n\n      return value;\n    },\n        skip = function skip() {\n      for (var _char;;) {\n        switch (_char = next()) {\n          default:\n            return _char;\n\n          case '\\f':\n          case '\\n':\n          case '\\r':\n          case '\\t':\n          case '\\v':\n          case ' ':\n        }\n      }\n    },\n        err = function err(encountered, expected) {\n      var prefix = expected == null ? 'Invalid character' : \"Expected \".concat(expected, \", but \");\n      throw new Error(\"pyon_parse: \".concat(prefix, \" '\").concat(encountered, \"' encountered as \").concat(counter, \"-th character.\"));\n    };\n\n    return [next, skip, err];\n  }(),\n      _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref, 3),\n      next = _ref2[0],\n      skip = _ref2[1],\n      err = _ref2[2];\n\n  function any() {\n    switch (char) {\n      default:\n        err(char);\n\n      case '{':\n        return dict();\n\n      case '\"':\n      case \"'\":\n        return str();\n\n      case '(':\n      case '[':\n        return list();\n\n      case 'T':\n        return True();\n\n      case 'F':\n        return False();\n\n      case 'N':\n        return None();\n\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '.':\n      case '8':\n      case '+':\n      case '9':\n      case '-':\n        return num();\n    }\n  }\n\n  function num() {\n    var num = '';\n\n    loop: for (;; char = next()) {\n      switch (char) {\n        case '\\f':\n        case '\\n':\n        case '\\r':\n        case '\\t':\n        case '\\v':\n        case ' ':\n          char = skip();\n\n        default:\n          break loop;\n\n        case '0':\n        case '1':\n        case '2':\n        case '3':\n        case 'a':\n        case 'A':\n        case '4':\n        case 'b':\n        case 'B':\n        case '5':\n        case 'c':\n        case 'C':\n        case '6':\n        case 'd':\n        case 'D':\n        case '7':\n        case 'e':\n        case 'E':\n        case '.':\n        case '8':\n        case 'f':\n        case 'F':\n        case '+':\n        case '9':\n        case 'e':\n        case 'E':\n        case '-':\n          num += char;\n      }\n    }\n\n    num = num.trim() * 1;\n    if (isNaN(num)) err(num);\n    return num;\n  }\n\n  function dict() {\n    var result = {};\n    if ('{' !== char) throw new Error('Assertion failed.');\n\n    for (;;) {\n      if ('}' === (char = skip())) {\n        char = skip();\n        return result;\n      }\n\n      var key = any();\n      if (':' !== char) err(char, end);\n      char = skip();\n      result[key] = any();\n\n      switch (char) {\n        default:\n          err(char, \",' or '}\");\n\n        case ',':\n          continue;\n\n        case '}':\n          char = skip();\n          return result;\n      }\n    }\n  }\n\n  function list() {\n    var end = function () {\n      switch (char) {\n        case '(':\n          return ')';\n\n        case '[':\n          return ']';\n\n        default:\n          throw new Error('Assertion failed.');\n      }\n    }();\n\n    var result = [];\n\n    for (;;) {\n      switch (char = skip()) {\n        case end:\n          char = skip();\n          return result;\n\n        default:\n      }\n\n      result.push(any());\n\n      switch (char) {\n        default:\n          err(char, \",' or '\".concat(end));\n\n        case ',':\n          continue;\n\n        case end:\n          char = skip();\n          return result;\n      }\n    }\n  }\n\n  function True() {\n    if ('T' !== char) throw new Error('Assertion failed.');\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = 'rue'[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var c = _step.value;\n        char = next();\n        if (c !== char) err(char, c);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return != null) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    char = skip();\n    return true;\n  }\n\n  function False() {\n    if ('F' !== char) throw new Error('Assertion failed.');\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = 'alse'[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var c = _step2.value;\n        char = next();\n        if (c !== char) err(char, c);\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    char = skip();\n    return false;\n  }\n\n  function str() {\n    var END = char;\n\n    switch (END) {\n      default:\n        throw new Error('Assertion failed.');\n\n      case \"'\":\n      case '\"':\n    }\n\n    var result = '';\n\n    for (;;) {\n      switch (char = next()) {\n        case END:\n          char = skip();\n          return result;\n\n        case '\\\\':\n          switch (char = next()) {\n            case 'u':\n              var codePoint = 0;\n\n              for (var i = 0; i < 4; i++) {\n                codePoint <<= 8;\n\n                switch (char = next()) {\n                  default:\n                    err(char, 'Hexadecimal digit');\n\n                  case 'f':\n                  case 'F':\n                    ++codePoint;\n\n                  case 'e':\n                  case 'E':\n                    ++codePoint;\n\n                  case 'd':\n                  case 'D':\n                    ++codePoint;\n\n                  case 'c':\n                  case 'C':\n                    ++codePoint;\n\n                  case 'b':\n                  case 'B':\n                    ++codePoint;\n\n                  case 'a':\n                  case 'A':\n                    ++codePoint;\n\n                  case '9':\n                    ++codePoint;\n\n                  case '8':\n                    ++codePoint;\n\n                  case '7':\n                    ++codePoint;\n\n                  case '6':\n                    ++codePoint;\n\n                  case '5':\n                    ++codePoint;\n\n                  case '4':\n                    ++codePoint;\n\n                  case '3':\n                    ++codePoint;\n\n                  case '2':\n                    ++codePoint;\n\n                  case '1':\n                    ++codePoint;\n\n                  case '0':\n                    ++codePoint;\n                }\n              }\n\n              result += String.fromCodePoint(codePoint);\n              continue;\n\n            case 'b':\n              result += '\\b';\n              continue;\n\n            case 'f':\n              result += '\\f';\n              continue;\n\n            case 'n':\n              result += '\\n';\n              continue;\n\n            case 'r':\n              result += '\\r';\n              continue;\n\n            case 't':\n              result += '\\t';\n              continue;\n\n            case '\"':\n            case \"'\":\n            case \"\\\\\": // FALL THROUGH\n\n          }\n\n        default:\n          result += char;\n      }\n    }\n  }\n\n  function None() {\n    if ('N' !== char) throw new Error('Assertion failed.');\n    var _iteratorNormalCompletion3 = true;\n    var _didIteratorError3 = false;\n    var _iteratorError3 = undefined;\n\n    try {\n      for (var _iterator3 = 'one'[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n        var c = _step3.value;\n        char = next();\n        if (c !== char) err(char, c);\n      }\n    } catch (err) {\n      _didIteratorError3 = true;\n      _iteratorError3 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n          _iterator3.return();\n        }\n      } finally {\n        if (_didIteratorError3) {\n          throw _iteratorError3;\n        }\n      }\n    }\n\n    char = skip();\n    return null;\n  }\n\n  var char = skip();\n  return any();\n}\n\n//# sourceURL=webpack://nd/./src/io/pyon.js?");

/***/ }),

/***/ "./src/la/bidiag.js":
/*!**************************!*\
  !*** ./src/la/bidiag.js ***!
  \**************************/
/*! exports provided: bidiag_decomp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"bidiag_decomp\", function() { return bidiag_decomp; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction bidiag_decomp(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('A must be at least 2D.');\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      U_shape = Int32Array.from(A.shape),\n      B_shape = Int32Array.from(U_shape),\n      V_shape = Int32Array.from(U_shape),\n      _A$shape$slice = A.shape.slice(-2),\n      _A$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice, 2),\n      N = _A$shape$slice2[0],\n      M = _A$shape$slice2[1],\n      len = A.shape.slice(0, -2).reduce(function (a, b) {\n    return a * b;\n  }, 1),\n      I = Math.min(N, M),\n      J = N >= M ? I : I + 1; // #columns of bidiag. matrix B\n\n\n  U_shape[U_shape.length - 1] = I;\n  B_shape[B_shape.length - 2] = I;\n  B_shape[B_shape.length - 1] = J;\n  V_shape[V_shape.length - 2] = J;\n  var U, V; // copy A to U or V, whichever is large enough\n\n  if (N >= M) {\n    U = DTypeArray.from(A.data);\n    A = U;\n    V = new DTypeArray(len * M * M);\n  } else {\n    V = new DTypeArray(len * (N + 1) * M);\n    A = A.data;\n\n    for (var i = A.length, j = V.length; i-- > 0;) {\n      V[--j] = A[i];\n    }\n\n    A = V;\n    U = new DTypeArray(len * N * N);\n  }\n\n  var B = new DTypeArray(len * I * J),\n      //<- resulting bidiagonal matrix\n  csU = new DTypeArray(I * (N - 1 + N - I)),\n      //<- caches ALL row    rotations later used to compute U\n  csV = new DTypeArray(N < M ? I * (M - 2 + M - I - 1) : (I - 1) * (M - 2)),\n      //<- caches ALL column rotations later used to compute V\n  uv = new DTypeArray(Math.max(N - I, M)); //<- cached remainder of a row of U or a column of V to compute U/V\n\n  for (var A_off = N >= M ? 0 : len * M, U_off = 0, B_off = 0, V_off = 0; B_off < B.length; A_off += N * M, U_off += N * I, B_off += I * J, V_off += J * M) {\n    var csiU = 0,\n        csiV = 0;\n\n    for (var _i = 0; _i < I; _i++) {\n      // ELIMINATE THE ELEMENTS IN (i+1)-th COLUMN BELOW DIAG (IN B)\n      for (var _j = _i + 1; _j < N; _j++) {\n        var A_ji = A[A_off + M * _j + _i];\n\n        if (0.0 == A_ji) {\n          csU[csiU++] = 1;\n          csU[csiU++] = 0;\n          continue;\n        }\n\n        var A_ii = A[A_off + M * _i + _i],\n            norm = Math.hypot(A_ii, A_ji),\n            c = A_ii / norm,\n            s = A_ji / norm;\n        A[A_off + M * _i + _i] = norm;\n        A[A_off + M * _j + _i] = 0; // ROTATE ROWS IN A\n\n        for (var k = _i; ++k < M;) {\n          var ik = A_off + M * _i + k,\n              A_ik = A[ik],\n              jk = A_off + M * _j + k,\n              A_jk = A[jk];\n          A[ik] = A_jk * s + A_ik * c;\n          A[jk] = A_jk * c - A_ik * s;\n        }\n\n        csU[csiU++] = c;\n        csU[csiU++] = s;\n      }\n\n      if (_i + 3 > M) continue; // ELIMINATE (i+1)-th ROW RIGHT OF BIDIAG\n\n      for (var _j2 = _i + 2; _j2 < M; _j2++) {\n        var ii = A_off + M * _i + (_i + 1),\n            _A_ii = A[ii],\n            ij = A_off + M * _i + _j2,\n            A_ij = A[ij],\n            _norm = Math.hypot(_A_ii, A_ij);\n\n        A[ii] = _norm;\n        A[ij] = 0;\n        csV[csiV++] = _norm == 0 ? 1 : _A_ii / _norm;\n        csV[csiV++] = _norm == 0 ? 0 : A_ij / _norm;\n      } // APPLY ABOVE ELIMINATION TO REMAINING ROWS RIGHT OF BIDIAG (ROW-BY-ROW IMPROVES CACHE LOCALITY)\n\n\n      for (var _k = _i + 1; _k < N; _k++) {\n        csiV -= 2 * (M - _i - 2);\n\n        for (var _j3 = _i + 2; _j3 < M; _j3++) {\n          var _c = csV[csiV++],\n              _s = csV[csiV++],\n              ki = A_off + M * _k + (_i + 1),\n              A_ki = A[ki],\n              kj = A_off + M * _k + _j3,\n              A_kj = A[kj];\n          A[ki] = A_kj * _s + A_ki * _c;\n          A[kj] = A_kj * _c - A_ki * _s;\n        }\n      }\n    }\n\n    if (csiU != csU.length) throw new Error('Assertion failed: (csiU=' + csiU + \") != (csU.length=\" + csU.length + \")\");\n    if (csiV != csV.length) throw new Error('Assertion failed: (csiV=' + csiV + \") != (csV.length=\" + csV.length + \")\"); // MOVE A -> B\n\n    for (var _i2 = 0; _i2 < I; _i2++) {\n      for (var _j4 = 0; _j4 < J; _j4++) {\n        B[B_off + J * _i2 + _j4] = A[A_off + M * _i2 + _j4];\n      }\n    } //\n    // COMPUTE U\n    //\n    // ROTATE U\n\n\n    for (var _k2 = 0; _k2 < N; _k2++) {\n      csiU = 0;\n\n      for (var _i3 = 0; _i3 < N - I; _i3++) {\n        uv[_i3] = _k2 != _i3 + I ? 0.0 : 1.0;\n      }\n\n      for (var _i4 = 0; _i4 < I; _i4++) {\n        U[U_off + I * _k2 + _i4] = _k2 != _i4 ? 0.0 : 1.0;\n      }\n\n      for (var _i5 = 0; _i5 < I; _i5++) {\n        var skip = Math.max(1, _k2 - _i5);\n        csiU += 2 * (skip - 1);\n\n        for (var _j5 = _i5 + skip; _j5 < I; _j5++) {\n          var _c2 = csU[csiU++],\n              _s2 = csU[csiU++],\n              _ki = U_off + I * _k2 + _i5,\n              U_ki = U[_ki],\n              _kj = U_off + I * _k2 + _j5,\n              U_kj = U[_kj];\n\n          U[_ki] = U_kj * _s2 + U_ki * _c2;\n          U[_kj] = U_kj * _c2 - U_ki * _s2;\n        }\n\n        for (var _j6 = Math.max(0, _i5 + skip - I); _j6 < N - I; _j6++) {\n          var _c3 = csU[csiU++],\n              _s3 = csU[csiU++],\n              _ki2 = U_off + I * _k2 + _i5,\n              _U_ki = U[_ki2];\n\n          U[_ki2] = uv[_j6] * _s3 + _U_ki * _c3;\n          uv[_j6] = uv[_j6] * _c3 - _U_ki * _s3;\n        }\n      }\n    } //\n    // COMPUTE V\n    //\n    // ROTATE V\n\n\n    for (var _k3 = 0; _k3 < M; _k3++) {\n      csiV = 0; // uv CACHES (k+1)-th COLUMN OF V\n\n      uv.fill(0.0, 0, M);\n      uv[_k3] = 1;\n\n      for (var _i6 = 0; _i6 < I; _i6++) {\n        var _skip = Math.max(2, _k3 - _i6);\n\n        csiV += 2 * (_skip - 2);\n\n        for (var _j7 = _i6 + _skip; _j7 < M; _j7++) {\n          var _c4 = csV[csiV++],\n              _s4 = csV[csiV++],\n              v_i = uv[_i6 + 1],\n              v_j = uv[_j7];\n          uv[_i6 + 1] = v_j * _s4 + v_i * _c4;\n          uv[_j7] = v_j * _c4 - v_i * _s4;\n        }\n      } // WRITE (k+1)-th COLUMN\n\n\n      for (var _i7 = 0; _i7 < J; _i7++) {\n        V[V_off + M * _i7 + _k3] = uv[_i7];\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](U_shape, U), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](B_shape, B), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](V_shape, V)];\n}\n\n//# sourceURL=webpack://nd/./src/la/bidiag.js?");

/***/ }),

/***/ "./src/la/cholesky.js":
/*!****************************!*\
  !*** ./src/la/cholesky.js ***!
  \****************************/
/*! exports provided: cholesky_decomp, cholesky_solve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cholesky_decomp\", function() { return cholesky_decomp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cholesky_solve\", function() { return cholesky_solve; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction cholesky_decomp(S) {\n  S = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(S);\n\n  var dtype = S.dtype === 'float32' ? 'float32' : 'float64',\n      shape = S.shape,\n      _shape$slice = shape.slice(-2),\n      _shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_shape$slice, 2),\n      N = _shape$slice2[0],\n      M = _shape$slice2[1],\n      L = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][dtype].from(S.data);\n\n  S = undefined;\n  if (N != M) throw new Error('Last two dimensions must be quadratic.');\n\n  for (var off = 0; off < L.length; off += N * N) {\n    // https://de.wikipedia.org/wiki/Cholesky-Zerlegung\n    for (var i = 0; i < N; i++) {\n      for (var j = 0; j < N; j++) {\n        if (i < j) {\n          L[off + N * i + j] = 0;\n        } else {\n          var sum = L[off + N * i + j],\n              cor = 0.0;\n\n          for (var k = 0; k < j; k++) {\n            // https://en.wikipedia.org/wiki/Kahan_summation_algorithm\n            var r = cor + L[off + N * i + k] * L[off + N * j + k],\n                s = sum - r;\n            cor = s - sum + r;\n            sum = s;\n          }\n\n          if (i > j) L[off + N * i + j] = sum / L[off + N * j + j];else {\n            L[off + N * i + i] = Math.sqrt(sum);\n            if (isNaN(L[off + N * i + i])) throw new Error('Matrix contains NaNs or is (near) singular.');\n          }\n        }\n      }\n    }\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, L);\n}\nfunction cholesky_solve(L, y) {\n  L = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(L);\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(y);\n  if (L.ndim < 2) throw new Error('L must be at least 2D.');\n  if (y.ndim < 2) throw new Error('y must be at least 2D.');\n\n  var _L$shape$slice = L.shape.slice(-2),\n      _L$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_L$shape$slice, 2),\n      N = _L$shape$slice2[0],\n      M = _L$shape$slice2[1],\n      _y$shape$slice = y.shape.slice(-2),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 2),\n      I = _y$shape$slice2[0],\n      J = _y$shape$slice2[1];\n\n  if (N != M) throw new Error('Last two dimensions of L must be quadratic.');\n  if (I != M) throw new Error(\"L and y don't match.\");\n  var ndim = Math.max(L.ndim, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [L, y];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var arr = _arr[_i];\n\n    for (var i = ndim - 2, j = arr.ndim - 2; i-- > 0 && j-- > 0;) {\n      if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n    }\n  } // GENERATE RESULT DATA\n\n\n  var dtype = L.dtype === 'float32' && y.dtype === 'float32' ? 'float32' : 'float64',\n      x_dat = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  }, 1)),\n      L_dat = L.data,\n      y_dat = y.data;\n  var L_off = 0,\n      L_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      L_stride = N * N;\n      y_stride = N * J; // COPYING y\n\n      for (var i = 0; i < y_stride; i++) {\n        x_dat[x_off + i] = y_dat[y_off + i];\n      } // FORWARD SUBSTITUTION\n\n\n      for (var _i2 = 0; _i2 < I; _i2++) {\n        for (var j = 0; j < J; j++) {\n          for (var k = 0; k < _i2; k++) {\n            x_dat[x_off + _i2 * J + j] -= L_dat[L_off + N * _i2 + k] * x_dat[x_off + k * J + j];\n          }\n\n          x_dat[x_off + _i2 * J + j] /= L_dat[L_off + N * _i2 + _i2];\n        }\n      } // BACKWARD SUBSTITUTION\n\n\n      for (var _i3 = I; _i3-- > 0;) {\n        for (var _j = J; _j-- > 0;) {\n          x_dat[x_off + _i3 * J + _j] /= L_dat[L_off + N * _i3 + _i3];\n\n          for (var _k = _i3; _k-- > 0;) {\n            x_dat[x_off + _k * J + _j] -= L_dat[L_off + N * _i3 + _k] * x_dat[x_off + _i3 * J + _j];\n          }\n        }\n      }\n\n      L_off += L_stride;\n      y_off += y_stride;\n      x_off += y_stride;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(L.shape[d - ndim + L.ndim] > 1)) L_off -= L_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    L_stride *= L.shape[d - ndim + L.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, x_dat);\n}\n\n//# sourceURL=webpack://nd/./src/la/cholesky.js?");

/***/ }),

/***/ "./src/la/diag.js":
/*!************************!*\
  !*** ./src/la/diag.js ***!
  \************************/
/*! exports provided: diag_mat, diag */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"diag_mat\", function() { return diag_mat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"diag\", function() { return diag; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nfunction diag_mat(diag) {\n  if (diag.ndim < 1) throw new Error(\"diag_mat(diag): diag.ndim=\".concat(diag.ndim, \" is less than 1.\"));\n  diag = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(diag);\n  var shape = diag.shape,\n      N = shape[shape.length - 1],\n      d = diag.data,\n      D = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][diag.dtype].from({\n    length: shape.reduce(function (a, b) {\n      return a * b;\n    }) * N\n  }, function () {\n    return 0;\n  });\n  diag = undefined;\n  if (shape.length < 1) throw new Error('diag_mat(diag): diag must be at least 1d.');\n  if (N <= 0) throw new Error('Assertion Failed!');\n\n  for (var d_off = 0, D_off = 0;;) {\n    var d_end = d_off + N;\n\n    while (true) {\n      D[D_off] = d[d_off];\n      if (++d_off === d_end) break;\n      D_off += N + 1;\n    }\n\n    if (++D_off == D.length) break;\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](Int32Array.of.apply(Int32Array, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(shape).concat([N])), D);\n}\nfunction diag(A) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  if (A.ndim < 2) throw new Error(\"diag(A, offset): A.ndim=\".concat(A.ndim, \" is less than 2.\"));\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A);\n\n  var _A$shape$slice = A.shape.slice(-2),\n      _A$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice, 2),\n      N = _A$shape$slice2[0],\n      M = _A$shape$slice2[1],\n      shape = A.shape.slice(0, -1),\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][A.dtype];\n\n  A = A.data;\n  if (!(offset > -N && offset < +M)) throw new Error(\"diag(A, offset): offset=\".concat(offset, \" out of A.shape=[\").concat(A.shape, \"].\"));\n  var L = Math.min(N, N + offset, M, M - offset);\n  shape[shape.length - 1] = L;\n  var d = new DTypeArray(shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      a_off = Math.max(0, offset, -offset * M);\n\n  for (var d_off = 0, A_off = 0; A_off < A.length; d_off += L, A_off += N * M) {\n    for (var i = 0; i < L; i++) {\n      d[d_off + i] = A[A_off + a_off + M * i + i];\n    }\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, d);\n}\n\n//# sourceURL=webpack://nd/./src/la/diag.js?");

/***/ }),

/***/ "./src/la/eigen.js":
/*!*************************!*\
  !*** ./src/la/eigen.js ***!
  \*************************/
/*! exports provided: eigen, eigenvals, eigen_balance_pre, eigen_balance_post */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eigen\", function() { return eigen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eigenvals\", function() { return eigenvals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eigen_balance_pre\", function() { return eigen_balance_pre; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eigen_balance_post\", function() { return eigen_balance_post; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _schur__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schur */ \"./src/la/schur.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _zip_elems__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../zip_elems */ \"./src/zip_elems.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\nfunction eigen(A) {\n  var _eigen_balance_pre = eigen_balance_pre(A, 2),\n      _eigen_balance_pre2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_eigen_balance_pre, 2),\n      D = _eigen_balance_pre2[0],\n      B = _eigen_balance_pre2[1],\n      _schur_decomp = Object(_schur__WEBPACK_IMPORTED_MODULE_2__[\"schur_decomp\"])(B),\n      _schur_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_schur_decomp, 2),\n      Q = _schur_decomp2[0],\n      T = _schur_decomp2[1],\n      _schur_eigen = Object(_schur__WEBPACK_IMPORTED_MODULE_2__[\"schur_eigen\"])(Q, T),\n      _schur_eigen2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_schur_eigen, 2),\n      Λ = _schur_eigen2[0],\n      V = _schur_eigen2[1];\n\n  if (!V.dtype.startsWith('complex')) throw new Error('Assertion failed.');\n  if (!D.dtype.startsWith('float')) throw new Error('Assertion failed.');\n  var N = A.shape[A.ndim - 1],\n      norm_sum = new Float64Array(N),\n      norm_max = new Float64Array(N),\n      V_dat = V.data._array,\n      D_dat = D.data; // UNDO BALANCING\n\n  for (var D_off = 0, V_off = 0; V_off < V_dat.length; D_off += N, V_off += 2 * N * N) {\n    norm_sum.fill(0);\n    norm_max.fill(0); // SCALE ROWS & COMPUTE SCALED COLUMN NORMS\n\n    for (var i = 0; i < N; i++) {\n      var D_i = D_dat[D_off + i];\n\n      for (var j = 0; j < 2 * N; j++) {\n        // scale row\n        var V_ij = Math.abs(V_dat[V_off + 2 * N * i + j] *= D_i); // update norm\n\n        if (V_ij > 0) {\n          var k = j >> 1;\n\n          if (V_ij > norm_max[k]) {\n            norm_sum[k] *= Math.pow(norm_max[k] / V_ij, 2);\n            norm_max[k] = V_ij;\n          }\n\n          norm_sum[k] += Math.pow(V_ij / norm_max[k], 2);\n        }\n      }\n    }\n\n    for (var _j = 0; _j < N; _j++) {\n      var max = norm_max[_j];\n      norm_sum[_j] = isFinite(max) ? Math.sqrt(norm_sum[_j]) * max : max;\n    } // NORMALIZE COLUMNS\n\n\n    for (var _i = 0; _i < N; _i++) {\n      for (var _j2 = 0; _j2 < 2 * N; _j2++) {\n        V_dat[V_off + 2 * N * _i + _j2] /= norm_sum[_j2 >> 1];\n      }\n    }\n  }\n\n  return [Λ, V];\n}\nfunction eigenvals(A) {\n  var _eigen_balance_pre3 = eigen_balance_pre(A, 2),\n      _eigen_balance_pre4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_eigen_balance_pre3, 2),\n      D = _eigen_balance_pre4[0],\n      B = _eigen_balance_pre4[1],\n      _schur_decomp3 = Object(_schur__WEBPACK_IMPORTED_MODULE_2__[\"schur_decomp\"])(B),\n      _schur_decomp4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_schur_decomp3, 2),\n      Q = _schur_decomp4[0],\n      T = _schur_decomp4[1];\n\n  return Object(_schur__WEBPACK_IMPORTED_MODULE_2__[\"schur_eigenvals\"])(T);\n}\nfunction eigen_balance_pre(A, p) {\n  // SEE: RODNEY JAMES, JULIEN LANGOU, AND BRADLEY R. LOWERY,\n  //      \"ON MATRIX BALANCING AND EIGENVECTOR COMPUTATION\"\n  if (p == null) p = 2;\n  if (p > Number.MAX_VALUE) return eigen_balance_pre_inf(A);\n  var N = A.shape[A.ndim - 1],\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_4__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      A_shape = A.shape,\n      D_shape = A_shape.slice(0, -1);\n  if (!(p >= 1)) throw new Error(\"Invalid norm p=\".concat(p, \";\"));\n  if (A.shape[A.ndim - 2] != N) throw new Error('A is not square');\n  A = DTypeArray.from(A.data); // <- protection copy\n\n  var D = new DTypeArray(A.length / N),\n      TOL = Math.pow(0.95, 1 / p);\n  D.fill(1.0);\n\n  for (var A_off = A.length, D_off = D.length; A_off > 0;) {\n    A_off -= N * N;\n    D_off -= N;\n\n    for (var i, done = false; !done;) {\n      for (i = 0, done = true; i < N; i++) {\n        var c = 0.0,\n            c_max = 0.0,\n            r = 0.0,\n            r_max = 0.0; // COMPUTE ROW AND COLUMN NORM\n\n        for (var j = 0; j < N; j++) {\n          //        if(true)\n          if (i !== j) {\n            {\n              var A_ij = Math.abs(A[A_off + N * i + j]);\n\n              if (A_ij > 0) {\n                if (A_ij > r_max) {\n                  var _scale = r_max / A_ij;\n\n                  r_max = A_ij;\n                  r *= Math.pow(_scale, p);\n                }\n\n                var ratio = A_ij / r_max;\n                r += Math.pow(ratio, p);\n              }\n            }\n            {\n              var A_ji = Math.abs(A[A_off + N * j + i]);\n\n              if (A_ji > 0) {\n                if (A_ji > c_max) {\n                  var _scale2 = c_max / A_ji;\n\n                  c_max = A_ji;\n                  c *= Math.pow(_scale2, p);\n                }\n\n                var _ratio = A_ji / c_max;\n\n                c += Math.pow(_ratio, p);\n              }\n            }\n          }\n        }\n\n        r = !isFinite(r) ? r : Math.pow(r, 1 / p) * r_max;\n        c = !isFinite(c) ? c : Math.pow(c, 1 / p) * c_max;\n        if (r * c == 0.0) continue;\n        if (!isFinite(r * c)) throw new Error('NaN encountered.');\n        var old_norm = c >= r ? Math.pow(1 + Math.pow(r / c, p), 1 / p) * c : Math.pow(1 + Math.pow(c / r, p), 1 / p) * r; // FIND A POWER OF TWO THAT MORE OR LESS BALANCES r AND c\n\n        var scale = 1.0;\n\n        while (r >= c * 2) {\n          c *= 2;\n          r /= 2;\n          scale *= 2;\n        }\n\n        while (c >= r * 2) {\n          c /= 2;\n          r *= 2;\n          scale /= 2;\n        }\n\n        var new_norm = c >= r ? Math.pow(1 + Math.pow(r / c, p), 1 / p) * c : Math.pow(1 + Math.pow(c / r, p), 1 / p) * r;\n        if (new_norm >= TOL * old_norm) continue;\n        done = false;\n        D[D_off + i] *= scale;\n\n        for (var _j3 = 0; _j3 < N; _j3++) {\n          A[A_off + N * i + _j3] /= scale;\n          A[A_off + N * _j3 + i] *= scale;\n        }\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](D_shape, D), new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](A_shape, A)];\n}\n\nfunction eigen_balance_pre_inf(A) {\n  // SEE: RODNEY JAMES, JULIEN LANGOU, AND BRADLEY R. LOWERY,\n  //      \"ON MATRIX BALANCING AND EIGENVECTOR COMPUTATION\"\n  var N = A.shape[A.ndim - 1],\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_4__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      A_shape = A.shape,\n      D_shape = A_shape.slice(0, -1);\n  if (A.shape[A.ndim - 2] != N) throw new Error('A is not square');\n  A = DTypeArray.from(A.data);\n  var D = new DTypeArray(A.length / N);\n  D.fill(1.0);\n\n  for (var A_off = A.length, D_off = D.length; A_off > 0;) {\n    A_off -= N * N;\n    D_off -= N;\n\n    for (var i, done = false; !done;) {\n      for (i = 0, done = true; i < N; i++) {\n        var c = 0.0,\n            r = 0.0; // COMPUTE ROW AND COLUMN NORM\n\n        for (var j = 0; j < N; j++) {\n          if (i !== j) {\n            var A_ij = Math.abs(A[A_off + N * i + j]);\n            r = Math.max(r, A_ij);\n            var A_ji = Math.abs(A[A_off + N * j + i]);\n            c = Math.max(c, A_ji);\n          }\n        }\n\n        if (r * c === 0.0) continue;\n        var old_norm = Math.max(c, r);\n        if (old_norm == 0.0) continue;\n        if (!isFinite(old_norm)) throw new Error('NaN encountered.'); // FIND A POWER OF TWO THAT MORE OR LESS BALANCES r AND c\n\n        var scale = 1.0;\n\n        while (r >= c * 2) {\n          c *= 2;\n          r /= 2;\n          scale *= 2;\n        }\n\n        while (c >= r * 2) {\n          c /= 2;\n          r *= 2;\n          scale /= 2;\n        }\n\n        var new_norm = Math.max(c, r);\n        if (new_norm >= old_norm) continue;\n        done = false;\n        D[D_off + i] *= scale;\n\n        for (var _j4 = 0; _j4 < N; _j4++) {\n          A[A_off + N * i + _j4] /= scale;\n          A[A_off + N * _j4 + i] *= scale;\n        }\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](D_shape, D), new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](A_shape, A)];\n}\n\nfunction eigen_balance_post(D, V) {\n  if (V.ndim < 2) throw new Error('eigen_balance_post(D,V): V.ndim must be at least 2.');\n\n  var _V$shape$slice = V.shape.slice(-2),\n      _V$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_V$shape$slice, 2),\n      M = _V$shape$slice2[0],\n      N = _V$shape$slice2[1];\n\n  if (M !== N) throw new Error('eigen_balance_post(D,V): V must be square.');\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_4__[\"ARRAY_TYPES\"]['float64'],\n      V_arr = Object(_zip_elems__WEBPACK_IMPORTED_MODULE_5__[\"zip_elems\"])([V, D.reshape.apply(D, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(D.shape).concat([1]))], 'complex128', _math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].mul);\n  V = V_arr.data;\n  var norm_sum = new DTypeArray(N),\n      norm_max = new DTypeArray(N); // NORMALIZE COLUMNS\n\n  for (var off = 0; off < V.length; off += M * N) {\n    norm_sum.fill(0);\n    norm_max.fill(0); // COMPUTE COLUMN NORMS\n\n    for (var i = 0; i < N; i++) {\n      for (var j = 0; j < N; j++) {\n        var V_ij = _math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].abs(V[off + N * i + j]);\n\n        if (V_ij > 0) {\n          if (V_ij > norm_max[j]) {\n            norm_sum[j] *= Math.pow(norm_max[j] / V_ij, 2);\n            norm_max[j] = V_ij;\n          }\n\n          norm_sum[j] += Math.pow(V_ij / norm_max[j], 2);\n        }\n      }\n    }\n\n    for (var _j5 = 0; _j5 < N; _j5++) {\n      var max = norm_max[_j5];\n      norm_sum[_j5] = isFinite(max) ? Math.sqrt(norm_sum[_j5]) * max : max;\n    } // NORMALIZE COLUMNS\n\n\n    for (var _i2 = 0; _i2 < N; _i2++) {\n      for (var _j6 = 0; _j6 < N; _j6++) {\n        V[off + N * _i2 + _j6] = _math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].div(V[off + N * _i2 + _j6], norm_sum[_j6]);\n      }\n    }\n  }\n\n  return V_arr;\n}\n\n//# sourceURL=webpack://nd/./src/la/eigen.js?");

/***/ }),

/***/ "./src/la/eye.js":
/*!***********************!*\
  !*** ./src/la/eye.js ***!
  \***********************/
/*! exports provided: eye */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eye\", function() { return eye; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction eye() {\n  for (var _len = arguments.length, shape = new Array(_len), _key = 0; _key < _len; _key++) {\n    shape[_key] = arguments[_key];\n  }\n\n  var dtype = shape[0] in _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"] ? shape.shift() : 'float64';\n  if (shape.length < 1) throw new Error('Size parameter missing.');\n  if (shape.length == 1) shape.push(shape[shape.length - 1]);\n  shape = Int32Array.from(shape, function (s) {\n    if (0 !== s % 1) throw new Error(\"eye(): Invalid shape [\".concat(shape, \"].\"));\n    return s;\n  });\n\n  var I = new _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (m, n) {\n    return m * n;\n  })),\n      _shape$slice = shape.slice(-2),\n      _shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_shape$slice, 2),\n      M = _shape$slice2[0],\n      N = _shape$slice2[1];\n\n  for (var off = I.length; (off -= M * N) >= 0;) {\n    for (var i = Math.min(M, N); i-- > 0;) {\n      I[off + N * i + i] = 1;\n    }\n  }\n\n  var result = new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, I);\n  return result;\n}\n\n//# sourceURL=webpack://nd/./src/la/eye.js?");

/***/ }),

/***/ "./src/la/hessenberg.js":
/*!******************************!*\
  !*** ./src/la/hessenberg.js ***!
  \******************************/
/*! exports provided: hessenberg_decomp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"hessenberg_decomp\", function() { return hessenberg_decomp; });\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction hessenberg_decomp(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_0__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('A must be at least 2D.');\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      // <- ensure at least double precision\n  shape = A.shape,\n      N = shape[shape.length - 1],\n      w = new DTypeArray(N - 1),\n      tmp = new DTypeArray(N);\n  if (N != shape[shape.length - 2]) throw new Error('A is not square.');\n  var H = DTypeArray.from(A.data);\n  A = undefined;\n  var U = new DTypeArray(H.length);\n\n  for (var off = 0; off < H.length; off += N * N) {\n    // INIT P TO IDENTITY\n    for (var i = 0; i < N; i++) {\n      U[off + N * i + i] = 1.0;\n    } // ELIMINATION BEGIN\n\n\n    for (var _i = N; --_i > 1;) {\n      var row_norm = void 0;\n      {\n        // BEGIN CREATE HOUSEHOLDER VECTOR\n        var norm_sum = 0.0,\n            norm_max = 0.0;\n\n        for (var j = _i; j-- > 0;) {\n          var H_ij = H[off + N * _i + j];\n          w[j] = H_ij;\n          H_ij = Math.abs(H_ij);\n\n          if (H_ij > 0) {\n            if (H_ij > norm_max) {\n              var scale = norm_max / H_ij;\n              norm_max = H_ij;\n              norm_sum *= scale * scale;\n            }\n\n            var ratio = H_ij / norm_max;\n            norm_sum += ratio * ratio;\n          }\n        }\n\n        row_norm = isFinite(norm_max) ? Math.sqrt(norm_sum) * norm_max : norm_max;\n        if (w[_i - 1] > 0) row_norm *= -1; // <- avoid losing signifciance (other people do, so ... I should do it as well) TODO verify usefulness\n\n        w[_i - 1] -= row_norm;\n        norm_sum = 0.0;\n        norm_max = 0.0;\n\n        for (var _j = _i; _j-- > 0;) {\n          var w_j = Math.abs(w[_j]);\n\n          if (w_j > 0) {\n            if (w_j > norm_max) {\n              var _scale = norm_max / w_j;\n\n              norm_max = w_j;\n              norm_sum *= _scale * _scale;\n            }\n\n            var _ratio = w_j / norm_max;\n\n            norm_sum += _ratio * _ratio;\n          }\n        }\n\n        norm_sum = isFinite(norm_max) ? Math.sqrt(norm_sum) * norm_max : norm_max;\n        if (norm_sum == 0) continue;\n\n        for (var _j2 = _i; _j2-- > 0;) {\n          w[_j2] /= norm_sum;\n        }\n      } // END CREATE HOUSEHOLDER VECTOR\n      // APPLY w TO RIGHT OF H\n\n      for (var _j3 = N; _j3-- > 0;) {\n        if (_j3 != _i) {\n          var sum = 0.0;\n\n          for (var k = _i; k-- > 0;) {\n            sum += w[k] * H[off + N * _j3 + k];\n          }\n\n          sum *= 2;\n\n          for (var _k = _i; _k-- > 0;) {\n            H[off + N * _j3 + _k] -= w[_k] * sum;\n          }\n        }\n      }\n\n      H.fill(0.0, off + N * _i + 0, off + N * _i + _i - 1);\n      H[off + N * _i + _i - 1] = row_norm; // APPLY w TO LEFT OF H\n\n      tmp.fill(0.0);\n\n      for (var _j4 = _i; _j4-- > 0;) {\n        for (var _k2 = N; _k2-- > 0;) {\n          tmp[_k2] += w[_j4] * H[off + N * _j4 + _k2];\n        }\n      }\n\n      for (var _j5 = _i; _j5-- > 0;) {\n        for (var _k3 = N; _k3-- > 0;) {\n          H[off + N * _j5 + _k3] -= 2 * w[_j5] * tmp[_k3];\n        }\n      } // APPLY w TO RIGHT OF U\n\n\n      for (var _j6 = N; _j6-- > 0;) {\n        var _sum = 0.0;\n\n        for (var _k4 = _i; _k4-- > 0;) {\n          _sum += w[_k4] * U[off + N * _j6 + _k4];\n        }\n\n        _sum *= 2;\n\n        for (var _k5 = _i; _k5-- > 0;) {\n          U[off + N * _j6 + _k5] -= w[_k5] * _sum;\n        }\n      }\n    } // ELIMINATION END\n\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"](shape, U), new _nd_array__WEBPACK_IMPORTED_MODULE_0__[\"NDArray\"](shape, H)];\n}\n; //la.hessenberg_decomp = A => {\n//  A = nd.asarray(A);\n//  if( A.ndim < 2 ) throw new Error('A must be at least 2D.');\n//  const\n//    DTypeArray = nd.dtypes[ nd.super_dtype(A.dtype,'float64') ], // <- ensure at least double precision\n//    shape = A.shape,\n//    N = shape[shape.length-1];\n//  if( N != shape[shape.length-2] ) throw new Error('A is not square.');\n//\n//  const H = DTypeArray.from(A.data); A = undefined;\n//  const U = new DTypeArray(H.length);\n//\n//  for( let off=0; off < H.length; off += N*N )\n//  { // INIT P TO IDENTITY\n//    for( let i=0; i < N; i++ ) U[off + N*i+i] = 1.0;\n//\n//    // { ELIMINATION BEGIN\n//    for( let i=N-1; --i > 0; )\n//    for( let j=i  ; j-- > 0; )\n//    { // ROTATE COLUMS/ROWS j and i\n//      // determine angle\n//      const H_Ij = H[off + N*(i+1)+j]; if( H_Ij == 0 ) continue;\n//      const H_Ii = H[off + N*(i+1)+i],\n//            norm = Math.hypot(H_Ii,H_Ij),\n//            c = H_Ii / norm,\n//            s = H_Ij / norm;\n//\n//      // rotate columns in H\n//      for( let k=i+2; k-- > 0; )\n//      {\n//        const kj = off + N*k+j, H_kj = H[kj],\n//              ki = off + N*k+i, H_ki = H[ki];\n//        H[kj] = c*H_kj - s*H_ki;\n//        H[ki] = s*H_kj + c*H_ki;\n//      }\n//\n//      // rotate rows in H\n//      for( let k=N; k-- > 0; )\n//      {\n//        const jk = off + N*j+k, H_jk = H[jk],\n//              ik = off + N*i+k, H_ik = H[ik];\n//        H[jk] = c*H_jk - s*H_ik;\n//        H[ik] = s*H_jk + c*H_ik;\n//      }\n//\n//      // rotate rows in U (transposed for cache locality reasons)\n//      for( let k=N; k-- > 0; ) // <- FIXME are there operations to be saved here?\n//      {\n//        const jk = off + N*j+k, U_jk = U[jk],\n//              ik = off + N*i+k, U_ik = U[ik];\n//        U[jk] = c*U_jk - s*U_ik;\n//        U[ik] = s*U_jk + c*U_ik;\n//      }\n//    }\n//    // } ELIMINATION END\n//\n//    // TRANSPOSE U BACK (transposed for cache locality reasons)\n//    for( let i=0; i < N; i++ )\n//    for( let j=0; j < i; j++ ) {\n//      const ij = off + N*i+j,\n//            ji = off + N*j+i, U_ij = U[ij]; U[ij] = U[ji]; U[ji] = U_ij;\n//    }\n//  }\n//\n//  return [\n//    new nd.Array(shape,U),\n//    new nd.Array(shape,H)\n//  ]\n//};\n\n//# sourceURL=webpack://nd/./src/la/hessenberg.js?");

/***/ }),

/***/ "./src/la/index.js":
/*!*************************!*\
  !*** ./src/la/index.js ***!
  \*************************/
/*! exports provided: rrqr_decomp, rrqr_decomp_full, rrqr_rank, rrqr_lstsq, rrqr_solve, bidiag_decomp, cholesky_decomp, cholesky_solve, diag_mat, diag, eigen, eigenvals, eigen_balance_pre, eigen_balance_post, eye, hessenberg_decomp, lstsq, lu_decomp, lu_solve, matmul2, matmul, permute_rows, permute_cols, unpermute_rows, unpermute_cols, qr_decomp_full, qr_decomp, qr_lstsq, rank, schur_eigenvals, schur_eigen, schur_decomp, SingularMatrixSolveError, solve, svd_decomp, svd_rank, svd_solve, svd_lstsq, svd_jac_1sided, svd_jac_2sided, svd_jac_classic, tril, triu, tril_solve, triu_solve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _bidiag__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bidiag */ \"./src/la/bidiag.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"bidiag_decomp\", function() { return _bidiag__WEBPACK_IMPORTED_MODULE_0__[\"bidiag_decomp\"]; });\n\n/* harmony import */ var _cholesky__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cholesky */ \"./src/la/cholesky.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"cholesky_decomp\", function() { return _cholesky__WEBPACK_IMPORTED_MODULE_1__[\"cholesky_decomp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"cholesky_solve\", function() { return _cholesky__WEBPACK_IMPORTED_MODULE_1__[\"cholesky_solve\"]; });\n\n/* harmony import */ var _diag__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./diag */ \"./src/la/diag.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"diag_mat\", function() { return _diag__WEBPACK_IMPORTED_MODULE_2__[\"diag_mat\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"diag\", function() { return _diag__WEBPACK_IMPORTED_MODULE_2__[\"diag\"]; });\n\n/* harmony import */ var _eigen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./eigen */ \"./src/la/eigen.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"eigen\", function() { return _eigen__WEBPACK_IMPORTED_MODULE_3__[\"eigen\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"eigenvals\", function() { return _eigen__WEBPACK_IMPORTED_MODULE_3__[\"eigenvals\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"eigen_balance_pre\", function() { return _eigen__WEBPACK_IMPORTED_MODULE_3__[\"eigen_balance_pre\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"eigen_balance_post\", function() { return _eigen__WEBPACK_IMPORTED_MODULE_3__[\"eigen_balance_post\"]; });\n\n/* harmony import */ var _eye__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./eye */ \"./src/la/eye.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"eye\", function() { return _eye__WEBPACK_IMPORTED_MODULE_4__[\"eye\"]; });\n\n/* harmony import */ var _hessenberg__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hessenberg */ \"./src/la/hessenberg.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"hessenberg_decomp\", function() { return _hessenberg__WEBPACK_IMPORTED_MODULE_5__[\"hessenberg_decomp\"]; });\n\n/* harmony import */ var _lstsq__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lstsq */ \"./src/la/lstsq.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"lstsq\", function() { return _lstsq__WEBPACK_IMPORTED_MODULE_6__[\"lstsq\"]; });\n\n/* harmony import */ var _lu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lu */ \"./src/la/lu.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"lu_decomp\", function() { return _lu__WEBPACK_IMPORTED_MODULE_7__[\"lu_decomp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"lu_solve\", function() { return _lu__WEBPACK_IMPORTED_MODULE_7__[\"lu_solve\"]; });\n\n/* harmony import */ var _matmul__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./matmul */ \"./src/la/matmul.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"matmul2\", function() { return _matmul__WEBPACK_IMPORTED_MODULE_8__[\"matmul2\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"matmul\", function() { return _matmul__WEBPACK_IMPORTED_MODULE_8__[\"matmul\"]; });\n\n/* harmony import */ var _permute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./permute */ \"./src/la/permute.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"permute_rows\", function() { return _permute__WEBPACK_IMPORTED_MODULE_9__[\"permute_rows\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"permute_cols\", function() { return _permute__WEBPACK_IMPORTED_MODULE_9__[\"permute_cols\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"unpermute_rows\", function() { return _permute__WEBPACK_IMPORTED_MODULE_9__[\"unpermute_rows\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"unpermute_cols\", function() { return _permute__WEBPACK_IMPORTED_MODULE_9__[\"unpermute_cols\"]; });\n\n/* harmony import */ var _qr__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./qr */ \"./src/la/qr.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"qr_decomp_full\", function() { return _qr__WEBPACK_IMPORTED_MODULE_10__[\"qr_decomp_full\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"qr_decomp\", function() { return _qr__WEBPACK_IMPORTED_MODULE_10__[\"qr_decomp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"qr_lstsq\", function() { return _qr__WEBPACK_IMPORTED_MODULE_10__[\"qr_lstsq\"]; });\n\n/* harmony import */ var _rank__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./rank */ \"./src/la/rank.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rank\", function() { return _rank__WEBPACK_IMPORTED_MODULE_11__[\"rank\"]; });\n\n/* harmony import */ var _rrqr__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./rrqr */ \"./src/la/rrqr.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rrqr_decomp\", function() { return _rrqr__WEBPACK_IMPORTED_MODULE_12__[\"rrqr_decomp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rrqr_decomp_full\", function() { return _rrqr__WEBPACK_IMPORTED_MODULE_12__[\"rrqr_decomp_full\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rrqr_rank\", function() { return _rrqr__WEBPACK_IMPORTED_MODULE_12__[\"rrqr_rank\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rrqr_lstsq\", function() { return _rrqr__WEBPACK_IMPORTED_MODULE_12__[\"rrqr_lstsq\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"rrqr_solve\", function() { return _rrqr__WEBPACK_IMPORTED_MODULE_12__[\"rrqr_solve\"]; });\n\n/* harmony import */ var _schur__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./schur */ \"./src/la/schur.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"schur_eigenvals\", function() { return _schur__WEBPACK_IMPORTED_MODULE_13__[\"schur_eigenvals\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"schur_eigen\", function() { return _schur__WEBPACK_IMPORTED_MODULE_13__[\"schur_eigen\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"schur_decomp\", function() { return _schur__WEBPACK_IMPORTED_MODULE_13__[\"schur_decomp\"]; });\n\n/* harmony import */ var _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./singular_matrix_solve_error */ \"./src/la/singular_matrix_solve_error.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"SingularMatrixSolveError\", function() { return _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_14__[\"SingularMatrixSolveError\"]; });\n\n/* harmony import */ var _solve__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./solve */ \"./src/la/solve.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"solve\", function() { return _solve__WEBPACK_IMPORTED_MODULE_15__[\"solve\"]; });\n\n/* harmony import */ var _svd__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./svd */ \"./src/la/svd.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_decomp\", function() { return _svd__WEBPACK_IMPORTED_MODULE_16__[\"svd_decomp\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_rank\", function() { return _svd__WEBPACK_IMPORTED_MODULE_16__[\"svd_rank\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_solve\", function() { return _svd__WEBPACK_IMPORTED_MODULE_16__[\"svd_solve\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_lstsq\", function() { return _svd__WEBPACK_IMPORTED_MODULE_16__[\"svd_lstsq\"]; });\n\n/* harmony import */ var _svd_jac_1sided__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./svd_jac_1sided */ \"./src/la/svd_jac_1sided.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_1sided\", function() { return _svd_jac_1sided__WEBPACK_IMPORTED_MODULE_17__[\"svd_jac_1sided\"]; });\n\n/* harmony import */ var _svd_jac_2sided__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./svd_jac_2sided */ \"./src/la/svd_jac_2sided.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_2sided\", function() { return _svd_jac_2sided__WEBPACK_IMPORTED_MODULE_18__[\"svd_jac_2sided\"]; });\n\n/* harmony import */ var _svd_jac_classic__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./svd_jac_classic */ \"./src/la/svd_jac_classic.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_classic\", function() { return _svd_jac_classic__WEBPACK_IMPORTED_MODULE_19__[\"svd_jac_classic\"]; });\n\n/* harmony import */ var _tri__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./tri */ \"./src/la/tri.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"tril\", function() { return _tri__WEBPACK_IMPORTED_MODULE_20__[\"tril\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"triu\", function() { return _tri__WEBPACK_IMPORTED_MODULE_20__[\"triu\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"tril_solve\", function() { return _tri__WEBPACK_IMPORTED_MODULE_20__[\"tril_solve\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"triu_solve\", function() { return _tri__WEBPACK_IMPORTED_MODULE_20__[\"triu_solve\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://nd/./src/la/index.js?");

/***/ }),

/***/ "./src/la/lstsq.js":
/*!*************************!*\
  !*** ./src/la/lstsq.js ***!
  \*************************/
/*! exports provided: lstsq */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lstsq\", function() { return lstsq; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _svd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./svd */ \"./src/la/svd.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction lstsq(A, y) {\n  var _svd_decomp = Object(_svd__WEBPACK_IMPORTED_MODULE_1__[\"svd_decomp\"])(A),\n      _svd_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_svd_decomp, 3),\n      U = _svd_decomp2[0],\n      sv = _svd_decomp2[1],\n      V = _svd_decomp2[2];\n\n  return Object(_svd__WEBPACK_IMPORTED_MODULE_1__[\"svd_lstsq\"])(U, sv, V, y);\n}\n\n//# sourceURL=webpack://nd/./src/la/lstsq.js?");

/***/ }),

/***/ "./src/la/lu.js":
/*!**********************!*\
  !*** ./src/la/lu.js ***!
  \**********************/
/*! exports provided: lu_decomp, lu_solve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lu_decomp\", function() { return lu_decomp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"lu_solve\", function() { return lu_solve; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction lu_decomp(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n\n  var LU = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'].from(A.data),\n      _A$shape$slice = A.shape.slice(-2),\n      _A$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice, 2),\n      N = _A$shape$slice2[0],\n      M = _A$shape$slice2[1],\n      P = new Int32Array(LU.length / M);\n\n  if (N != M) throw new Error('Last two dimensions must be quadratic.');\n\n  for (var LU_off = 0, P_off = 0; LU_off < LU.length; LU_off += N * N, P_off += N) {\n    for (var i = 0; i < N; i++) {\n      P[P_off + i] = i;\n    }\n\n    for (var _i = 0; _i < N; _i++) {\n      var row_i = LU_off + _i * N; // ROW PIVOTING\n\n      {\n        var p = _i;\n\n        for (var j = _i + 1; j < N; j++) {\n          if (Math.abs(LU[LU_off + N * j + _i]) > Math.abs(LU[LU_off + N * p + _i])) p = j;\n        }\n\n        if (_i != p) {\n          var P_p = P[P_off + _i];\n          P[P_off + _i] = P[P_off + p];\n          P[P_off + p] = P_p; // KEEP TRACK OF ROW SWAPS\n\n          var row_p = LU_off + p * N; // SWAP ROWS\n\n          for (var _j = 0; _j < N; _j++) {\n            var tmp = LU[row_i + _j];\n            LU[row_i + _j] = LU[row_p + _j];\n            LU[row_p + _j] = tmp;\n          }\n        }\n      } // ELIMINATE ELEMENTS BELOW PIVOT\n\n      for (var _j2 = _i + 1; _j2 < N; _j2++) {\n        var row_j = LU_off + _j2 * N,\n            scale = LU[row_j + _i] / LU[row_i + _i];\n        LU[row_j + _i] = scale;\n\n        for (var k = _i + 1; k < N; k++) {\n          LU[row_j + k] -= scale * LU[row_i + k];\n        }\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](A.shape, LU), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](A.shape.slice(0, -1), P)];\n}\nfunction lu_solve(LU, P, y) {\n  if (undefined == y) {\n    y = P;\n    var _LU = LU;\n\n    var _LU2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_LU, 2);\n\n    LU = _LU2[0];\n    P = _LU2[1];\n  }\n\n  LU = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(LU);\n  if (LU.ndim < 2) throw new Error('LU must be at least 2D.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('P must be at least 1D.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('y must be at least 2D.');\n\n  var _LU$shape$slice = LU.shape.slice(-2),\n      _LU$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_LU$shape$slice, 2),\n      N = _LU$shape$slice2[0],\n      M = _LU$shape$slice2[1],\n      _y$shape$slice = y.shape.slice(-2),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 2),\n      I = _y$shape$slice2[0],\n      J = _y$shape$slice2[1];\n\n  if (M != N) throw new Error('Last two dimensions of LU must be quadratic.');\n  if (M != I) throw new Error(\"LU and y don't match.\");\n  if (M != P.shape.slice(-1)) throw new Error(\"LU and P don't match.\");\n  var ndim = Math.max(LU.ndim, P.ndim + 1, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [LU, y];\n\n  for (var _i2 = 0; _i2 < _arr.length; _i2++) {\n    var arr = _arr[_i2];\n\n    for (var _i6 = ndim - 2, _j6 = arr.ndim - 2; _i6-- > 0 && _j6-- > 0;) {\n      if (1 === shape[_i6]) shape[_i6] = arr.shape[_j6];else if (shape[_i6] != arr.shape[_j6] && arr.shape[_j6] != 1) throw new Error('LU and y are not broadcast-compatible.');\n    }\n  }\n\n  for (var i = ndim - 2, j = P.ndim - 1; i-- > 0 && j-- > 0;) {\n    if (1 === shape[i]) shape[i] = P.shape[j];else if (shape[i] != P.shape[j] && P.shape[j] != 1) throw new Error('P is not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var x_dat = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][[LU, P, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64'](shape.reduce(function (a, b) {\n    return a * b;\n  }, 1));\n  var LU_dat = LU.data,\n      P_dat = P.data,\n      y_dat = y.data;\n  var LU_off = 0,\n      LU_stride = 1,\n      P_off = 0,\n      P_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      LU_stride = N * N;\n      P_stride = N;\n      y_stride = N * J; // COPYING PERMUTED y\n\n      for (var _i3 = 0; _i3 < I; _i3++) {\n        var row_x = x_off + J * _i3,\n            row_y = y_off + J * P_dat[P_off + _i3];\n\n        for (var _j3 = 0; _j3 < J; _j3++) {\n          x_dat[row_x + _j3] = y_dat[row_y + _j3];\n        }\n      } // FORWARD SUBSTITUTION\n\n\n      for (var _i4 = 0; _i4 < I; _i4++) {\n        for (var _j4 = 0; _j4 < J; _j4++) {\n          for (var k = 0; k < _i4; k++) {\n            x_dat[x_off + _i4 * J + _j4] -= LU_dat[LU_off + N * _i4 + k] * x_dat[x_off + k * J + _j4];\n          }\n        }\n      } // BACKWARD SUBSTITUTION\n\n\n      for (var _i5 = I; _i5-- > 0;) {\n        for (var _j5 = J; _j5-- > 0;) {\n          for (var _k = N; --_k > _i5;) {\n            x_dat[x_off + _i5 * J + _j5] -= LU_dat[LU_off + N * _i5 + _k] * x_dat[x_off + _k * J + _j5];\n          }\n\n          x_dat[x_off + _i5 * J + _j5] /= LU_dat[LU_off + N * _i5 + _i5];\n        }\n      }\n\n      LU_off += LU_stride;\n      P_off += P_stride;\n      y_off += y_stride;\n      x_off += y_stride;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break; // RESET ALONG BROADCAST AXES\n\n      if (!(LU.shape[d - ndim + LU.ndim] > 1)) LU_off -= LU_stride;\n      if (!(P.shape[d - ndim + P.ndim + 1] > 1)) P_off -= P_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    LU_stride *= LU.shape[d - ndim + LU.ndim] || 1;\n    P_stride *= P.shape[d - ndim + P.ndim + 1] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, x_dat);\n}\n\n//# sourceURL=webpack://nd/./src/la/lu.js?");

/***/ }),

/***/ "./src/la/matmul.js":
/*!**************************!*\
  !*** ./src/la/matmul.js ***!
  \**************************/
/*! exports provided: matmul2, matmul */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matmul2\", function() { return matmul2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"matmul\", function() { return matmul; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\nvar _ref =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n  var mk_matmul2;\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          mk_matmul2 = function mk_matmul2(addProduct) {\n            return new Function('A_shape', 'A', 'B_shape', 'B', 'C_shape', 'C', \"\\n      const I = A_shape[A_shape.length-2],\\n            K = A_shape[A_shape.length-1],\\n            J = B_shape[B_shape.length-1]; \\n      let\\n        a = 0, aStride = 1,\\n        b = 0, bStride = 1,\\n        c = 0;\\n\\n      const loops = new Int32Array(C_shape.length-2);\\n      for( let d=0; d >= 0; )\\n        if( d === C_shape.length-2 ) {\\n          aStride = I*K;\\n          bStride = K*J;\\n          for( const cEnd = c + I*J; c < cEnd; c += J, b -= bStride ) {\\n          for( const aEnd = a + K  ; a < aEnd; c -= J, a++ ) {\\n          for( const bEnd = b +   J; b < bEnd; c += 1, b++ ) {\\n            \".concat(addProduct, \"\\n          }}}\\n          b += bStride;\\n          d -= 1;\\n        }\\n        else\\n        {\\n          if( loops[d]++ > 0 ) {\\n            if( loops[d] > C_shape[d] ) {\\n              aStride *= A_shape[ d - C_shape.length + A_shape.length ] || 1;\\n              bStride *= B_shape[ d - C_shape.length + B_shape.length ] || 1;\\n              loops[d--] = 0;\\n              continue;\\n            }\\n            if( ! (A_shape[ d - C_shape.length + A_shape.length ] > 1) ) a -= aStride;\\n            if( ! (B_shape[ d - C_shape.length + B_shape.length ] > 1) ) b -= bStride;\\n          }\\n          ++d;\\n        }\\n    \"));\n          };\n\n          _context.next = 3;\n          return mk_matmul2('C[c] += A[a]*B[b];');\n\n        case 3:\n          _context.next = 5;\n          return mk_matmul2(\"\\n    C[2*c+0] += A[a] * B[2*b+0];\\n    C[2*c+1] += A[a] * B[2*b+1];\\n  \");\n\n        case 5:\n          _context.next = 7;\n          return mk_matmul2(\"\\n    C[2*c+0] += B[b] * A[2*a+0];\\n    C[2*c+1] += B[b] * A[2*a+1];\\n  \");\n\n        case 7:\n          _context.next = 9;\n          return mk_matmul2(\"\\n    C[2*c+0] += B[2*b+0] * A[2*a+0]  -  B[2*b+1] * A[2*a+1];\\n    C[2*c+1] += B[2*b+0] * A[2*a+1]  +  B[2*b+1] * A[2*a+0];\\n  \");\n\n        case 9:\n          _context.next = 11;\n          return mk_matmul2('C[c] = this.add(C[c], this.mul(A[a],B[b]));').bind(_math__WEBPACK_IMPORTED_MODULE_5__[\"default\"]);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee, this);\n})(),\n    _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_ref, 5),\n    matmul2_RR = _ref2[0],\n    matmul2_RC = _ref2[1],\n    matmul2_CR = _ref2[2],\n    matmul2_CC = _ref2[3],\n    matmul2_ELSE = _ref2[4];\n\nfunction matmul2(a, b) {\n  a = Object(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"])(a);\n  b = Object(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"])(b);\n  if (a.ndim < 2) throw new Error('A must be at least 2D.');\n  if (b.ndim < 2) throw new Error('B must be at least 2D.');\n\n  var _a$shape$slice = a.shape.slice(-2),\n      _a$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_a$shape$slice, 2),\n      I = _a$shape$slice2[0],\n      K = _a$shape$slice2[1],\n      J = b.shape[b.ndim - 1];\n\n  if (b.shape[b.ndim - 2] != K) throw new Error('The last dimension of A and the 2nd to last dimension of B do not match.');\n  var ndim = Math.max(a.ndim, b.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [a, b];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var arr = _arr[_i];\n\n    for (var i = ndim - 2, j = arr.ndim - 2; i-- > 0 && j-- > 0;) {\n      if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n    }\n  } // GENERATE RESULT DATA\n\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_4__[\"ARRAY_TYPES\"][Object(_dt__WEBPACK_IMPORTED_MODULE_4__[\"super_dtype\"])(a.dtype, b.dtype)]; // INTEGER TYPE ID (0: scalar, 1: complex, 2: object)\n\n  var c = new DTypeArray(shape.reduce(function (m, n) {\n    return m * n;\n  }, 1));\n  if (c instanceof Array) c.fill(0);\n  var pairing = 0;\n  var _arr2 = [a, b];\n\n  for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n    var ab = _arr2[_i2];\n    pairing *= 3;\n\n    switch (ab.dtype) {\n      default:\n        pairing += 1;\n\n      case 'complex128':\n        pairing += 1;\n\n      case 'int32':\n      case 'float32':\n      case 'float64':\n    }\n  }\n\n  switch (pairing) {\n    case 0:\n      matmul2_RR(a.shape, a.data, b.shape, b.data, shape, c);\n      break;\n\n    case 1:\n      matmul2_RC(a.shape, a.data, b.shape, b.data._array, shape, c._array);\n      break;\n\n    case 3:\n      matmul2_CR(a.shape, a.data._array, b.shape, b.data, shape, c._array);\n      break;\n\n    case 4:\n      matmul2_CC(a.shape, a.data._array, b.shape, b.data._array, shape, c._array);\n      break;\n\n    default:\n      matmul2_ELSE(a.shape, a.data, b.shape, b.data, shape, c);\n      break;\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](shape, c);\n}\nfunction matmul() {\n  for (var _len = arguments.length, matrices = new Array(_len), _key = 0; _key < _len; _key++) {\n    matrices[_key] = arguments[_key];\n  }\n\n  matrices = matrices.map(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"]);\n  if (matrices.length == 1) return matrices[0];\n  if (matrices.length == 2) return matmul2.apply(void 0, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(matrices));\n  /** Returns the number of floating point operations necessary to\n   *  matrix multiply two arrays of the given shapes.\n   */\n\n  function nOps(shapeA, shapeB) {\n    var _shapeA$slice = shapeA.slice(-2),\n        _shapeA$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_shapeA$slice, 2),\n        I = _shapeA$slice2[0],\n        K = _shapeA$slice2[1],\n        J = shapeB[shapeB.length - 1];\n\n    if (shapeB[shapeB.length - 2] != K) throw new Error('Shape mismatch.');\n    var ndim = Math.max(shapeA.length, shapeB.length),\n        shape = Int32Array.from({\n      length: ndim\n    }, function () {\n      return 1;\n    });\n    shape[ndim - 2] = I;\n    shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n    var _arr3 = [shapeA, shapeB];\n\n    for (var _i3 = 0; _i3 < _arr3.length; _i3++) {\n      var shp = _arr3[_i3];\n\n      for (var i = ndim - 2, j = shp.length - 2; i-- > 0 && j-- > 0;) {\n        if (1 === shape[i]) shape[i] = shp[j];else if (shape[i] != shp[j] && shp[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n      }\n    }\n\n    return [shape.reduce(function (a, b) {\n      return a * b;\n    }, 1) * K, shape];\n  }\n\n  ; // https://en.wikipedia.org/wiki/Matrix_chain_multiplication\n  // https://www.geeksforgeeks.org/matrix-chain-multiplication-dp-8/\n  // opMap[i][j] (j >= i) caches the optimal number of FLOPs required to multiply matrices[i] up to (including) matrices[j]\n\n  var opMap = Array.from({\n    length: matrices.length\n  }, function () {\n    return [];\n  }); // initialized opMap\n\n  for (var i = 0; i < matrices.length; i++) {\n    opMap[i][i] = [0, matrices[i].shape];\n  } // compute remaining opMap\n\n\n  for (var len = 2; len <= matrices.length; len++) {\n    for (var _i4 = 0; _i4 <= matrices.length - len; _i4++) {\n      var minFlops = Infinity,\n          minShape = void 0;\n\n      for (var j = 1; j < len; j++) {\n        var _opMap$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(opMap[_i4][_i4 + j - 1], 2),\n            lFlops = _opMap$_i[0],\n            lShape = _opMap$_i[1];\n\n        var _opMap = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(opMap[_i4 + j][_i4 + len - 1], 2),\n            rFlops = _opMap[0],\n            rShape = _opMap[1];\n\n        var _nOps = nOps(lShape, rShape),\n            _nOps2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_nOps, 2),\n            flops = _nOps2[0],\n            shape = _nOps2[1];\n\n        flops += lFlops + rFlops;\n\n        if (flops < minFlops) {\n          minFlops = flops;\n          minShape = shape; // <- the shape should always be the same so this is not strictly necessary\n        }\n      }\n\n      if (minShape === undefined) throw new Error('Integer overflow (too many FLOPs).');\n      opMap[_i4][_i4 + len - 1] = [minFlops, minShape];\n    }\n  } // compute the result using the minimal number of FLOPs using opMap\n\n\n  function product(from, to) {\n    if (from == to) return matrices[from];\n    var minFlops = Infinity,\n        minIdx;\n\n    for (var _i5 = from; _i5 < to; _i5++) {\n      var _opMap$from$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(opMap[from][_i5], 2),\n          lFlops = _opMap$from$_i[0],\n          lShape = _opMap$from$_i[1];\n\n      var _opMap$to = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(opMap[_i5 + 1][to], 2),\n          rFlops = _opMap$to[0],\n          rShape = _opMap$to[1];\n\n      var _nOps3 = nOps(lShape, rShape),\n          _nOps4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2___default()(_nOps3, 2),\n          flops = _nOps4[0],\n          _ = _nOps4[1];\n\n      flops += lFlops + rFlops;\n\n      if (flops < minFlops) {\n        minFlops = flops;\n        minIdx = _i5;\n      }\n    }\n\n    return matmul2(product(from, minIdx), product(minIdx + 1, to));\n  }\n\n  return product(0, matrices.length - 1);\n} //const [\n//  matmul2_RR,\n//  matmul2_RC,\n//  matmul2_CR,\n//  matmul2_CC,\n//  matmul2_ELSE\n//] = function*(){\n//  const mk_matmul2 = addProduct => new Function(\n//    'A_shape', 'A',\n//    'B_shape', 'B',\n//    'C_shape', 'C',\n//    `\n//      const I = A_shape[A_shape.length-2],\n//            K = A_shape[A_shape.length-1],\n//            J = B_shape[B_shape.length-1]; \n//      let aOff= 0, aStride = 1,\n//          bOff= 0, bStride = 1,\n//          cOff= 0;\n//\n//      const loops = new Int32Array(C_shape.length-2);\n//      for( let d=0; d >= 0; )\n//        if( d === C_shape.length-2 ) {\n//          aStride = I*K;\n//          bStride = K*J;\n//          for( let i=0; i < I; i++ ) {\n//          for( let k=0; k < K; k++ ) {\n//          for( let j=0; j < J; j++ ) {\n//            const a = aOff + K*i+k,\n//                  b = bOff + J*k+j,\n//                  c = cOff + J*i+j;\n//            ${addProduct}\n//          }}}\n//          aOff += aStride;\n//          bOff += bStride;\n//          cOff += I*J;\n//          --d;\n//        }\n//        else\n//        {\n//          if( loops[d]++ > 0 ) {\n//            if( loops[d] > C_shape[d] ) {\n//              aStride *= A_shape[ d - C_shape.length + A_shape.length ] || 1;\n//              bStride *= B_shape[ d - C_shape.length + B_shape.length ] || 1;\n//              loops[d--] = 0;\n//              continue;\n//            }\n//            if( ! (A_shape[ d - C_shape.length + A_shape.length ] > 1) ) aOff -= aStride;\n//            if( ! (B_shape[ d - C_shape.length + B_shape.length ] > 1) ) bOff -= bStride;\n//          }\n//          ++d;\n//        }\n//    `\n//  )\n//\n//  yield mk_matmul2('C[c] += A[a]*B[b];')\n//  yield mk_matmul2(`\n//    C[2*c+0] += A[a] * B[2*b+0];\n//    C[2*c+1] += A[a] * B[2*b+1];\n//  `)\n//  yield mk_matmul2(`\n//    C[2*c+0] += B[b] * A[2*a+0];\n//    C[2*c+1] += B[b] * A[2*a+1];\n//  `)\n//  yield mk_matmul2(`\n//    C[2*c+0] += B[2*b+0] * A[2*a+0]  -  B[2*b+1] * A[2*a+1];\n//    C[2*c+1] += B[2*b+0] * A[2*a+1]  +  B[2*b+1] * A[2*a+0];\n//  `)\n//  yield mk_matmul2('C[c] = this.add(C[c], this.mul(A[a],B[b]));').bind(math)\n//}()\n\n//# sourceURL=webpack://nd/./src/la/matmul.js?");

/***/ }),

/***/ "./src/la/permute.js":
/*!***************************!*\
  !*** ./src/la/permute.js ***!
  \***************************/
/*! exports provided: permute_rows, permute_cols, unpermute_rows, unpermute_cols */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"permute_rows\", function() { return permute_rows; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"permute_cols\", function() { return permute_cols; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unpermute_rows\", function() { return unpermute_rows; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"unpermute_cols\", function() { return unpermute_cols; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction permute_rows(A, P) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('permute_rows(A,P): A.ndim must be at least 2.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('permute_rows(A,P): P.ndim must be at least 1.');\n  if (P.dtype !== 'int32') throw new Error('permute_rows(A,P): P.dtype must be \"int32\".');\n\n  var ndim = Math.max(A.ndim, P.ndim + 1),\n      B_shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  }),\n      _A$shape$slice = A.shape.slice(-2),\n      _A$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice, 2),\n      M = _A$shape$slice2[0],\n      N = _A$shape$slice2[1];\n\n  if (M !== P.shape[P.ndim - 1]) throw new Error('permute_rows(A,P): A.shape[-2] and P.shape[-1] must match.');\n\n  for (var i = ndim, j = A.ndim; i-- > 0 && j-- > 0;) {\n    B_shape[i] = A.shape[j];\n  } // FIND COMMON (BROADCASTED) SHAPE\n\n\n  for (var _i = ndim - 2, _j = P.ndim - 1; _i-- > 0 && _j-- > 0;) {\n    if (1 === B_shape[_i]) B_shape[_i] = P.shape[_j];else if (B_shape[_i] != P.shape[_j] && P.shape[_j] != 1) throw new Error('permute_rows(A,P): A and P not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var B = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype](B_shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      A_shape = A.shape,\n      A_ndim = A.ndim,\n      P_shape = P.shape,\n      P_ndim = P.ndim;\n  A = A.data;\n  P = P.data;\n  var A_off = 0,\n      A_stride = -1,\n      P_off = 0,\n      P_stride = -1,\n      B_off = 0;\n\n  function perm(d) {\n    if (d === ndim - 2) {\n      // Q.T @ y\n      for (var _i2 = 0; _i2 < M; _i2++) {\n        var k = P[P_off + _i2];\n        if (!(k >= 0)) throw new Error('permute_rows(A,P): P.contains invalid indices.');\n        if (!(k < M)) throw new Error('permute_rows(A,P): P.contains invalid indices.');\n\n        for (var _j2 = 0; _j2 < N; _j2++) {\n          B[B_off + N * _i2 + _j2] = A[A_off + N * k + _j2];\n        }\n      }\n\n      A_off += A_stride = M * N;\n      P_off += P_stride = M;\n      B_off += A_stride;\n      return;\n    }\n\n    for (var l = B_shape[d];; l--) {\n      perm(d + 1);\n      if (l === 1) break;\n      if (!(A_shape[d - ndim + A_ndim] > 1)) A_off -= A_stride;\n      if (!(P_shape[d - ndim + 1 + P_ndim] > 1)) P_off -= P_stride;\n    }\n\n    A_stride *= A_shape[d - ndim + A_ndim] || 1;\n    P_stride *= P_shape[d - ndim + 1 + P_ndim] || 1;\n  }\n\n  perm(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](B_shape, B);\n}\nfunction permute_cols(A, P) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('permute_cols(A,P): A.ndim must be at least 2.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('permute_cols(A,P): P.ndim must be at least 1.');\n  if (P.dtype !== 'int32') throw new Error('permute_cols(A,P): P.dtype must be \"int32\".');\n\n  var ndim = Math.max(A.ndim, P.ndim + 1),\n      B_shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  }),\n      _A$shape$slice3 = A.shape.slice(-2),\n      _A$shape$slice4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice3, 2),\n      M = _A$shape$slice4[0],\n      N = _A$shape$slice4[1];\n\n  if (N !== P.shape[P.ndim - 1]) throw new Error('permute_cols(A,P): A.shape[-1] and P.shape[-1] must match.');\n\n  for (var i = ndim, j = A.ndim; i-- > 0 && j-- > 0;) {\n    B_shape[i] = A.shape[j];\n  } // FIND COMMON (BROADCASTED) SHAPE\n\n\n  for (var _i3 = ndim - 2, _j3 = P.ndim - 1; _i3-- > 0 && _j3-- > 0;) {\n    if (1 === B_shape[_i3]) B_shape[_i3] = P.shape[_j3];else if (B_shape[_i3] != P.shape[_j3] && P.shape[_j3] != 1) throw new Error('permute_cols(A,P): A and P not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var B = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype](B_shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      A_shape = A.shape,\n      A_ndim = A.ndim,\n      P_shape = P.shape,\n      P_ndim = P.ndim;\n  A = A.data;\n  P = P.data;\n  var A_off = 0,\n      A_stride = -1,\n      P_off = 0,\n      P_stride = -1,\n      B_off = 0;\n\n  function perm(d) {\n    if (d === ndim - 2) {\n      // Q.T @ y\n      for (var _i4 = 0; _i4 < M; _i4++) {\n        for (var _j4 = 0; _j4 < N; _j4++) {\n          var k = P[P_off + _j4];\n          if (!(k >= 0)) throw new Error('permute_cols(A,P): P.contains invalid indices.');\n          if (!(k < N)) throw new Error('permute_cols(A,P): P.contains invalid indices.');\n          B[B_off + N * _i4 + _j4] = A[A_off + N * _i4 + k];\n        }\n      }\n\n      A_off += A_stride = M * N;\n      P_off += P_stride = N;\n      B_off += A_stride;\n      return;\n    }\n\n    for (var l = B_shape[d];; l--) {\n      perm(d + 1);\n      if (l === 1) break;\n      if (!(A_shape[d - ndim + A_ndim] > 1)) A_off -= A_stride;\n      if (!(P_shape[d - ndim + 1 + P_ndim] > 1)) P_off -= P_stride;\n    }\n\n    A_stride *= A_shape[d - ndim + A_ndim] || 1;\n    P_stride *= P_shape[d - ndim + 1 + P_ndim] || 1;\n  }\n\n  perm(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](B_shape, B);\n}\nfunction unpermute_rows(A, P) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('unpermute_rows(A,P): A.ndim must be at least 2.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('unpermute_rows(A,P): P.ndim must be at least 1.');\n  if (P.dtype !== 'int32') throw new Error('unpermute_rows(A,P): P.dtype must be \"int32\".');\n\n  var ndim = Math.max(A.ndim, P.ndim + 1),\n      B_shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  }),\n      _A$shape$slice5 = A.shape.slice(-2),\n      _A$shape$slice6 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice5, 2),\n      M = _A$shape$slice6[0],\n      N = _A$shape$slice6[1];\n\n  if (M !== P.shape[P.ndim - 1]) throw new Error('unpermute_rows(A,P): A.shape[-2] and P.shape[-1] must match.');\n\n  for (var i = ndim, j = A.ndim; i-- > 0 && j-- > 0;) {\n    B_shape[i] = A.shape[j];\n  } // FIND COMMON (BROADCASTED) SHAPE\n\n\n  for (var _i5 = ndim - 2, _j5 = P.ndim - 1; _i5-- > 0 && _j5-- > 0;) {\n    if (1 === B_shape[_i5]) B_shape[_i5] = P.shape[_j5];else if (B_shape[_i5] != P.shape[_j5] && P.shape[_j5] != 1) throw new Error('unpermute_rows(A,P): A and P not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var B = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype](B_shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      A_shape = A.shape,\n      A_ndim = A.ndim,\n      P_shape = P.shape,\n      P_ndim = P.ndim;\n  A = A.data;\n  P = P.data;\n  var A_off = 0,\n      A_stride = -1,\n      P_off = 0,\n      P_stride = -1,\n      B_off = 0;\n\n  function perm(d) {\n    if (d === ndim - 2) {\n      // Q.T @ y\n      for (var _i6 = 0; _i6 < M; _i6++) {\n        var k = P[P_off + _i6];\n        if (!(k >= 0)) throw new Error('unpermute_rows(A,P): P.contains invalid indices.');\n        if (!(k < M)) throw new Error('unpermute_rows(A,P): P.contains invalid indices.');\n\n        for (var _j6 = 0; _j6 < N; _j6++) {\n          B[B_off + N * k + _j6] = A[A_off + N * _i6 + _j6];\n        }\n      }\n\n      A_off += A_stride = M * N;\n      P_off += P_stride = M;\n      B_off += A_stride;\n      return;\n    }\n\n    for (var l = B_shape[d];; l--) {\n      perm(d + 1);\n      if (l === 1) break;\n      if (!(A_shape[d - ndim + A_ndim] > 1)) A_off -= A_stride;\n      if (!(P_shape[d - ndim + 1 + P_ndim] > 1)) P_off -= P_stride;\n    }\n\n    A_stride *= A_shape[d - ndim + A_ndim] || 1;\n    P_stride *= P_shape[d - ndim + 1 + P_ndim] || 1;\n  }\n\n  perm(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](B_shape, B);\n}\nfunction unpermute_cols(A, P) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('unpermute_cols(A,P): A.ndim must be at least 2.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('unpermute_cols(A,P): P.ndim must be at least 1.');\n  if (P.dtype !== 'int32') throw new Error('unpermute_cols(A,P): P.dtype must be \"int32\".');\n\n  var ndim = Math.max(A.ndim, P.ndim + 1),\n      B_shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  }),\n      _A$shape$slice7 = A.shape.slice(-2),\n      _A$shape$slice8 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice7, 2),\n      M = _A$shape$slice8[0],\n      N = _A$shape$slice8[1];\n\n  if (N !== P.shape[P.ndim - 1]) throw new Error('unpermute_cols(A,P): A.shape[-1] and P.shape[-1] must match.');\n\n  for (var i = ndim, j = A.ndim; i-- > 0 && j-- > 0;) {\n    B_shape[i] = A.shape[j];\n  } // FIND COMMON (BROADCASTED) SHAPE\n\n\n  for (var _i7 = ndim - 2, _j7 = P.ndim - 1; _i7-- > 0 && _j7-- > 0;) {\n    if (1 === B_shape[_i7]) B_shape[_i7] = P.shape[_j7];else if (B_shape[_i7] != P.shape[_j7] && P.shape[_j7] != 1) throw new Error('unpermute_cols(A,P): A and P not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var B = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype](B_shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      A_shape = A.shape,\n      A_ndim = A.ndim,\n      P_shape = P.shape,\n      P_ndim = P.ndim;\n  A = A.data;\n  P = P.data;\n  var A_off = 0,\n      A_stride = -1,\n      P_off = 0,\n      P_stride = -1,\n      B_off = 0;\n\n  function perm(d) {\n    if (d === ndim - 2) {\n      // Q.T @ y\n      for (var _i8 = 0; _i8 < M; _i8++) {\n        for (var _j8 = 0; _j8 < N; _j8++) {\n          var k = P[P_off + _j8];\n          if (!(k >= 0)) throw new Error('unpermute_cols(A,P): P.contains invalid indices.');\n          if (!(k < N)) throw new Error('unpermute_cols(A,P): P.contains invalid indices.');\n          B[B_off + N * _i8 + k] = A[A_off + N * _i8 + _j8];\n        }\n      }\n\n      A_off += A_stride = M * N;\n      P_off += P_stride = N;\n      B_off += A_stride;\n      return;\n    }\n\n    for (var l = B_shape[d];; l--) {\n      perm(d + 1);\n      if (l === 1) break;\n      if (!(A_shape[d - ndim + A_ndim] > 1)) A_off -= A_stride;\n      if (!(P_shape[d - ndim + 1 + P_ndim] > 1)) P_off -= P_stride;\n    }\n\n    A_stride *= A_shape[d - ndim + A_ndim] || 1;\n    P_stride *= P_shape[d - ndim + 1 + P_ndim] || 1;\n  }\n\n  perm(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](B_shape, B);\n}\n\n//# sourceURL=webpack://nd/./src/la/permute.js?");

/***/ }),

/***/ "./src/la/qr.js":
/*!**********************!*\
  !*** ./src/la/qr.js ***!
  \**********************/
/*! exports provided: qr_decomp_full, qr_decomp, qr_lstsq */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"qr_decomp_full\", function() { return qr_decomp_full; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"qr_decomp\", function() { return qr_decomp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"qr_lstsq\", function() { return qr_lstsq; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction qr_decomp_full(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('A must be at least 2D.');\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      R_shape = A.shape,\n      Q_shape = Int32Array.from(R_shape),\n      _R_shape$slice = R_shape.slice(-2),\n      _R_shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_R_shape$slice, 2),\n      N = _R_shape$slice2[0],\n      M = _R_shape$slice2[1],\n      R = DTypeArray.from(A.data);\n\n  A = undefined;\n  Q_shape[Q_shape.length - 1] = N;\n  var Q = new DTypeArray(R.length / M * N);\n  Q.fill(0); // <- in case of an object array\n\n  for (var Q_off = 0, R_off = 0; Q_off < Q.length; Q_off += N * N, R_off += N * M) {\n    // INIT Q TO IDENTITY MATRIX\n    for (var i = 0; i < N; i++) {\n      Q[Q_off + N * i + i] = 1.0;\n    }\n\n    for (var _i = 1; _i < N; _i++) {\n      var I = Math.min(_i, M);\n\n      for (var j = 0; j < I; j++) {\n        // USE GIVENS ROTATION TO ELIMINATE ELEMENT R_ji\n        var R_ij = R[R_off + M * _i + j];\n        if (R_ij == 0.0) continue;\n        var R_jj = R[R_off + M * j + j],\n            norm = Math.hypot(R_jj, R_ij),\n            c = R_jj / norm,\n            s = R_ij / norm;\n        R[R_off + M * _i + j] = 0;\n        R[R_off + M * j + j] = norm; // ROTATE ROW i AND j IN R\n\n        for (var k = j; ++k < M;) {\n          var ik = R_off + M * _i + k,\n              R_ik = R[ik],\n              jk = R_off + M * j + k,\n              R_jk = R[jk];\n          R[ik] = c * R_ik - s * R_jk;\n          R[jk] = s * R_ik + c * R_jk;\n        } // ROTATE COL i AND j IN Q (Q TRANSPOSED FOR CACHE LOCALITY REASONS) \n\n\n        for (var _k = 0; _k <= _i; _k++) {\n          var _ik = Q_off + N * _i + _k,\n              Q_ik = Q[_ik],\n              _jk = Q_off + N * j + _k,\n              Q_jk = Q[_jk];\n\n          Q[_ik] = c * Q_ik - s * Q_jk;\n          Q[_jk] = s * Q_ik + c * Q_jk;\n        }\n      }\n    } // TRANSPOSE Q (Q TRANSPOSED FOR CACHE LOCALITY REASONS)\n\n\n    for (var _i2 = 0; _i2 < N; _i2++) {\n      for (var _j = _i2 + 1; _j < N; _j++) {\n        var ij = Q_off + N * _i2 + _j,\n            ji = Q_off + N * _j + _i2,\n            Q_ij = Q[ij];\n        Q[ij] = Q[ji];\n        Q[ji] = Q_ij;\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](Q_shape, Q), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](R_shape, R)];\n}\nfunction qr_decomp(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('qr_decomp(A): A.ndim must be at least 2.');\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      Q_shape = A.shape,\n      R_shape = Int32Array.from(Q_shape),\n      _Q_shape$slice = Q_shape.slice(-2),\n      _Q_shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q_shape$slice, 2),\n      N = _Q_shape$slice2[0],\n      M = _Q_shape$slice2[1];\n\n  R_shape[R_shape.length - 2] = M;\n  if (N <= M) return qr_decomp_full(A);\n  var Q = DTypeArray.from(A.data); // <- we could encourage GC by setting `A = undefined` after this line\n\n  A = undefined;\n\n  var R = new DTypeArray(Q.length / N * M),\n      cs = new DTypeArray(N * M - (M * (M + 1) >>> 1)),\n      r = function () {\n    try {\n      return cs.subarray(M);\n    } catch (e) {\n      return new DTypeArray(M);\n    }\n  }(); // <- additional space to temp. store rows of R not contained in the result\n\n\n  for (var R_off = 0, Q_off = 0; Q_off < Q.length; Q_off += N * M, R_off += M * M) {\n    var csi = 0; // COMPUTE R (inside of Q)\n\n    for (var i = 1; i < N; i++) {\n      var I = Math.min(i, M);\n\n      for (var j = 0; j < I; j++) {\n        // USE GIVENS ROTATION TO ELIMINATE ELEMENT R_ji\n        var R_ij = Q[Q_off + M * i + j];\n\n        if (R_ij === 0.0) {\n          cs[csi++] = 0.0;\n          continue;\n        }\n\n        var R_jj = Q[Q_off + M * j + j];\n        var norm = Math.hypot(R_jj, R_ij),\n            c = R_jj / norm,\n            s = R_ij / norm;\n\n        if (c < 0) {\n          c *= -1;\n          s *= -1;\n          norm *= -1;\n        }\n\n        cs[csi++] = s;\n        Q[Q_off + M * i + j] = 0;\n        Q[Q_off + M * j + j] = norm; // ROTATE ROW i AND j IN R\n\n        for (var k = j; ++k < M;) {\n          var ik = Q_off + M * i + k,\n              R_ik = Q[ik],\n              jk = Q_off + M * j + k,\n              R_jk = Q[jk];\n          Q[ik] = c * R_ik - s * R_jk;\n          Q[jk] = s * R_ik + c * R_jk;\n        }\n      }\n    }\n\n    if (csi != cs.length) throw new Error('Assertion failed!'); // MOVE R FROM Q -> R AND INIT Q TO I\n\n    for (var _i3 = 0; _i3 < M; _i3++) {\n      for (var _j2 = _i3; _j2 < M; _j2++) {\n        R[R_off + M * _i3 + _j2] = Q[Q_off + M * _i3 + _j2];\n        Q[Q_off + M * _i3 + _j2] = _i3 !== _j2 ? 0.0 : 1.0;\n      }\n    } // COMPUTE Q\n\n\n    for (var _i4 = N; --_i4 > 0;) {\n      var _I = Math.min(_i4, M);\n\n      for (var _j3 = _I; _j3-- > 0;) {\n        var _s = cs[--csi];\n        if (0.0 === _s) continue;\n\n        var _c = Math.sqrt((1 - _s) * (1 + _s)); // ROTATE ROW i AND j IN Q\n\n\n        for (var _k2 = _j3; _k2 < M; _k2++) {\n          var _ik2 = Q_off + M * _i4 + _k2,\n              _R_ik = Q[_ik2],\n              _jk2 = Q_off + M * _j3 + _k2,\n              _R_jk = Q[_jk2];\n\n          Q[_ik2] = _s * _R_jk + _c * _R_ik;\n          Q[_jk2] = _c * _R_jk - _s * _R_ik;\n        }\n      }\n    }\n\n    if (csi != 0) throw new Error('Assertion failed!');\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](Q_shape, Q), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](R_shape, R)];\n}\nfunction qr_lstsq(Q, R, y) {\n  if (undefined == y) {\n    y = R;\n    var _Q = Q;\n\n    var _Q2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q, 2);\n\n    Q = _Q2[0];\n    R = _Q2[1];\n  }\n\n  Q = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(Q);\n  if (Q.ndim < 2) throw new Error('qr_lstsq(Q,R,y): Q.ndim must be at least 2.');\n  R = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(R);\n  if (R.ndim < 2) throw new Error('qr_lstsq(Q,R,y): R.ndim must be at least 2.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('qr_lstsq(Q,R,y): y.ndim must be at least 2.'); //  ________________   ______                   ___________\n  // |                | |\\(MxI)|                 |           |\n  // |                | | \\ R  |  ___________    |           |\n  // |     (NxM)      | |  \\   | |   (IxJ)   |   |   (NxJ)   |\n  // |       Q        | |   \\  | |     X     | = |     Y     |\n  // |                | |    \\ | |           |   |           |\n  // |                | |     \\| |___________|   |           |\n  // |                | |  0   |                 |           |\n  // |________________| |______|                 |___________|\n\n  var _Q$shape$slice = Q.shape.slice(-2),\n      _Q$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q$shape$slice, 2),\n      N = _Q$shape$slice2[0],\n      M = _Q$shape$slice2[1],\n      _R$shape$slice = R.shape.slice(-1),\n      _R$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_R$shape$slice, 1),\n      I = _R$shape$slice2[0],\n      _y$shape$slice = y.shape.slice(-1),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 1),\n      J = _y$shape$slice2[0],\n      L = Math.min(M, I);\n\n  if (N != y.shape[y.ndim - 2]) throw new Error(\"qr_lstsq(Q,R,y): Q and y don't match.\");\n  if (M != R.shape[R.ndim - 2]) throw new Error(\"qr_lstsq(Q,R,y): Q and R don't match.\");\n  if (I > N) throw new Error(\"qr_lstsq(Q,R,y): Under-determined systems not supported. Use rrqr instead.\");\n  var ndim = Math.max(Q.ndim, R.ndim, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [Q, R, y];\n\n  for (var _i5 = 0; _i5 < _arr.length; _i5++) {\n    var arr = _arr[_i5];\n\n    for (var i = ndim - 2, j = arr.ndim - 2; i-- > 0 && j-- > 0;) {\n      if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Q, R, y are not broadcast-compatible.');\n    }\n  } // GENERATE RESULT DATA\n\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][[Q, R, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64'],\n      x_dat = new DTypeArray(shape.reduce(function (a, b) {\n    return a * b;\n  }, 1)),\n      Q_dat = Q.data,\n      R_dat = R.data,\n      y_dat = y.data;\n  var Q_off = 0,\n      Q_stride = 1,\n      R_off = 0,\n      R_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      Q_stride = N * M;\n      R_stride = M * I;\n      y_stride = N * J; // Q.T @ y\n\n      for (var i = 0; i < L; i++) {\n        for (var j = 0; j < J; j++) {\n          for (var k = 0; k < N; k++) {\n            x_dat[x_off + i * J + j] += Q_dat[Q_off + k * M + i] * y_dat[y_off + k * J + j];\n          }\n        }\n      } // BACKWARD SUBSTITUTION\n\n\n      for (var _i6 = L; _i6-- > 0;) {\n        for (var _j4 = J; _j4-- > 0;) {\n          for (var _k3 = L; --_k3 > _i6;) {\n            x_dat[x_off + _i6 * J + _j4] -= R_dat[R_off + I * _i6 + _k3] * x_dat[x_off + _k3 * J + _j4];\n          }\n\n          x_dat[x_off + _i6 * J + _j4] /= R_dat[R_off + I * _i6 + _i6];\n        }\n      }\n\n      Q_off += Q_stride;\n      R_off += R_stride;\n      y_off += y_stride;\n      x_off += I * J;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(Q.shape[d - ndim + Q.ndim] > 1)) Q_off -= Q_stride;\n      if (!(R.shape[d - ndim + R.ndim] > 1)) R_off -= R_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    Q_stride *= Q.shape[d - ndim + Q.ndim] || 1;\n    R_stride *= R.shape[d - ndim + R.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, x_dat);\n}\n\n//# sourceURL=webpack://nd/./src/la/qr.js?");

/***/ }),

/***/ "./src/la/rank.js":
/*!************************!*\
  !*** ./src/la/rank.js ***!
  \************************/
/*! exports provided: rank */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rank\", function() { return rank; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _svd__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./svd */ \"./src/la/svd.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction rank(A) {\n  var _svd_decomp = Object(_svd__WEBPACK_IMPORTED_MODULE_1__[\"svd_decomp\"])(A),\n      _svd_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_svd_decomp, 3),\n      U = _svd_decomp2[0],\n      sv = _svd_decomp2[1],\n      V = _svd_decomp2[2];\n\n  return Object(_svd__WEBPACK_IMPORTED_MODULE_1__[\"svd_rank\"])(sv);\n}\n\n//# sourceURL=webpack://nd/./src/la/rank.js?");

/***/ }),

/***/ "./src/la/rrqr.js":
/*!************************!*\
  !*** ./src/la/rrqr.js ***!
  \************************/
/*! exports provided: _rrqr_rank, rrqr_decomp_full, rrqr_decomp, rrqr_rank, rrqr_solve, rrqr_lstsq */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_rrqr_rank\", function() { return _rrqr_rank; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rrqr_decomp_full\", function() { return rrqr_decomp_full; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rrqr_decomp\", function() { return rrqr_decomp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rrqr_rank\", function() { return rrqr_rank; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rrqr_solve\", function() { return rrqr_solve; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rrqr_lstsq\", function() { return rrqr_lstsq; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./singular_matrix_solve_error */ \"./src/la/singular_matrix_solve_error.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n/* harmony import */ var _permute__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./permute */ \"./src/la/permute.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nfunction _rrqr_rank(M, N, R, R_off, tmp) {\n  // SEE: Gene H. Golub, Charles F. Van Golub\n  //      \"Matrix Computations\", 4th edition\n  //      Page 276f, Chap. 5.4.2 (QR with Column Pivoting) & 5.4.3 (Numerical Rank and AΠ=QR)\n  var L = Math.min(M, N);\n  if (!(tmp.length >= L)) throw new Error('Assertion failed.');\n  var sum = 0,\n      max = 0;\n\n  for (var i = L; i-- > 0;) {\n    for (var j = N; j-- > i;) {\n      var elem = _math__WEBPACK_IMPORTED_MODULE_4__[\"default\"].abs(R[R_off + N * i + j]);\n\n      if (elem != 0) {\n        // <- handles NaN (by making the result NaN)\n        if (elem > max) {\n          sum *= Math.pow(max / elem, 2);\n          max = elem;\n        }\n\n        sum += Math.pow(elem / max, 2);\n      }\n    }\n\n    tmp[i] = Math.sqrt(sum) * max;\n    if (!isFinite(tmp[i])) throw new Error('Infinity or NaN encountered during rank estimation.');\n  }\n\n  var dtype = tmp instanceof Float32Array ? 'float32' : 'float64',\n      T = _math__WEBPACK_IMPORTED_MODULE_4__[\"default\"].sqrt(Object(_dt__WEBPACK_IMPORTED_MODULE_3__[\"eps\"])(dtype)) * tmp[0]; // <- threshold\n\n  var r = L;\n\n  while (r > 0 && tmp[r - 1] <= T) {\n    // <- TODO use binary search here for slightly improved performance\n    --r;\n  }\n\n  return r;\n}\nfunction rrqr_decomp_full(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('A must be at least 2D.');\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      R_shape = A.shape,\n      Q_shape = Int32Array.from(R_shape),\n      P_shape = Q_shape.slice(0, -1),\n      _R_shape$slice = R_shape.slice(-2),\n      _R_shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_R_shape$slice, 2),\n      M = _R_shape$slice2[0],\n      N = _R_shape$slice2[1];\n\n  Q_shape[Q_shape.length - 1] = M;\n  P_shape[P_shape.length - 1] = N;\n  var R = DTypeArray.from(A.data); // <- we could encourage GC by setting `A = undefined` after this line\n\n  A = undefined;\n  var norm_sum = new DTypeArray(N),\n      // <─┬─ underflow-safe representation of the column norm\n  norm_max = new DTypeArray(N),\n      // <─╯  (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot#Polyfill)\n  P = new Int32Array(R.length / M),\n      // <- tracks column permutations\n  Q = new DTypeArray(R.length / N * M);\n\n  var norm = function norm(i) {\n    if (i < 0) throw new Error('Assertion failed.');\n    if (i >= N) throw new Error('Assertion failed.');\n    var max = norm_max[i];\n    return isFinite(max) ? Math.sqrt(norm_sum[i]) * max : max;\n  };\n\n  var norm_update = function norm_update(k, s) {\n    if (k < 0) throw new Error('Assertion failed.');\n    if (k >= N) throw new Error('Assertion failed.');\n    s = _math__WEBPACK_IMPORTED_MODULE_4__[\"default\"].abs(s);\n\n    if (s > 0) {\n      if (s > norm_max[k]) {\n        norm_sum[k] *= Math.pow(norm_max[k] / s, 2);\n        norm_max[k] = s;\n      }\n\n      norm_sum[k] += Math.pow(s / norm_max[k], 2);\n    }\n  };\n\n  for (var Q_off = 0, R_off = 0, P_off = 0; Q_off < Q.length; Q_off += M * M, R_off += M * N, P_off += N) {\n    // INIT P\n    for (var i = 0; i < N; i++) {\n      P[P_off + i] = i;\n    } // INIT Q (TO IDENTITY)\n\n\n    for (var _i = 0; _i < M; _i++) {\n      Q[Q_off + M * _i + _i] = 1;\n    }\n\n    if (!norm_sum.every(function (s) {\n      return s === 0;\n    })) throw new Error('Assertion failed.');\n    if (!norm_max.every(function (m) {\n      return m === 0;\n    })) throw new Error('Assertion failed.'); // COMPUTE COLUMN NORM\n    // (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot#Polyfill)\n\n    for (var j = 0; j < M; j++) {\n      for (var k = 0; k < N; k++) {\n        norm_update(k, R[R_off + N * j + k]);\n      }\n    } // ELIMINATE COLUMN BY COLUMN OF R (WHICH IS CURRENTLY STORED IN Q)\n\n\n    for (var _i2 = 0; _i2 < N; _i2++) {\n      // FIND PIVOT COLUMN THAT (HOPEFULLY) ENSURES RANK REVEAL (RRQR is inherently not guaranteed to do that)\n      var p = _i2;\n\n      for (var _j = _i2; ++_j < N;) {\n        if (norm(_j) > norm(p)) {\n          p = _j;\n        }\n      } // swap pivot to column i\n\n\n      if (p !== _i2) {\n        for (var _j2 = 0; _j2 < M; _j2++) {\n          var ji = R_off + N * _j2 + _i2,\n              jp = R_off + N * _j2 + p,\n              R_ji = R[ji];\n          R[ji] = R[jp];\n          R[jp] = R_ji;\n        }\n\n        var P_i = P[P_off + _i2];\n        P[P_off + _i2] = P[P_off + p];\n        P[P_off + p] = P_i;\n      } // RESET COLUMN NORM (INDEX i IS SET TO ZERO FOR THE NEXT RRQR)\n\n\n      norm_sum.fill(0.0, _i2);\n      norm_max.fill(0.0, _i2); // ELIMINATE ENTRIES BELOW DIAGONAL\n\n      for (var _j3 = _i2; ++_j3 < M;) {\n        // compute Given's rotation \n        var _R_ji = R[R_off + N * _j3 + _i2];\n\n        if (_R_ji == 0.0) {\n          for (var _k = _i2; ++_k < N;) {\n            norm_update(_k, R[R_off + N * _j3 + _k]);\n          }\n\n          continue;\n        }\n\n        var R_ii = R[R_off + N * _i2 + _i2],\n            _norm = Math.hypot(R_ii, _R_ji),\n            c = R_ii / _norm,\n            s = _R_ji / _norm;\n\n        R[R_off + N * _i2 + _i2] = _norm;\n        R[R_off + N * _j3 + _i2] = 0.0; // ROTATE i AND j IN R\n\n        for (var _k2 = _i2; ++_k2 < N;) {\n          // Given's rotation\n          var jk = R_off + N * _j3 + _k2,\n              R_jk = R[jk],\n              ik = R_off + N * _i2 + _k2,\n              R_ik = R[ik];\n          R[jk] = c * R_jk - s * R_ik;\n          R[ik] = s * R_jk + c * R_ik; // re-compute column norm\n\n          norm_update(_k2, R[jk]);\n        } // ROTATE i AND j IN Q\n\n\n        for (var _k3 = 0; _k3 <= _j3; _k3++) {\n          var _jk = Q_off + M * _j3 + _k3,\n              Q_jk = Q[_jk],\n              _ik = Q_off + M * _i2 + _k3,\n              Q_ik = Q[_ik];\n\n          Q[_jk] = c * Q_jk - s * Q_ik;\n          Q[_ik] = s * Q_jk + c * Q_ik;\n        }\n      }\n    } // TRANSPOSE Q\n\n\n    for (var _i3 = 0; _i3 < M; _i3++) {\n      for (var _j4 = 0; _j4 < _i3; _j4++) {\n        var _ji = Q_off + M * _j4 + _i3,\n            ij = Q_off + M * _i3 + _j4,\n            Q_ij = Q[ij];\n\n        Q[ij] = Q[_ji];\n        Q[_ji] = Q_ij;\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](Q_shape, Q), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](R_shape, R), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](P_shape, P)];\n}\nfunction rrqr_decomp(A) {\n  // TODO: implement Strong RRQR as well, e.g. as la.rrqr_decomp_strong \n  // SEE: Ming Gu, Stanley C. Eisenstat,\n  //     \"EFFICIENT ALGORITHMS FOR COMPUTING A STRONG RANK-REVEALING QR FACTORIZATION\"\n  //      https://math.berkeley.edu/~mgu/MA273/Strong_RRQR.pdf\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A);\n  if (A.ndim < 2) throw new Error('A must be at least 2D.');\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][A.dtype === 'float32' ? 'float32' : 'float64'],\n      Q_shape = A.shape,\n      R_shape = Int32Array.from(Q_shape),\n      P_shape = Q_shape.slice(0, -1),\n      _Q_shape$slice = Q_shape.slice(-2),\n      _Q_shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q_shape$slice, 2),\n      N = _Q_shape$slice2[0],\n      M = _Q_shape$slice2[1];\n\n  R_shape[R_shape.length - 2] = M;\n  P_shape[P_shape.length - 1] = M;\n  if (N <= M) return rrqr_decomp_full(A);\n  var Q = DTypeArray.from(A.data); // <- we could encourage GC by setting `A = undefined` after this line\n\n  A = undefined;\n  var norm_sum = new DTypeArray(M),\n      // <─┬─ underflow-safe representation of the column norm\n  norm_max = new DTypeArray(M),\n      // <─╯  (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot#Polyfill)\n  P = new Int32Array(Q.length / N),\n      // <- tracks column permutations\n  R = new DTypeArray(Q.length / N * M),\n      cs = new DTypeArray(2 * N * M - M * (M + 1)); // <- cache cos() and sin() values to apply M column rotations to Q at once\n\n  var norm = function norm(i) {\n    var max = norm_max[i];\n    return isFinite(max) ? Math.sqrt(norm_sum[i]) * max : max;\n  };\n\n  var norm_update = function norm_update(k, s) {\n    s = _math__WEBPACK_IMPORTED_MODULE_4__[\"default\"].abs(s);\n\n    if (s > 0) {\n      if (s > norm_max[k]) {\n        norm_sum[k] *= Math.pow(norm_max[k] / s, 2);\n        norm_max[k] = s;\n      }\n\n      norm_sum[k] += Math.pow(s / norm_max[k], 2);\n    }\n  };\n\n  for (var Q_off = 0, R_off = 0, P_off = 0; Q_off < Q.length; Q_off += N * M, R_off += M * M, P_off += M) {\n    // INIT P\n    for (var i = 0; i < M; i++) {\n      P[P_off + i] = i;\n    } //    if( ! norm_sum.every(s => s===0) ) throw new Error('Assertion failed.')\n    //    if( ! norm_max.every(m => m===0) ) throw new Error('Assertion failed.')\n    // COMPUTE COLUMN NORM\n    // (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot#Polyfill)\n\n\n    for (var j = 0; j < N; j++) {\n      for (var k = 0; k < M; k++) {\n        norm_update(k, Q[Q_off + M * j + k]);\n      }\n    }\n\n    var csi = 0; // ELIMINATE COLUMN BY COLUMN OF R (WHICH IS CURRENTLY STORED IN Q)\n\n    for (var _i4 = 0; _i4 < M; _i4++) {\n      // FIND PIVOT COLUMN THAT (HOPEFULLY) ENSURES RANK REVEAL (RRQR is inherently not guaranteed to do that)\n      var p = _i4;\n\n      for (var norm_p = norm(p), _j5 = _i4; ++_j5 < M;) {\n        var norm_j = norm(_j5);\n\n        if (norm_j > norm_p) {\n          p = _j5;\n          norm_p = norm_j;\n        }\n      } // swap pivot to column i\n\n\n      if (p !== _i4) {\n        for (var _j6 = 0; _j6 < N; _j6++) {\n          var ji = Q_off + M * _j6 + _i4,\n              jp = Q_off + M * _j6 + p,\n              A_ji = Q[ji];\n          Q[ji] = Q[jp];\n          Q[jp] = A_ji;\n        }\n\n        var P_i = P[P_off + _i4];\n        P[P_off + _i4] = P[P_off + p];\n        P[P_off + p] = P_i;\n      } // RESET COLUMN NORM (INDEX i IS SET TO ZERO FOR THE NEXT RRQR)\n\n\n      norm_sum.fill(0.0, _i4);\n      norm_max.fill(0.0, _i4); // ELIMINATE ENTRIES BELOW DIAGONAL\n\n      for (var _j7 = _i4; ++_j7 < N;) {\n        // compute Given's rotation \n        var _A_ji = Q[Q_off + M * _j7 + _i4];\n\n        if (_A_ji == 0.0) {\n          cs[csi++] = 1.0;\n          cs[csi++] = 0.0;\n\n          for (var _k4 = _i4; ++_k4 < M;) {\n            norm_update(_k4, Q[Q_off + M * _j7 + _k4]);\n          }\n\n          continue;\n        }\n\n        ;\n\n        var A_ii = Q[Q_off + M * _i4 + _i4],\n            _norm2 = Math.hypot(A_ii, _A_ji),\n            c = A_ii / _norm2,\n            s = _A_ji / _norm2;\n\n        Q[Q_off + M * _i4 + _i4] = _norm2;\n        Q[Q_off + M * _j7 + _i4] = 0.0; // rotate i and j\n\n        for (var _k5 = _i4; ++_k5 < M;) {\n          // Given's rotation\n          var jk = Q_off + M * _j7 + _k5;\n          {\n            var ik = Q_off + M * _i4 + _k5,\n                A_ik = Q[ik],\n                A_jk = Q[jk];\n            Q[jk] = c * A_jk - s * A_ik;\n            Q[ik] = s * A_jk + c * A_ik;\n          } // re-compute column norm\n\n          norm_update(_k5, Q[jk]);\n        }\n\n        cs[csi++] = c;\n        cs[csi++] = s;\n      }\n    }\n\n    if (csi != cs.length) throw new Error('Assertion failed!'); // MOVE R FROM Q -> R\n\n    for (var _i5 = 0; _i5 < M; _i5++) {\n      for (var _j8 = _i5; _j8 < M; _j8++) {\n        R[R_off + M * _i5 + _j8] = Q[Q_off + M * _i5 + _j8];\n        Q[Q_off + M * _i5 + _j8] = _i5 !== _j8 ? 0.0 : 1.0;\n      }\n    } // COMPUTE Q\n\n\n    for (var _i6 = M; _i6-- > 0;) {\n      for (var _j9 = N; --_j9 > _i6;) {\n        var _s = cs[--csi],\n            _c = cs[--csi];\n\n        for (var _k6 = M; _k6-- > _i6;) {\n          // Given's rotation\n          var _jk2 = Q_off + M * _j9 + _k6;\n\n          {\n            var _ik2 = Q_off + M * _i6 + _k6,\n                _A_ik = Q[_ik2],\n                _A_jk = Q[_jk2];\n\n            Q[_jk2] = _s * _A_ik + _c * _A_jk;\n            Q[_ik2] = _c * _A_ik - _s * _A_jk;\n          }\n        }\n      }\n    }\n\n    if (csi != 0) throw new Error('Assertion failed!');\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](Q_shape, Q), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](R_shape, R), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](P_shape, P)];\n}\nfunction rrqr_rank(R) {\n  R = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(R);\n\n  var _R$shape$slice = R.shape.slice(-2),\n      _R$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_R$shape$slice, 2),\n      M = _R$shape$slice2[0],\n      N = _R$shape$slice2[1],\n      r_shape = R.shape.slice(0, -2);\n\n  R = R.data;\n  var r = new _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"]['int32'](R.length / M / N),\n      tmp = new _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][R.dtype === 'float32' ? 'float32' : 'float64'](Math.min(M, N));\n\n  for (var r_off = 0, R_off = 0; r_off < r.length; r_off++, R_off += M * N) {\n    r[r_off] = _rrqr_rank(M, N, R, R_off, tmp);\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](r_shape, r);\n}\nfunction rrqr_solve(Q, R, P, y) {\n  Q = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(Q);\n  R = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(R);\n  var N = Q.shape[Q.ndim - 2];\n  if (N !== R.shape[R.ndim - 1]) throw new Error('rrqr_solve(Q,R,P, y): Q @ R not square.');\n  var x = rrqr_lstsq(Q, R, P, y),\n      tmp = new _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][R.dtype === 'float32' ? 'float32' : 'float64'](N);\n\n  for (var R_off = 0; R_off < R.data.length; R_off += N * N) {\n    var rank = _rrqr_rank(N, N, R.data, R_off, tmp);\n\n    if (rank < N) throw new _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_1__[\"SingularMatrixSolveError\"](x);\n  }\n\n  return x;\n}\nfunction rrqr_lstsq(Q, R, P, y) {\n  if (y == undefined) {\n    var _Q, _Q2;\n\n    if (P != undefined) throw new Error('rrqr_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.');\n    y = R((_Q = Q, _Q2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q, 3), Q = _Q2[0], R = _Q2[1], P = _Q2[2], _Q));\n  }\n\n  Q = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(Q);\n  if (Q.ndim < 2) throw new Error('rrqr_lstsq(Q,R,P, y): Q.ndim must be at least 2.');\n  R = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(R);\n  if (R.ndim < 2) throw new Error('rrqr_lstsq(Q,R,P, y): R.ndim must be at least 2.');\n  P = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(P);\n  if (P.ndim < 1) throw new Error('rrqr_lstsq(Q,R,P, y): P.ndim must be at least 1.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('rrqr_lstsq(Q,R,P, y): y.ndim must be at least 2.');\n  if (P.dtype !== 'int32') throw new Error('rrqr_lstsq(Q,R,P, y): P.dtype must be \"int32\".'); //  ________________   ______                   ___________\n  // |                | |\\(MxI)|                 |           |\n  // |                | | \\ R  |  ___________    |           |\n  // |     (NxM)      | |  \\   | |   (IxJ)   |   |   (NxJ)   |\n  // |       Q        | |   \\  | |     X     | = |     Y     |\n  // |                | |    \\ | |           |   |           |\n  // |                | |     \\| |___________|   |           |\n  // |                | |  0   |                 |           |\n  // |________________| |______|                 |___________|\n\n  var _Q$shape$slice = Q.shape.slice(-2),\n      _Q$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q$shape$slice, 2),\n      N = _Q$shape$slice2[0],\n      M = _Q$shape$slice2[1],\n      _R$shape$slice3 = R.shape.slice(-1),\n      _R$shape$slice4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_R$shape$slice3, 1),\n      I = _R$shape$slice4[0],\n      _y$shape$slice = y.shape.slice(-1),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 1),\n      J = _y$shape$slice2[0];\n\n  if (N != y.shape[y.ndim - 2]) throw new Error(\"rrqr_lstsq(Q,R,P,y): Q and y don't match.\");\n  if (M != R.shape[R.ndim - 2]) throw new Error(\"rrqr_lstsq(Q,R,P,y): Q and R don't match.\");\n  if (I != P.shape[P.ndim - 1]) throw new Error(\"rrqr_lstsq(Q,R,P,y): R and P don't match.\");\n  var ndim = Math.max(Q.ndim, R.ndim, P.ndim + 1, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [Q, R, y];\n\n  for (var _i7 = 0; _i7 < _arr.length; _i7++) {\n    var arr = _arr[_i7];\n\n    for (var _i12 = ndim - 2, _j13 = arr.ndim - 2; _i12-- > 0 && _j13-- > 0;) {\n      if (1 === shape[_i12]) shape[_i12] = arr.shape[_j13];else if (shape[_i12] != arr.shape[_j13] && arr.shape[_j13] != 1) throw new Error('rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.');\n    }\n  }\n\n  for (var i = ndim - 2, j = P.ndim - 1; i-- > 0 && j-- > 0;) {\n    if (1 === shape[i]) shape[i] = P.shape[j];else if (shape[i] != P.shape[j] && P.shape[j] != 1) throw new Error('rrqr_lstsq(Q,R,P,y): Q,R,P,y not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][[Q, R, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64'],\n      tmp_rank = new DTypeArray(Math.min(M, I)),\n      tmp_perm = new Int32Array(I),\n      x_dat = new DTypeArray(shape.reduce(function (a, b) {\n    return a * b;\n  }, 1)),\n      Q_dat = Q.data,\n      R_dat = R.data,\n      P_dat = P.data,\n      y_dat = y.data;\n  var Q_off = 0,\n      Q_stride = 1,\n      R_off = 0,\n      R_stride = 1,\n      P_off = 0,\n      P_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      Q_stride = N * M;\n      R_stride = M * I;\n      P_stride = I;\n      y_stride = N * J;\n\n      var _R = _rrqr_rank(M, I, R_dat, R_off, tmp_rank); // Q.T @ y\n\n\n      for (var k = 0; k < N; k++) {\n        for (var _i8 = 0; _i8 < _R; _i8++) {\n          for (var _j10 = 0; _j10 < J; _j10++) {\n            x_dat[x_off + _i8 * J + _j10] += Q_dat[Q_off + k * M + _i8] * y_dat[y_off + k * J + _j10];\n          }\n        }\n      } // BACKWARD SUBSTITUTION\n\n\n      for (var _i9 = _R; _i9-- > 0;) {\n        for (var _j11 = J; _j11-- > 0;) {\n          for (var _k7 = _R; --_k7 > _i9;) {\n            x_dat[x_off + _i9 * J + _j11] -= R_dat[R_off + I * _i9 + _k7] * x_dat[x_off + _k7 * J + _j11];\n          }\n\n          x_dat[x_off + _i9 * J + _j11] /= R_dat[R_off + I * _i9 + _i9];\n        }\n      } // APPLY P TO X (PERMUTE ROWS)\n      // https://www.geeksforgeeks.org/reorder-a-array-according-to-given-indexes/\n\n\n      for (var _i10 = I; _i10-- > 0;) {\n        tmp_perm[_i10] = P_dat[P_off + _i10];\n      }\n\n      for (var _i11 = I; _i11-- > 0;) {\n        var _k8 = void 0;\n\n        while ((_k8 = tmp_perm[_i11]) !== _i11) {\n          if (tmp_perm[_k8] === _k8) throw new Error(\"rrqr_lstsq(Q,R,P,y): Invalid indices in P.\");\n          tmp_perm[_i11] = tmp_perm[_k8];\n          tmp_perm[_k8] = _k8;\n\n          for (var _j12 = J; _j12-- > 0;) {\n            var x_ij = x_dat[x_off + J * _i11 + _j12];\n            x_dat[x_off + J * _i11 + _j12] = x_dat[x_off + J * _k8 + _j12];\n            x_dat[x_off + J * _k8 + _j12] = x_ij;\n          }\n        }\n      }\n\n      Q_off += Q_stride;\n      R_off += R_stride;\n      P_off += P_stride;\n      y_off += y_stride;\n      x_off += I * J;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(Q.shape[d - ndim + Q.ndim] > 1)) Q_off -= Q_stride;\n      if (!(R.shape[d - ndim + R.ndim] > 1)) R_off -= R_stride;\n      if (!(P.shape[d - ndim + 1 + P.ndim] > 1)) P_off -= P_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    Q_stride *= Q.shape[d - ndim + Q.ndim] || 1;\n    R_stride *= R.shape[d - ndim + R.ndim] || 1;\n    P_stride *= P.shape[d - ndim + 1 + P.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, x_dat);\n}\n\n//# sourceURL=webpack://nd/./src/la/rrqr.js?");

/***/ }),

/***/ "./src/la/schur.js":
/*!*************************!*\
  !*** ./src/la/schur.js ***!
  \*************************/
/*! exports provided: schur_eigenvals, schur_eigen, schur_decomp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"schur_eigenvals\", function() { return schur_eigenvals; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"schur_eigen\", function() { return schur_eigen; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"schur_decomp\", function() { return schur_decomp; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n/* harmony import */ var _hessenberg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hessenberg */ \"./src/la/hessenberg.js\");\n/* harmony import */ var _opt_root1d_bisect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../opt/root1d_bisect */ \"./src/opt/root1d_bisect.js\");\n/* harmony import */ var _matmul__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./matmul */ \"./src/la/matmul.js\");\n/* harmony import */ var _dt_mutable_complex__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dt/mutable_complex */ \"./src/dt/mutable_complex.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nfunction schur_eigenvals(T) {\n  T = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(T);\n\n  var _T$shape$slice = T.shape.slice(-1),\n      _T$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_T$shape$slice, 1),\n      N = _T$shape$slice2[0],\n      Λ_shape = T.shape.slice(0, -1),\n      Λ = new _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"]['complex128'](T.data.length / N);\n\n  if (T.shape[T.ndim - 2] != N) throw new Error('T is not square.');\n  T = T.data;\n  var T_off = 0;\n\n  var t = function t(i, j) {\n    return T[T_off + N * i + j];\n  };\n\n  for (var Λ_off = 0; T_off < T.length; T_off += N * N, Λ_off += N) {\n    // COMPUTE EIGENVECTORS (right -> left)\n    for (var j = N - 1; j >= 0; j--) {\n      var i = j - 1;\n\n      if (0 === j || 0 == t(j, i)) {\n        //\n        // 1x1 BLOCK\n        //\n        // the eigenvalue is the diagonal value\n        Λ[Λ_off + j] = t(j, j);\n      } else {\n        //\n        // 2x2 BLOCK\n        //\n        // STEP1: compute eigenpairs of the 2x2 matrix\n        var T_ii = t(i, i),\n            T_ij = t(i, j),\n            T_ji = t(j, i),\n            T_jj = t(j, j),\n            tr = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].add(T_ii, T_jj),\n            det = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(T_ii, T_jj), _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(T_ij, T_ji));\n        var λ1 = void 0,\n            λ2 = void 0;\n        var sqrt = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sqrt(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(tr, tr), _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(det, 4)));\n\n        if (tr * tr >= 4 * det) {\n          throw new Error(\"schur_eigenvals(T): T must not contain real eigenvalued 2x2 blocks.\");\n          var sign = tr < 0 ? -1.0 : +1.0;\n          λ1 = 0.5 * (tr + sign * sqrt);\n          λ2 = det * 2.0 / (tr + sign * sqrt); // <- Citardauq Formula\n        } else {\n          λ1 = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].add(tr, sqrt), 0.5);\n          λ2 = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(tr, sqrt), 0.5);\n        }\n\n        Λ[Λ_off + i] = λ1;\n        Λ[Λ_off + j] = λ2;\n        j--;\n      }\n    }\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](Λ_shape, Λ);\n}\nfunction schur_eigen(Q, T) {\n  Q = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(Q);\n  T = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(T);\n  if (Q.ndim != T.ndim) throw new Error('Q.ndim != T.ndim.');\n\n  for (var i = T.ndim; i-- > 0;) {\n    if (Q.shape[i] != T.shape[i]) throw new Error('Q.shape != T.shape.');\n  }\n\n  var _T$shape$slice3 = T.shape.slice(-1),\n      _T$shape$slice4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_T$shape$slice3, 1),\n      N = _T$shape$slice4[0],\n      V_shape = T.shape,\n      Λ_shape = V_shape.slice(0, -1); // T is quasi-triangular. For simplification let's assume it's upper triangular:\n  // ┌                        ┐\n  // │ λ₁ ...                 │\n  // │                        │\n  // │ 0   λ₂ ...             │\n  // │       .                │\n  // │ 0   0   .              │\n  // │           .            │\n  // │ .       .   λₖ ...     │\n  // │ .         .   .        │\n  // │ .           .   .      │\n  // │                   .    │\n  // │ 0    ...        0   λₙ │\n  // └                        ┘\n  //\n  // Let's say we want to find an eigenvector for λₖ, we can just solve:\n  // ┌                                   ┐ ┌     ┐\n  // │ λ₁-λₖ ...                         │ │ x₁  │\n  // │                                   │ │     │\n  // │ 0   λ₂-λₖ ...                     │ │ x₂  │\n  // │          .                        │ │ .   │\n  // │ 0     0    .                      │ │ .   │\n  // │              .                    │ │ .   │ ! ⇀\n  // │ .         .  λₖ₋₁-λₖ ...          │ │ xₖ₋₁│ = 0\n  // │                                   │ │     │\n  // │ .             .    λₖ-λₖ ...      │ │ 1   │\n  // │                        .          │ │     │\n  // │ .                 .      .        │ │ 0   │\n  // │                            .      │ │ :   │\n  // │ 0     .   .   .       0    λₙ-λₖ  │ │ 0   │\n  // └                                   ┘ └     ┘\n  //\n  // Since T is quasi-triangular this is solvable via a modified Backward Substition.\n  // For multiple (equivalent) eigenvalues, there is not guaranteed to be more than\n  // one linearily independent eigenvector. If that is the case, we at some point\n  // arrive at an row in the backward substitution where:\n  //\n  // (λₛ-λₖ)xₛ = 0·xₛ = 0 - T[s,s+1]·xₛ₊₁ ... - T[s,k-1]*xₖ₋₁ - T[s,k] = -xₛ ≠ 0.\n  //\n  // We can resolve this by setting:\n  //\n  // xₜ := 0; for t > s\n  // xₛ := 1\n  //\n  // This will of course than mean that for s and k, we have the same eigenvector.\n  //\n\n\n  if (T.shape[T.ndim - 2] != N) throw new Error('Q is not square.');\n  var ComplexArray = _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"]['complex128'],\n      V = ComplexArray.from(T.data);\n  T = undefined;\n\n  var Λ = new ComplexArray(V.length / N),\n      V_arr = V._array,\n      Λ_arr = Λ._array,\n      // temporary vectors for the eigenvalue computation\n  v1 = new ComplexArray(N),\n      v1_arr = v1._array,\n      v2 = new ComplexArray(N),\n      v2_arr = v2._array,\n      norm_sum = v1._array.subarray(0, N),\n      norm_max = v2._array.subarray(N);\n\n  var v_i = new _dt_mutable_complex__WEBPACK_IMPORTED_MODULE_7__[\"MutableComplex\"](NaN, NaN),\n      v_j = new _dt_mutable_complex__WEBPACK_IMPORTED_MODULE_7__[\"MutableComplex\"](NaN, NaN),\n      det = new _dt_mutable_complex__WEBPACK_IMPORTED_MODULE_7__[\"MutableComplex\"](NaN, NaN);\n  var TOL = NaN;\n  /** Computes indices j < J of an eigenvector v using backward substition (see amazing UTF-8 art above).\n   */\n\n  function computeVec(λ, v, J) {\n    var K = Math.min(N, J + 2),\n        v_arr = v._array;\n\n    for (var j = J; j-- > 0;) {\n      for (var k = K; --k > j;) {\n        var re0 = v_arr[2 * k + 0],\n            re1 = V_arr[2 * (V_off + N * j + k) + 0],\n            im0 = v_arr[2 * k + 1],\n            im1 = V_arr[2 * (V_off + N * j + k) + 1];\n        v_arr[2 * j + 0] -= re0 * re1 - im0 * im1;\n        v_arr[2 * j + 1] -= re0 * im1 + im0 * re1;\n      }\n\n      if (0 == j || t(j, j - 1) == 0) {\n        //\n        // 1x1 BLOCK\n        //\n        var T_jj_re = V_arr[2 * (V_off + N * j + j) + 0] - λ.re,\n            T_jj_im = V_arr[2 * (V_off + N * j + j) + 1] - λ.im;\n        v_j.re = v_arr[2 * j + 0];\n        v_j.im = v_arr[2 * j + 1];\n\n        if (Math.hypot(T_jj_re, T_jj_im) <= TOL) {\n          // <- TODO\n          if (v_j.abs() <= TOL) {\n            // <- TODO add test case for this zeroness test\n            // v is already a valid eigenvalue, let's return it\n            v_arr[2 * j + 0] = 0;\n            v_arr[2 * j + 1] = 0;\n          } else {\n            // v is invalid, let's reset\n            v_arr[2 * j] = 1.0;\n            v_arr.fill(0.0, 2 * j + 1, 2 * K);\n          }\n        } else {\n          v_j['/='](T_jj_re, T_jj_im);\n          v_arr[2 * j + 0] = v_j.re;\n          v_arr[2 * j + 1] = v_j.im;\n        }\n      } else {\n        //\n        // 2x2 BLOCK\n        //\n        var _i = j - 1;\n\n        for (var _k = K; --_k > j;) {\n          var _re = v_arr[2 * _k + 0],\n              _re2 = V_arr[2 * (V_off + N * _i + _k) + 0],\n              _im = v_arr[2 * _k + 1],\n              _im2 = V_arr[2 * (V_off + N * _i + _k) + 1];\n          v_arr[2 * _i + 0] -= _re * _re2 - _im * _im2;\n          v_arr[2 * _i + 1] -= _re * _im2 + _im * _re2;\n        }\n\n        var T_ii_re = V_arr[2 * (V_off + N * _i + _i) + 0] - λ.re,\n            T_ii_im = V_arr[2 * (V_off + N * _i + _i) + 1] - λ.im,\n            _T_jj_re = V_arr[2 * (V_off + N * j + j) + 0] - λ.re,\n            _T_jj_im = V_arr[2 * (V_off + N * j + j) + 1] - λ.im,\n            T_ij_re = V_arr[2 * (V_off + N * _i + j) + 0],\n            T_ij_im = V_arr[2 * (V_off + N * _i + j) + 1],\n            T_ji_re = V_arr[2 * (V_off + N * j + _i) + 0],\n            T_ji_im = V_arr[2 * (V_off + N * j + _i) + 1];\n\n        det['= c0*c1'](\n        /*c0=*/\n        T_ii_re, T_ii_im,\n        /*c1=*/\n        _T_jj_re, _T_jj_im);\n        det['-= c0*c1'](\n        /*c0=*/\n        T_ij_re, T_ij_im,\n        /*c1=*/\n        T_ji_re, T_ji_im);\n        if (det.re === 0 && det.im === 0) throw new Error('Assertion failed.');\n        v_j['= c0*c1'](\n        /*c0=*/\n        T_ii_re, T_ii_im,\n        /*c1=*/\n        v_arr[2 * j + 0], v_arr[2 * j + 1]);\n        v_j['-= c0*c1'](\n        /*c0=*/\n        T_ji_re, T_ji_im,\n        /*c1=*/\n        v_arr[2 * _i + 0], v_arr[2 * _i + 1]);\n        v_j['/='](det.re, det.im);\n        v_i['= c0*c1'](\n        /*c0=*/\n        _T_jj_re, _T_jj_im,\n        /*c1=*/\n        v_arr[2 * _i + 0], v_arr[2 * _i + 1]);\n        v_i['-= c0*c1'](\n        /*c0=*/\n        T_ij_re, T_ij_im,\n        /*c1=*/\n        v_arr[2 * j + 0], v_arr[2 * j + 1]);\n        v_i['/='](det.re, det.im);\n        v_arr[2 * _i + 0] = v_i.re;\n        v_arr[2 * _i + 1] = v_i.im;\n        v_arr[2 * j + 0] = v_j.re;\n        v_arr[2 * j + 1] = v_j.im;\n        j--;\n      }\n    }\n  }\n\n  var V_off = 0;\n\n  var t = function t(i, j) {\n    return V[V_off + N * i + j];\n  };\n\n  for (var Λ_off = 0; V_off < V.length; V_off += N * N, Λ_off += N) {\n    TOL = Math.sqrt(Number.EPSILON) * function () {\n      // compute Frobenius norm\n      var sum = 0,\n          max = 0;\n      var iEnd = V_off + N * N;\n\n      for (var _i2 = V_off; _i2 < iEnd; _i2++) {\n        var elem = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].abs(V[_i2]);\n\n        if (elem != 0) {\n          // <- handles NaN (by making the result NaN)\n          if (elem > max) {\n            sum *= Math.pow(max / elem, 2);\n            max = elem;\n          }\n\n          sum += Math.pow(elem / max, 2);\n        }\n      }\n\n      return Math.sqrt(sum) * max;\n    }();\n\n    if (!(TOL >= 0)) throw new Error('Assertion failed.'); // COMPUTE EIGENVECTORS (right -> left)\n\n    for (var j = N - 1; j >= 0; j--) {\n      var _i3 = j - 1;\n\n      if (0 == j || t(j, _i3) == 0) {\n        //\n        // 1x1 BLOCK\n        //\n        // the eigenvalue is the diagonal value\n        var λ = t(j, j);\n        Λ[Λ_off + j] = λ; // since 0*1 is zero, the eigenequation should be solvable for vec1[j] = 1\n        // (unless there is a duplicate eigenvalue with linarily non-independent eigenvectors, but that will be resolved by computeVec)\n\n        v1.fill(0.0, 0, j + 2);\n        v1[j] = 1;\n        computeVec(λ, v1, j); // write the solution in the the (j+1)-th column\n\n        for (var k = Math.min(N, j + 2); k-- > 0;) {\n          V_arr[2 * (V_off + N * k + j) + 0] = v1_arr[2 * k + 0];\n          V_arr[2 * (V_off + N * k + j) + 1] = v1_arr[2 * k + 1];\n        }\n      } else {\n        //\n        // 2x2 BLOCK\n        //\n        // STEP1: compute eigenpairs of the 2x2 matrix\n        var T_ii = t(_i3, _i3),\n            T_ij = t(_i3, j),\n            T_ji = t(j, _i3),\n            T_jj = t(j, j),\n            tr = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].add(T_ii, T_jj),\n            _det = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(T_ii, T_jj), _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(T_ij, T_ji));\n\n        var λ1 = void 0,\n            λ2 = void 0;\n        var sqrt = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sqrt(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(tr, tr), _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(_det, 4)));\n\n        if (tr * tr >= 4 * _det) {\n          throw new Error('The given Schur decomposition must not contain 2x2 diagonal blocks with real eigenvalues.');\n          var sign = tr < 0 ? -1.0 : +1.0;\n          λ1 = 0.5 * (tr + sign * sqrt);\n          λ2 = _det * 2.0 / (tr + sign * sqrt); // <- Citardauq Formula\n        } else {\n          λ1 = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].add(tr, sqrt), 0.5);\n          λ2 = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].mul(_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(tr, sqrt), 0.5);\n        } // TODO: the whole following section should be feasible with only a single temporary vector instead of two (vec1,vec2)\n\n\n        v1_arr.fill(0.0, 0, 2 * (j + 1));\n        v2_arr.fill(0.0, 0, 2 * (j + 1)); // http://www.math.harvard.edu/archive/21b_fall_04/exhibits/2dmatrices/\n\n        if (_math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].abs(T_ij) >= _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].abs(T_ji)) {\n          v1[_i3] = T_ij;\n          v1[j] = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(λ1, T_ii);\n          v2[_i3] = T_ij;\n          v2[j] = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(λ2, T_ii);\n        } else {\n          v1[j] = T_ji;\n          v1[_i3] = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(λ1, T_jj);\n          v2[j] = T_ji;\n          v2[_i3] = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].sub(λ2, T_jj);\n        }\n\n        computeVec(λ1, v1, _i3);\n        computeVec(λ2, v2, _i3);\n\n        for (var _k2 = j + 1; _k2-- > 0;) {\n          V_arr[2 * (V_off + N * _k2 + _i3) + 0] = v1_arr[2 * _k2 + 0];\n          V_arr[2 * (V_off + N * _k2 + _i3) + 1] = v1_arr[2 * _k2 + 1];\n          V_arr[2 * (V_off + N * _k2 + j) + 0] = v2_arr[2 * _k2 + 0];\n          V_arr[2 * (V_off + N * _k2 + j) + 1] = v2_arr[2 * _k2 + 1];\n        }\n\n        Λ[Λ_off + _i3] = λ1;\n        Λ[Λ_off + j] = λ2;\n        --j;\n      }\n    } // COMPUTE COLUMN NORMS\n\n\n    norm_sum.fill(0.0);\n    norm_max.fill(0.0);\n\n    for (var _i4 = 0; _i4 < N; _i4++) {\n      for (var J = 0; J < N * 2; J++) {\n        var _j = J >>> 1,\n            V_ij = Math.abs(V_arr[2 * (V_off + N * _i4) + J]);\n\n        if (V_ij > 0) {\n          if (V_ij > norm_max[_j]) {\n            var scale = norm_max[_j] / V_ij;\n            norm_max[_j] = V_ij;\n            norm_sum[_j] *= scale * scale;\n          }\n\n          var ratio = V_ij / norm_max[_j];\n          norm_sum[_j] += ratio * ratio;\n        }\n      }\n    }\n\n    var norm = norm_sum;\n\n    for (var _i5 = 0; _i5 < N; _i5++) {\n      var max = norm_max[_i5];\n      norm[_i5] = isFinite(max) ? Math.sqrt(norm_sum[_i5]) * max : max;\n    } // NORMALIZE COLUMNS\n\n\n    for (var _i6 = 0; _i6 < N; _i6++) {\n      for (var _j2 = 0; _j2 < N; _j2++) {\n        V[V_off + N * _i6 + _j2] = _math__WEBPACK_IMPORTED_MODULE_3__[\"math\"].div(V[V_off + N * _i6 + _j2], norm[_j2]);\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](Λ_shape, Λ), Object(_matmul__WEBPACK_IMPORTED_MODULE_6__[\"matmul2\"])(Q, new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](V_shape, V))];\n}\nfunction schur_decomp(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A); // HESSENBERG DECOMPOSITION\n\n  var N = A.shape[A.ndim - 1],\n      _hessenberg_decomp = Object(_hessenberg__WEBPACK_IMPORTED_MODULE_4__[\"hessenberg_decomp\"])(A),\n      _hessenberg_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_hessenberg_decomp, 2),\n      Q = _hessenberg_decomp2[0],\n      H = _hessenberg_decomp2[1];\n\n  A = undefined; // FRANCIS QR\n\n  schur_qrfrancis_inplace(Q, H);\n  return [Q, H];\n}\n/** Takes a Hessenberg Decomposition as input and performs a real Schur Decomposition IN-PLACE.\n *  Does not perform any scaling.\n *  Does not check Hessenberg property.\n */\n\nfunction schur_qrfrancis_inplace(Q, H) {\n  var N = Q.shape[Q.ndim - 1],\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][Q.dtype],\n      tmp = new DTypeArray(N);\n  if (Q.shape[Q.ndim - 2] != N) throw new Error('Q is not square.');\n  if (Q.ndim != H.ndim) throw new Error('Q.ndim != H.ndim.');\n\n  for (var i = Q.ndim; i-- > 0;) {\n    if (Q.shape[i] != H.shape[i]) throw new Error('Q.shape != H.shape.');\n  }\n\n  Q = Q.data;\n  H = H.data;\n  var TOL = Number.EPSILON;\n  /** This function is recursively called to perform the Francis QR Algorithm, which is\n   *  an implicit double-shift version of the QR Algorithm. This function only works on\n   *  a subregion of H and an independent Q on each recursive call. That nested Q is\n   *  applied to the remaining H and the outer Q once the nested schur decomposition\n   *  is finished.\n   *\n   *  SEE: Prof. Dr. Peter Arbenz\n   *       252-0504-00 G\n   *       Numerical Methods for Solving Large Scale Eigenvalue Problems\n   *       (Spring semester 2018)\n   *       Chapter 3: The QR Algorithm\n   *       http://people.inf.ethz.ch/arbenz/ewp/Lnotes/2010/chapter3.pdf \n   */\n\n  var francis_qr = function francis_qr(Q, Q_off, Q_stride, H_off) {\n    var h = function h(i, j) {\n      return H[H_off + N * i + j];\n    },\n        is_zero = function is_zero(i) {\n      if (Math.abs(h(i, i - 1)) > TOL * (Math.abs(h(i - 1, i - 1)) + Math.abs(h(i, i)))) // <- goes to else on NaN\n        return false;else {\n        H[H_off + N * i + i - 1] *= 0.0; // <- Handles NaN. If a value is that small, its digits are likely nonsense (due to cancellation error) so let's set it to zero.\n\n        return true;\n      }\n    },\n\n    /** Applies a two-sided given rotation.\n     */\n    giv = function giv(i, j, c, s) {\n      if (j <= i) throw new Error('Assertion failed.'); // ROTATE ROWS IN H\n\n      for (var k = Math.max(0, i - 1); k < Q_stride; k++) {\n        var H_i = H[H_off + N * i + k],\n            H_j = H[H_off + N * j + k];\n        H[H_off + N * i + k] = s * H_j + c * H_i;\n        H[H_off + N * j + k] = c * H_j - s * H_i;\n      } // ROTATE COLUMNS IN H\n\n\n      for (var _k3 = Math.min(Q_stride, j + 2); _k3-- > 0;) {\n        var _H_i = H[H_off + N * _k3 + i],\n            _H_j = H[H_off + N * _k3 + j];\n        H[H_off + N * _k3 + i] = s * _H_j + c * _H_i;\n        H[H_off + N * _k3 + j] = c * _H_j - s * _H_i;\n      } // ROTATE ROWS IN Q\n\n\n      for (var _k4 = Q_stride; _k4-- > 0;) {\n        var Q_i = Q[Q_off + Q_stride * i + _k4],\n            Q_j = Q[Q_off + Q_stride * j + _k4];\n        Q[Q_off + Q_stride * i + _k4] = s * Q_j + c * Q_i;\n        Q[Q_off + Q_stride * j + _k4] = c * Q_j - s * Q_i;\n      }\n    },\n\n    /** Recursively performs the schur-decomposition of the sub-region [s,e).\n     * \n     *  During iteration, the givens rotations are only applied to current\n     *  subregion and are accumulated in a temporary matrix. Only after the\n     *  Francis QR algorithm is done, the transformations are applied to \n     */\n    recurse = function recurse(s, e) {\n      if (e - s > Q_stride >>> 1) throw new Error('Assertion failed.'); // <- assert that memory is bounded by O(n)\n\n      var n = e - s;\n      if (n < 3) throw new Error('Assertion failed.');\n      var q = new DTypeArray(n * n); // INIT q TO IDENTITY\n\n      for (var _i7 = 0; _i7 < n; _i7++) {\n        q[n * _i7 + _i7] = 1.0;\n      } // RUN FRANCIS QR ON SUB-PROBLEM\n\n\n      francis_qr(q, 0, n, H_off + N * s + s); // TRANSPOSE q\n\n      for (var _i8 = 0; _i8 < n; _i8++) {\n        for (var j = 0; j < _i8; j++) {\n          var q_ij = q[n * _i8 + j];\n          q[n * _i8 + j] = q[n * j + _i8];\n          q[n * j + _i8] = q_ij;\n        }\n      } // APPLY q TO LEFT OF Q (Q' = q.T @ Q)\n\n\n      for (var _i9 = 0; _i9 < Q_stride; _i9++) // <- each column in Q\n      {\n        tmp.fill(0.0, 0, n);\n\n        for (var _j3 = 0; _j3 < n; _j3++) {\n          for (var k = 0; k < n; k++) {\n            tmp[k] += q[n * _j3 + k] * Q[Q_off + Q_stride * (s + _j3) + _i9];\n          }\n        }\n\n        for (var _j4 = 0; _j4 < n; _j4++) {\n          Q[Q_off + Q_stride * (s + _j4) + _i9] = tmp[_j4];\n        }\n      } // APPLY q TO LEFT OF H (H' = q.T @ H)\n\n\n      for (var _i10 = e; _i10 < Q_stride; _i10++) // <- each column in H\n      {\n        tmp.fill(0.0, 0, n);\n\n        for (var _j5 = 0; _j5 < n; _j5++) {\n          for (var _k5 = 0; _k5 < n; _k5++) {\n            tmp[_k5] += q[n * _j5 + _k5] * H[H_off + N * (s + _j5) + _i10];\n          }\n        }\n\n        for (var _j6 = 0; _j6 < n; _j6++) {\n          H[H_off + N * (s + _j6) + _i10] = tmp[_j6];\n        }\n      } // APPLY q TO RIGHT H (H\" = H' @ q)\n\n\n      for (var _i11 = 0; _i11 < s; _i11++) // <- each row in H\n      {\n        tmp.fill(0.0, 0, n);\n\n        for (var _j7 = 0; _j7 < n; _j7++) {\n          for (var _k6 = 0; _k6 < n; _k6++) {\n            tmp[_k6] += q[n * _j7 + _k6] * H[H_off + N * _i11 + (s + _j7)];\n          }\n        }\n\n        for (var _j8 = 0; _j8 < n; _j8++) {\n          H[H_off + N * _i11 + (s + _j8)] = tmp[_j8];\n        }\n      }\n    };\n\n    var stuck_o_meter = 0,\n        start = 0,\n        end = Q_stride;\n\n    while (true) {\n      // DETECT ZEROS ON THE SUB-DIAGONAL AND SHRINK WORK SIZE ACCORDINGLY\n      for (var done = false; !done;) {\n        if (end - start < 3) return;\n        if (end - start < Q_stride >>> 4) return recurse(start, end); // <- ZOOM IN IF SUBPROBLEM IS SMALL ENOUGH\n\n        done = false;\n        if (is_zero(start + 1)) start += 1;else if (is_zero(end - 1)) end -= 1;else if (is_zero(start + 2)) start += 2;else if (is_zero(end - 2)) end -= 2;else done = true;\n        var mid = start + end >>> 1;\n\n        for (var _i13 = start + 2; done && ++_i13 < end - 2;) {\n          if (is_zero(_i13)) {\n            done = false; // RUN NESTED FRANCIS QR ON THE SMALLER OF THE TWO \n\n            if (_i13 > mid) {\n              recurse(_i13, end);\n              end = _i13;\n            } else {\n              recurse(start, _i13);\n              start = _i13;\n            }\n          }\n        }\n\n        if (!done) stuck_o_meter = 0;\n      }\n\n      stuck_o_meter += 1; // DETERMINE (DOUBLE) SHIFT FROM LOWER RIGHT 2x2 BLOCK\n\n      var _i12 = end - 2,\n          j = end - 1,\n          tr = h(_i12, _i12) + h(j, j),\n          det = h(_i12, _i12) * h(j, j) - h(_i12, j) * h(j, _i12); // FOR REAL EIGENVALUES LETS USE THE ONE THAT'S CLOSER TO THE LOWER RIGHT ENTRY\n\n\n      if (tr * tr > 4 * det) {\n        var sign = tr >= 0 ? +1.0 : -1.0,\n            ev1 = 0.5 * (tr + sign * Math.sqrt(tr * tr - 4 * det)),\n            ev2 = det * 2.0 / (tr + sign * Math.sqrt(tr * tr - 4 * det)); // <- Citardauq Formula\n        // use the eigenvalue closer to A[j,j]\n        // SEE: Bindel, Fall 2016, Matrix Computations (CS 6210)\n        //      Notes for 2016-10-24\n        //      https://www.cs.cornell.edu/~bindel/class/cs6210-f16/lec/2016-10-24.pdf\n\n        if (Math.abs(h(j, j) - ev1) > Math.abs(h(j, j) - ev2)) ev1 = ev2;\n        tr = ev1 * 2;\n        det = ev1 * ev1;\n      } // IF WE'RE STUCK, LET'S WIGGLE LIKE A FISH ON LAND (... well except maybe that fella: https://www.youtube.com/watch?v=fJLCSsnhLFc)\n      // SEE: NUMERICAL RECIPES Webnote No. 16, Rev. 1\n      //      Description of the QR Algorithm for Hessenberg Matrices\n      //      http://numerical.recipes/webnotes/nr3web16.pdf\n\n\n      if (stuck_o_meter % 16 == 0) {\n        if (stuck_o_meter > 1e9) throw new Error('Too many iterations for a single eigenvalue.');\n        tr = Math.abs(h(j, _i12)) + Math.abs(h(_i12, end - 3));\n        det = tr * tr;\n        tr *= Math.random() * 0.5 + 1.25;\n      } // FIRST COLUMN OF DOUBLE SHIFTED MATRIX (H-sI)*(H-conj(s)I) = H² - 2*Re(s)*H + |s|²I\n\n\n      _i12 = start + 0;\n      j = start + 1;\n      var k = start + 2,\n          a1 = h(_i12, _i12) * h(_i12, _i12) + h(_i12, j) * h(j, _i12) - tr * h(_i12, _i12) + det,\n          a2 = h(j, _i12) * (h(_i12, _i12) + h(j, j) - tr),\n          a3 = h(j, _i12) * h(k, j); // APPLY \"DOUBLE SHIFTED\" GIVENS ROTATIONS\n\n      for (var row = 2; row-- > 0; j = k, a2 = a3) {\n        if (a2 != 0) {\n          var norm = Math.hypot(a1, a2),\n              c = a1 / norm,\n              s = a2 / norm;\n          giv(_i12, j, c, s); // if( Math.abs(c*a2 - s*a1) > 1e-8 ) throw new Error('Assertion failed.')\n\n          a1 = c * a1 + s * a2;\n        }\n      } // REINSTATE HESSENBERG PROPERTY\n\n\n      for (var col = start; col < end - 2; col++) {\n        _i12 = col + 1;\n        var J = Math.min(end, col + 4);\n\n        for (j = col + 2; j < J; j++) {\n          var H_i = h(_i12, col),\n              H_j = h(j, col);\n          if (H_j == 0) continue;\n\n          var _norm = Math.hypot(H_i, H_j),\n              _c = H_i / _norm,\n              _s = H_j / _norm;\n\n          giv(_i12, j, _c, _s); // if( Math.abs( h(j,col) ) > 1e-8 ) throw new Error('Assertion failed!')\n\n          H[H_off + N * j + col] *= 0.0; // <- handles NaN\n        }\n      }\n    }\n  }; // BEGIN SCHUR DECOMPOSING MATRICES\n\n\n  for (var off = 0; off < Q.length; off += N * N) {\n    // TRANSPOSE Q\n    for (var _i14 = 0; _i14 < N; _i14++) {\n      for (var j = 0; j < _i14; j++) {\n        var Q_ij = Q[off + N * _i14 + j];\n        Q[off + N * _i14 + j] = Q[off + N * j + _i14];\n        Q[off + N * j + _i14] = Q_ij;\n      }\n    } // RUN FRANCIS QR ALGORITHM\n\n\n    francis_qr(Q, off, N, off); // BEGIN RESOLVE REAL-VALUED 2x2 BLOCKS\n\n    for (var _j9 = 1; _j9 < N; _j9++) {\n      var _i15 = _j9 - 1;\n\n      if (H[off + N * _j9 + _i15] != 0) {\n        var _ret = function () {\n          // The goal is to find a givens rotation that Schur-decomposes a real-eigenvalue 2x2 matrix.\n          // ┌                ┐ ┌            ┐ ┌                ┐   ┌      ┐\n          // │ cos(α) -sin(α) │ │ H_ii  H_ij │ │ cos(α) -sin(α) │ ! │ λ₁ p │\n          // │                │ │            │ │                │ = │      │\n          // │ sin(α)  cos(α) │ │ H_ji  H_jj │ │ sin(α)  cos(α) │   │ 0  λ₂│ => 0 == (H_ji⋅cos(α) - H_ii⋅sin(α))⋅cos(α) + (H_jj⋅cos(α) - H_ij⋅sin(α))⋅sin(α)\n          // └                ┘ └            ┘ └                ┘   └      ┘ => 0 == (H_jj-H_ii)⋅sin(2⋅α) + (H_ij+H_ji)⋅cos(2⋅α) + H_ji-H_ij =: f(α)\n          //\n          // A simple and very numerically accurate solution would be Binary Search. In order to do that, we have to bracket a solution. So let's determine the extrema of f(α).\n          // \n          // f'(α_max) =!= 0 = 2*(H_jj-H_ii)⋅cos(2⋅α_max) - 2*(H_ij+H_ji)⋅sin(2⋅α_max) => α_max = atan2( H_jj-H_ii, H_ij+H_ji ) / 2 + n*π/2\n          var H_ii = H[off + N * _i15 + _i15],\n              H_ij = H[off + N * _i15 + _j9],\n              H_ji = H[off + N * _j9 + _i15],\n              H_jj = H[off + N * _j9 + _j9],\n              tr = H_ii + H_jj,\n              det = H_ii * H_jj - H_ij * H_ji;\n          if (tr * tr < 4 * det) return \"continue\";\n          var α_min = Math.atan2(H_jj - H_ii, H_ij + H_ji) / 2,\n              α_max = α_min + Math.PI / 2 * (α_min <= 0 ? +1 : -1),\n              α = Object(_opt_root1d_bisect__WEBPACK_IMPORTED_MODULE_5__[\"root1d_bisect\"])(function (α) {\n            return (H_ji * Math.cos(α) - H_ii * Math.sin(α)) * Math.cos(α) + (H_jj * Math.cos(α) - H_ij * Math.sin(α)) * Math.sin(α);\n          }, α_min, α_max),\n              c = Math.cos(α),\n              s = Math.sin(α);\n\n          for (var k = _i15; k < N; k++) // ROTATE ROWS IN H\n          {\n            var H_i = H[off + N * _i15 + k],\n                H_j = H[off + N * _j9 + k];\n            H[off + N * _i15 + k] = s * H_j + c * H_i;\n            H[off + N * _j9 + k] = c * H_j - s * H_i;\n          }\n\n          for (var _k7 = _j9 + 1; _k7-- > 0;) // ROTATE COLUMNS IN H\n          {\n            var _H_i2 = H[off + N * _k7 + _i15],\n                _H_j2 = H[off + N * _k7 + _j9];\n            H[off + N * _k7 + _i15] = s * _H_j2 + c * _H_i2;\n            H[off + N * _k7 + _j9] = c * _H_j2 - s * _H_i2;\n          }\n\n          for (var _k8 = N; _k8-- > 0;) // ROTATE ROWS IN Q\n          {\n            var Q_i = Q[off + N * _i15 + _k8],\n                Q_j = Q[off + N * _j9 + _k8];\n            Q[off + N * _i15 + _k8] = s * Q_j + c * Q_i;\n            Q[off + N * _j9 + _k8] = c * Q_j - s * Q_i;\n          }\n\n          H[off + N * _j9 + _i15] *= 0.0; // <- Handles NaN. If a value is that small, its digits are likely nonsense (due to cancellation error) so let's set it to zero.\n        }();\n\n        if (_ret === \"continue\") continue;\n      }\n    } // END RESOLVE REAL-VALUED 2x2 BLOCKS\n    // TRANSPOSE Q BACK\n\n\n    for (var _i16 = 0; _i16 < N; _i16++) {\n      for (var _j10 = 0; _j10 < _i16; _j10++) {\n        var _Q_ij = Q[off + N * _i16 + _j10];\n        Q[off + N * _i16 + _j10] = Q[off + N * _j10 + _i16];\n        Q[off + N * _j10 + _i16] = _Q_ij;\n      }\n    }\n  } // END SCHUR DECOMPOSING MATRICES\n\n} // END schur_qrfrancis_inplace\n\n//# sourceURL=webpack://nd/./src/la/schur.js?");

/***/ }),

/***/ "./src/la/singular_matrix_solve_error.js":
/*!***********************************************!*\
  !*** ./src/la/singular_matrix_solve_error.js ***!
  \***********************************************/
/*! exports provided: SingularMatrixSolveError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SingularMatrixSolveError\", function() { return SingularMatrixSolveError; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/wrapNativeSuper */ \"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js\");\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nvar SingularMatrixSolveError =\n/*#__PURE__*/\nfunction (_Error) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(SingularMatrixSolveError, _Error);\n\n  function SingularMatrixSolveError(x) {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, SingularMatrixSolveError);\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    _this = _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, (_getPrototypeOf2 = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(SingularMatrixSolveError)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    if (!(x instanceof _nd_array__WEBPACK_IMPORTED_MODULE_5__[\"NDArray\"])) throw new Error('Assertion failed.');\n    _this.x = x;\n    return _this;\n  }\n\n  return SingularMatrixSolveError;\n}(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default()(Error));\n\n//# sourceURL=webpack://nd/./src/la/singular_matrix_solve_error.js?");

/***/ }),

/***/ "./src/la/solve.js":
/*!*************************!*\
  !*** ./src/la/solve.js ***!
  \*************************/
/*! exports provided: solve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"solve\", function() { return solve; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _rrqr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rrqr */ \"./src/la/rrqr.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction solve(A, y) {\n  var _rrqr_decomp = Object(_rrqr__WEBPACK_IMPORTED_MODULE_1__[\"rrqr_decomp\"])(A),\n      _rrqr_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_rrqr_decomp, 3),\n      Q = _rrqr_decomp2[0],\n      R = _rrqr_decomp2[1],\n      P = _rrqr_decomp2[2];\n\n  return Object(_rrqr__WEBPACK_IMPORTED_MODULE_1__[\"rrqr_solve\"])(Q, R, P, y);\n}\n\n//# sourceURL=webpack://nd/./src/la/solve.js?");

/***/ }),

/***/ "./src/la/svd.js":
/*!***********************!*\
  !*** ./src/la/svd.js ***!
  \***********************/
/*! exports provided: svd_decomp, svd_rank, svd_solve, svd_lstsq */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_rank\", function() { return svd_rank; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_solve\", function() { return svd_solve; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_lstsq\", function() { return svd_lstsq; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./singular_matrix_solve_error */ \"./src/la/singular_matrix_solve_error.js\");\n/* harmony import */ var _svd_jac_2sided__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./svd_jac_2sided */ \"./src/la/svd_jac_2sided.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"svd_decomp\", function() { return _svd_jac_2sided__WEBPACK_IMPORTED_MODULE_5__[\"svd_jac_2sided\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nfunction svd_rank(sv) {\n  sv = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(sv);\n  var N = sv.shape[sv.ndim - 1],\n      r_shape = sv.shape.slice(0, -1),\n      EPS = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sqrt(Object(_dt__WEBPACK_IMPORTED_MODULE_3__[\"eps\"])(sv.dtype));\n  sv = sv.data;\n  var r = new _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"]['int32'](sv.length / N);\n\n  for (var off = 0; off < r.length; off++) {\n    var T = EPS * _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv[N * off]);\n    if (r[off] !== 0) throw new Error('Assertion failed.');\n\n    for (; r[off] < N; r[off]++) {\n      var sv_r = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv[N * off + r[off]]);\n      if (!isFinite(sv_r)) throw new Error('svd_rank(): NaN or Infinity encountered.');\n      if (sv_r <= T) break;\n    }\n  }\n\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](r_shape, r);\n}\nfunction svd_solve(U, sv, V, y) {\n  U = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(U);\n  sv = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(sv);\n  V = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(V);\n  if (U.shape[U.ndim - 2] !== V.shape[V.ndim - 1]) throw new Error('rrqr_solve(Q,R,P, y): System not square.');\n  var x = svd_lstsq(U, sv, V, y),\n      EPS = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sqrt(Object(_dt__WEBPACK_IMPORTED_MODULE_3__[\"eps\"])(sv.dtype)),\n      N = sv.shape[sv.ndim - 1];\n  sv = sv.data;\n\n  for (var sv_off = 0; sv_off < sv.length; sv_off += N) {\n    var T = EPS * _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv[sv_off]);\n\n    for (var r; r < N; r++) {\n      var sv_r = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv[sv_off + r]);\n      if (!isFinite(sv_r)) throw new Error('svd_solve(): NaN or Infinity encountered.');\n      if (sv_r <= T) throw new _singular_matrix_solve_error__WEBPACK_IMPORTED_MODULE_4__[\"SingularMatrixSolveError\"](x);\n    }\n  }\n\n  return x;\n}\nfunction svd_lstsq(U, sv, V, y) {\n  if (y == undefined) {\n    var _Q, _Q2;\n\n    if (V != undefined) throw new Error('svd_lstsq(Q,R,P, y): Either 2 ([Q,R,P], y) or 4 arguments (Q,R,P, y) expected.');\n    y = R((_Q = Q, _Q2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_Q, 3), U = _Q2[0], sv = _Q2[1], V = _Q2[2], _Q));\n  }\n\n  U = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(U);\n  if (U.ndim < 2) throw new Error('svd_lstsq(U,sv,V, y): U.ndim must be at least 2.');\n  sv = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(sv);\n  if (sv.ndim < 1) throw new Error('svd_lstsq(U,sv,V, y): sv.ndim must be at least 1.');\n  V = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(V);\n  if (V.ndim < 2) throw new Error('svd_lstsq(U,sv,V, y): V.ndim must be at least 2.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('svd_lstsq(U,sv,V, y): y.ndim must be at least 2.');\n\n  var _U$shape$slice = U.shape.slice(-2),\n      _U$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_U$shape$slice, 2),\n      N = _U$shape$slice2[0],\n      M = _U$shape$slice2[1],\n      _V$shape$slice = V.shape.slice(-1),\n      _V$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_V$shape$slice, 1),\n      I = _V$shape$slice2[0],\n      _y$shape$slice = y.shape.slice(-1),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 1),\n      J = _y$shape$slice2[0];\n\n  if (N != y.shape[y.ndim - 2]) throw new Error(\"svd_lstsq(U,sv,V, y): U and y don't match.\");\n  if (M != sv.shape[sv.ndim - 1]) throw new Error(\"svd_lstsq(U,sv,V, y): U and sv don't match.\");\n  if (M != V.shape[V.ndim - 2]) throw new Error(\"svd_lstsq(U,sv,V, y): V and sv don't match.\");\n  var ndim = Math.max(U.ndim, sv.ndim + 1, V.ndim, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [U, V, y];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var arr = _arr[_i];\n\n    for (var _i5 = ndim - 2, _j4 = arr.ndim - 2; _i5-- > 0 && _j4-- > 0;) {\n      if (1 === shape[_i5]) shape[_i5] = arr.shape[_j4];else if (shape[_i5] != arr.shape[_j4] && arr.shape[_j4] != 1) throw new Error('svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.');\n    }\n  }\n\n  for (var i = ndim - 2, j = sv.ndim - 1; i-- > 0 && j-- > 0;) {\n    if (1 === shape[i]) shape[i] = sv.shape[j];else if (shape[i] != sv.shape[j] && sv.shape[j] != 1) throw new Error('svd_lstsq(U,sv,V, y): U,sv,V,y not broadcast-compatible.');\n  } // GENERATE RESULT DATA\n\n\n  var EPS = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].sqrt(Object(_dt__WEBPACK_IMPORTED_MODULE_3__[\"eps\"])(sv.dtype)),\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][[U, sv, V, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64'],\n      tmp = new DTypeArray(M * J),\n      x_dat = new DTypeArray(shape.reduce(function (a, b) {\n    return a * b;\n  }, 1)),\n      U_dat = U.data,\n      sv_dat = sv.data,\n      V_dat = V.data,\n      y_dat = y.data;\n  var U_off = 0,\n      U_stride = 1,\n      sv_off = 0,\n      sv_stride = 1,\n      V_off = 0,\n      V_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      U_stride = N * M;\n      sv_stride = M;\n      V_stride = M * I;\n      y_stride = N * J;\n\n      var _R = function () {\n        var T = EPS * _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv_dat[sv_off]);\n\n        for (var r = 0; r < M; r++) {\n          var sv_r = _math__WEBPACK_IMPORTED_MODULE_1__[\"default\"].abs(sv_dat[sv_off + r]);\n          if (!isFinite(sv_r)) throw new Error('svd_solve(): NaN or Infinity encountered.');\n          if (sv_r <= T) return r;\n        }\n\n        return M;\n      }(); // SEE: Gene H. Golub, Charles F. Van Golub\n      //     \"Matrix Computations\", 4th edition\n      //      Page 260f, Chap. 5.3.1 (Implications of Full Rank)\n      // tmp = U.T @ y\n\n\n      tmp.fill(0);\n\n      for (var k = 0; k < N; k++) {\n        for (var _i2 = 0; _i2 < _R; _i2++) {\n          for (var _j = 0; _j < J; _j++) {\n            tmp[J * _i2 + _j] += U_dat[U_off + M * k + _i2] * y_dat[y_off + J * k + _j];\n          }\n        }\n      } // tmp \\= diag(sv)\n\n\n      for (var _i3 = 0; _i3 < _R; _i3++) {\n        for (var _j2 = 0; _j2 < J; _j2++) {\n          tmp[J * _i3 + _j2] /= sv_dat[sv_off + _i3];\n        }\n      } // x = V.T @ tmp\n\n\n      for (var _k = 0; _k < _R; _k++) {\n        for (var _i4 = 0; _i4 < I; _i4++) {\n          for (var _j3 = 0; _j3 < J; _j3++) {\n            x_dat[x_off + J * _i4 + _j3] += V_dat[V_off + I * _k + _i4] * tmp[J * _k + _j3];\n          }\n        }\n      }\n\n      U_off += U_stride;\n      sv_off += sv_stride;\n      V_off += V_stride;\n      y_off += y_stride;\n      x_off += I * J;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(U.shape[d - ndim + U.ndim] > 1)) U_off -= U_stride;\n      if (!(sv.shape[d - ndim + 1 + sv.ndim] > 1)) sv_off -= sv_stride;\n      if (!(V.shape[d - ndim + V.ndim] > 1)) V_off -= V_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    U_stride *= U.shape[d - ndim + U.ndim] || 1;\n    sv_stride *= sv.shape[d - ndim + 1 + sv.ndim] || 1;\n    V_stride *= V.shape[d - ndim + V.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, x_dat);\n  throw new Error('Not yet implemented!');\n}\n\n//# sourceURL=webpack://nd/./src/la/svd.js?");

/***/ }),

/***/ "./src/la/svd_jac_1sided.js":
/*!**********************************!*\
  !*** ./src/la/svd_jac_1sided.js ***!
  \**********************************/
/*! exports provided: svd_jac_1sided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_1sided\", function() { return svd_jac_1sided; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _rrqr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./rrqr */ \"./src/la/rrqr.js\");\n/* harmony import */ var _opt_root1d_bisect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../opt/root1d_bisect */ \"./src/opt/root1d_bisect.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\nfunction svd_jac_1sided(A) {\n  var _marked =\n  /*#__PURE__*/\n  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(indices_241);\n\n  // SEE:\n  //   http://www.netlib.org/lapack/lawnspdf/lawn169.pdf\n  //   http://www.netlib.org/lapack/lawnspdf/lawn170.pdf\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A);\n  if (A.dtype.startsWith('complex')) throw new Error('svd_jac_1sided(A): A.dtype must be float.');\n\n  var U_shape = A.shape,\n      V_shape = Int32Array.from(U_shape),\n      sv_shape = U_shape.slice(0, -1),\n      _U_shape$slice = U_shape.slice(-2),\n      _U_shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_U_shape$slice, 2),\n      N = _U_shape$slice2[0],\n      M = _U_shape$slice2[1];\n\n  if (N < M) {\n    var _svd_jac_1sided = svd_jac_1sided(A.T),\n        _svd_jac_1sided2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_svd_jac_1sided, 3),\n        _U = _svd_jac_1sided2[0],\n        _sv = _svd_jac_1sided2[1],\n        V = _svd_jac_1sided2[2];\n\n    return [V.T, _sv, _U.T];\n  }\n\n  var DType = A.dtype === 'float32' ? 'float32' : 'float64',\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_3__[\"ARRAY_TYPES\"][DType],\n      TOL = Object(_dt__WEBPACK_IMPORTED_MODULE_3__[\"eps\"])(DType) * N,\n      sqrt2 = Math.sqrt(2);\n  sv_shape[sv_shape.length - 1] = M;\n  V_shape[V_shape.length - 2] = M; // TODO: check if QR preconditioning is sensible for N==M\n\n  var _rrqr_decomp = Object(_rrqr__WEBPACK_IMPORTED_MODULE_4__[\"rrqr_decomp\"])(N >= M ? A : A.T),\n      _rrqr_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_rrqr_decomp, 3),\n      Q = _rrqr_decomp2[0],\n      R = _rrqr_decomp2[1],\n      P = _rrqr_decomp2[2];\n\n  A = undefined;\n  Q = Q.data;\n  R = R.data;\n  P = P.data;\n  var U = new DTypeArray(M * M),\n      // <- temporarily stores U\n  sv = new DTypeArray(Q.length / N),\n      tmp = new DTypeArray(M); // <- temporary storage for matrix multiplication\n\n  function indices_241(M) {\n    var m, IJ, k;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function indices_241$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // SEE: W. F. Mascarenhas \"On the Convergence of the Jacobi Method for Arbitrary Orderings.\"\n            // ┏    ╷    ╷         ┓\n            // ┃ B1 ┊ B3 ┊         ┃\n            // ┃┄┄┄┄┼┄┄┄┄┤   B7    ┃\n            // ┃    ┊ B2 ┊         ┃\n            // ┃    └┄┄┄┄┼┄┄┄┄┬┄┄┄┄┃ = RRᵀ\n            // ┃         ┊ B4 ┊ B6 ┃\n            // ┃         └┄┄┄┄┼┄┄┄┄┃\n            // ┃              ┊ B5 ┃\n            // ┗              ╵    ┛\n            // ORDER: {1,2,3,4,5,6,1,2,4,5,7}\n            m = M >>> 2, IJ = new Int32Array(2);\n            k = 0;\n\n          case 2:\n            if (!(k < 2)) {\n              _context.next = 80;\n              break;\n            }\n\n            IJ[0] = 0;\n\n          case 4:\n            if (!(IJ[0] < m)) {\n              _context.next = 15;\n              break;\n            }\n\n            IJ[1] = 1 + IJ[0];\n\n          case 6:\n            if (!(IJ[1] < m)) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 9;\n            return IJ;\n\n          case 9:\n            IJ[1]++;\n            _context.next = 6;\n            break;\n\n          case 12:\n            IJ[0]++;\n            _context.next = 4;\n            break;\n\n          case 15:\n            IJ[0] = m;\n\n          case 16:\n            if (!(IJ[0] < 2 * m)) {\n              _context.next = 27;\n              break;\n            }\n\n            IJ[1] = 1 + IJ[0];\n\n          case 18:\n            if (!(IJ[1] < 2 * m)) {\n              _context.next = 24;\n              break;\n            }\n\n            _context.next = 21;\n            return IJ;\n\n          case 21:\n            IJ[1]++;\n            _context.next = 18;\n            break;\n\n          case 24:\n            IJ[0]++;\n            _context.next = 16;\n            break;\n\n          case 27:\n            if (!(0 == k)) {\n              _context.next = 40;\n              break;\n            }\n\n            IJ[0] = 0;\n\n          case 29:\n            if (!(IJ[0] < m)) {\n              _context.next = 40;\n              break;\n            }\n\n            IJ[1] = m;\n\n          case 31:\n            if (!(IJ[1] < 2 * m)) {\n              _context.next = 37;\n              break;\n            }\n\n            _context.next = 34;\n            return IJ;\n\n          case 34:\n            IJ[1]++;\n            _context.next = 31;\n            break;\n\n          case 37:\n            IJ[0]++;\n            _context.next = 29;\n            break;\n\n          case 40:\n            IJ[0] = 2 * m;\n\n          case 41:\n            if (!(IJ[0] < 3 * m)) {\n              _context.next = 52;\n              break;\n            }\n\n            IJ[1] = 1 + IJ[0];\n\n          case 43:\n            if (!(IJ[1] < 3 * m)) {\n              _context.next = 49;\n              break;\n            }\n\n            _context.next = 46;\n            return IJ;\n\n          case 46:\n            IJ[1]++;\n            _context.next = 43;\n            break;\n\n          case 49:\n            IJ[0]++;\n            _context.next = 41;\n            break;\n\n          case 52:\n            IJ[0] = 3 * m;\n\n          case 53:\n            if (!(IJ[0] < M)) {\n              _context.next = 64;\n              break;\n            }\n\n            IJ[1] = 1 + IJ[0];\n\n          case 55:\n            if (!(IJ[1] < M)) {\n              _context.next = 61;\n              break;\n            }\n\n            _context.next = 58;\n            return IJ;\n\n          case 58:\n            IJ[1]++;\n            _context.next = 55;\n            break;\n\n          case 61:\n            IJ[0]++;\n            _context.next = 53;\n            break;\n\n          case 64:\n            if (!(0 == k)) {\n              _context.next = 77;\n              break;\n            }\n\n            IJ[0] = 2 * m;\n\n          case 66:\n            if (!(IJ[0] < 3 * m)) {\n              _context.next = 77;\n              break;\n            }\n\n            IJ[1] = 3 * m;\n\n          case 68:\n            if (!(IJ[1] < M)) {\n              _context.next = 74;\n              break;\n            }\n\n            _context.next = 71;\n            return IJ;\n\n          case 71:\n            IJ[1]++;\n            _context.next = 68;\n            break;\n\n          case 74:\n            IJ[0]++;\n            _context.next = 66;\n            break;\n\n          case 77:\n            k++;\n            _context.next = 2;\n            break;\n\n          case 80:\n            IJ[0] = 0;\n\n          case 81:\n            if (!(IJ[0] < 2 * m)) {\n              _context.next = 92;\n              break;\n            }\n\n            IJ[1] = 2 * m;\n\n          case 83:\n            if (!(IJ[1] < M)) {\n              _context.next = 89;\n              break;\n            }\n\n            _context.next = 86;\n            return IJ;\n\n          case 86:\n            IJ[1]++;\n            _context.next = 83;\n            break;\n\n          case 89:\n            IJ[0]++;\n            _context.next = 81;\n            break;\n\n          case 92:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _marked, this);\n  }\n\n  for (var Q_off = 0, R_off = 0, P_sv_off = 0; R_off < R.length; Q_off += N * M, R_off += M * M, P_sv_off += M) {\n    // [STEP 1] determine numerical rank of R\n    var RANK = Object(_rrqr__WEBPACK_IMPORTED_MODULE_4__[\"_rrqr_rank\"])(N, M, R, R_off, tmp); // [STEP 2] eliminate the right-most, rank-deficient columns of R, then only perform the Jacobi SVD on the upper left square part\n\n\n    for (var i = M; i-- > RANK;) {\n      // <- columns that are to be eliminated\n      for (var j = RANK; j-- > 0;) {\n        for (var k = RANK; --k > j;) {\n          var _s = U[M * i + k],\n              _c = R[R_off + M * i + k],\n              _R_ji = R[R_off + M * j + i],\n              R_jk = R[R_off + M * j + k];\n          R[R_off + M * j + i] = _c * _R_ji - _s * R_jk;\n          R[R_off + M * j + k] = _s * _R_ji + _c * R_jk;\n        }\n\n        var R_ji = R[R_off + M * j + i],\n            R_jj = R[R_off + M * j + j],\n            norm = Math.hypot(R_ji, R_jj),\n            c = R_jj / norm,\n            s = R_ji / norm;\n        R[R_off + M * j + i] = c * R_ji - s * R_jj;\n        R[R_off + M * j + j] = s * R_ji + c * R_jj;\n        R[R_off + M * i + j] = c;\n        U[M * i + j] = s;\n        if (!(Math.abs(R[R_off + M * j + i]) < 1e-8)) throw new Error('Assertion failed.');\n        R[R_off + M * j + i] = 0;\n      }\n    } // [STEP 3]COPY R -> U\n\n\n    for (var _i = 0; _i < RANK; _i++) {\n      for (var _j = 0; _j < RANK; _j++) {\n        U[M * _i + _j] = R[R_off + M * _i + _j];\n      }\n    } // [STEP 4] PERFORM JACOBI SWEEPS\n\n\n    var sweeps = 0;\n\n    for (var maxErr = Infinity; maxErr > TOL * TOL;) {\n      if (++sweeps > 128) throw new Error('Too many iterations.');\n      maxErr = 0.0;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        var _loop = function _loop() {\n          var _step$value = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_step.value, 2),\n              i = _step$value[0],\n              j = _step$value[1];\n\n          if (j <= i) throw new Error('Assertion failed');\n          var R_ii = 0.0,\n              // ◀─╮\n          R_ij = 0.0,\n              // ◀─┼─ TODO: make this underflow-saf(ish)er\n          R_jj = 0.0; // ◀─╯ \n\n          {\n            // compute dot products\n            var IK = R_off + M * i + RANK;\n\n            for (var ik = R_off + M * i, jk = R_off + M * j; ik < IK;) {\n              var R_ik = R[ik++];\n              R_ii += R_ik * R_ik;\n              var _R_jk = R[jk++];\n              R_ij += R_ik * _R_jk;\n              R_jj += _R_jk * _R_jk;\n            }\n          }\n          if (R_ii <= 0) throw new Error('Unexpected underflow.');\n          if (R_jj <= 0) throw new Error('Unexpected underflow.');\n          maxErr = Math.max(maxErr, R_ij / R_ii * (R_ij / R_jj)); // <- FIXME: check whether underflow makes a problem\n\n          if (maxErr / TOL <= TOL) return \"continue\"; // determine rotation angle using binary search. TODO: use sth. faster than binary search\n\n          var s = Object(_opt_root1d_bisect__WEBPACK_IMPORTED_MODULE_5__[\"root1d_bisect\"])(function (s) {\n            var cs = Math.sqrt((1 + s) * (1 - s)) * s;\n            return cs * R_ii + R_ij * (1 + sqrt2 * s) * (1 - sqrt2 * s) - cs * R_jj; // <- theoretically better approximation (underflow-safe?)\n          },\n          /*s_min=*/\n          -sqrt2 / 2,\n          /*s_max=*/\n          +sqrt2 / 2),\n              c = Math.sqrt((1 + s) * (1 - s)); // CHOOSE (ANGLE) SOLUTION THAT KEEPS MAIN DIAGONAL IN ORDER, i.e.:\n          // c*(c*R_ii - s*R_ij) - s*(c*R_ij - s*R_jj) = r_ii < r_jj = s*(s*R_ii + c*R_ij) + c*(s*R_ij + c*R_jj)\n\n          if (R_ii * (1 + sqrt2 * s) * (1 - sqrt2 * s) < R_jj + 2 * c * s * R_ij) {\n            var C = c;\n            c = -s;\n            s = C;\n          }\n\n          {\n            // perform rotation\n            var ik0 = R_off + M * i;\n\n            for (var _ik = R_off + M * i + RANK, _jk = R_off + M * j + RANK; _ik > ik0;) {\n              var _R_ik = R[--_ik],\n                  _R_jk2 = R[--_jk];\n              R[_ik] = c * _R_ik - s * _R_jk2;\n              R[_jk] = c * _R_jk2 + s * _R_ik;\n            }\n          }\n        };\n\n        for (var _iterator = indices_241(RANK)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) // \"2.41\"-order with locally super-quadratic convergence (in theory)\n        //      for( let i=0  ; i < RANK; i++ ) // ◀─┬─ alternative, simpler (De Rijk) order\n        //      for( let j=1+i; j < RANK; j++ ) // ◀─╯\n        {\n          var _ret = _loop();\n\n          if (_ret === \"continue\") continue;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    } // [STEP 5] COMPUTE SINGULAR VALUES AND NORMALIZE ROWS OF V\n    // TODO: V might also have to be reorthogonalized\n\n\n    for (var _i2 = 0; _i2 < RANK; _i2++) {\n      var sum = 0.0,\n          max = 0.0;\n\n      for (var _j2 = 0; _j2 < RANK; _j2++) {\n        var R_ij = Math.abs(R[R_off + M * _i2 + _j2]);\n\n        if (R_ij != 0) {\n          // <- handles NaN (by making the result NaN)\n          if (R_ij > max) {\n            var scale = max / R_ij;\n            max = R_ij;\n            sum *= scale * scale;\n          }\n\n          var ratio = R_ij / max;\n          sum += ratio * ratio;\n        }\n      }\n\n      var _norm = isFinite(max) ? Math.sqrt(sum) * max : max;\n\n      if (_norm == 0) throw new Error('Unhandled underflow. Ask the developer nicely and bribe him with a couple of beers, then he may address this issue.');\n\n      for (var _j3 = RANK; _j3-- > 0;) {\n        R[R_off + M * _i2 + _j3] /= _norm;\n      }\n\n      sv[P_sv_off + _i2] = _norm;\n    } // [STEP 6] COMPUTE U ( Using U = R @ inv(V) @ inv(SV) = R @ V.T @ diag(1/sv) )\n    //   ( should be numerically stable since V is orthogonal, i.e. well-conditioned ... right? )\n\n\n    for (var _i3 = 0; _i3 < RANK; _i3++) {\n      for (var _j4 = 0; _j4 < RANK; _j4++) {\n        tmp[_j4] = U[M * _i3 + _j4];\n        U[M * _i3 + _j4] = 0;\n      }\n\n      for (var _j5 = 0; _j5 < RANK; _j5++) {\n        for (var _k = 0; _k < RANK; _k++) {\n          U[M * _i3 + _j5] += R[R_off + M * _j5 + _k] * tmp[_k];\n        }\n\n        U[M * _i3 + _j5] /= sv[P_sv_off + _j5];\n      }\n    } // [STEP 7] UNDO [STEP 2] \n\n\n    for (var _i4 = RANK; _i4 < M; _i4++) {\n      for (var _j6 = 0; _j6 < _i4; _j6++) {\n        for (var _k2 = 0; _k2 < RANK; _k2++) {\n          var _s2 = U[M * _i4 + _k2],\n              _c2 = R[R_off + M * _i4 + _k2],\n              _R_ji2 = R[R_off + M * _j6 + _i4],\n              _R_jk3 = R[R_off + M * _j6 + _k2];\n          R[R_off + M * _j6 + _i4] = _c2 * _R_ji2 + _s2 * _R_jk3;\n          R[R_off + M * _j6 + _k2] = -_s2 * _R_ji2 + _c2 * _R_jk3;\n        }\n      } // LAST REMAINING ROW\n\n\n      var R_ii = 1.0;\n\n      for (var _k3 = 0; _k3 < RANK; _k3++) {\n        var _s3 = U[M * _i4 + _k3],\n            _c3 = R[R_off + M * _i4 + _k3];\n        R[R_off + M * _i4 + _k3] = -_s3 * R_ii;\n        R_ii *= _c3;\n      }\n\n      R[R_off + M * _i4 + _i4] = R_ii;\n    } // [STEP 8] SORT SV\n\n\n    for (var _i5 = 0; _i5 < M; _i5++) {\n      var sv_i = sv[P_sv_off + _i5]; // flip sign\n\n      if (sv_i < 0.0) throw new Error('Assertion failed.'); // insertion sort\n\n      for (var _j7 = _i5; _j7-- > 0;) {\n        var sv_j = sv[P_sv_off + _j7];\n        if (sv_j >= sv_i) break; // swap sv\n\n        sv[P_sv_off + _j7 + 1] = sv[P_sv_off + _j7];\n        sv[P_sv_off + _j7] = sv_i; // swap columns in U\n\n        for (var _k4 = 0; _k4 < M; _k4++) {\n          var U_kj = U[M * _k4 + _j7];\n          U[M * _k4 + _j7] = U[M * _k4 + _j7 + 1];\n          U[M * _k4 + _j7 + 1] = U_kj;\n        } // swap rows in V\n\n\n        var rowJ = R_off + M * _j7,\n            rowI = rowJ + M;\n\n        for (var _k5 = 0; _k5 < M; _k5++) {\n          var R_ik = R[rowI + _k5];\n          R[rowI + _k5] = R[rowJ + _k5];\n          R[rowJ + _k5] = R_ik;\n        }\n      }\n    } // [STEP 9] MULTIPLY Q = Q @ U\n\n\n    for (var _i6 = 0; _i6 < N; _i6++) {\n      for (var _j8 = 0; _j8 < RANK; _j8++) {\n        tmp[_j8] = Q[Q_off + M * _i6 + _j8];\n        Q[Q_off + M * _i6 + _j8] = 0;\n      }\n\n      for (var _k6 = 0; _k6 < RANK; _k6++) {\n        for (var _j9 = 0; _j9 < RANK; _j9++) {\n          Q[Q_off + M * _i6 + _j9] += tmp[_k6] * U[M * _k6 + _j9];\n        }\n      }\n    } // [STEP 10] APPLY P TO R (COLUMN PERMUTATIONS)\n\n\n    for (var _i7 = 0; _i7 < M; _i7++) {\n      for (var _j10 = 0; _j10 < M; _j10++) {\n        tmp[P[P_sv_off + _j10]] = R[R_off + M * _i7 + _j10];\n      }\n\n      for (var _j11 = M; _j11-- > 0;) {\n        R[R_off + M * _i7 + _j11] = tmp[_j11];\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](U_shape, Q), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](sv_shape, sv), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](V_shape, R)];\n}\n;\n\n//# sourceURL=webpack://nd/./src/la/svd_jac_1sided.js?");

/***/ }),

/***/ "./src/la/svd_jac_2sided.js":
/*!**********************************!*\
  !*** ./src/la/svd_jac_2sided.js ***!
  \**********************************/
/*! exports provided: svd_jac_2sided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_2sided\", function() { return svd_jac_2sided; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _matmul__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./matmul */ \"./src/la/matmul.js\");\n/* harmony import */ var _qr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./qr */ \"./src/la/qr.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _transpose_inplace__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./transpose_inplace */ \"./src/la/transpose_inplace.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\nfunction svd_jac_2sided(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(A);\n  if (A.dtype.startsWith('complex')) throw new Error('svd_jac_1sided(A): A.dtype must be float.');\n  var shape = A.shape,\n      N = shape[shape.length - 2]; // QR DECOMPOSE RECTANGULAR MATRICES AND WORK ON (QUADRATIC) R\n\n  {\n    var M = shape[shape.length - 1]; // if A is not square use QR Decomposition\n\n    if (N > M) {\n      var _qr_decomp = Object(_qr__WEBPACK_IMPORTED_MODULE_3__[\"qr_decomp\"])(A),\n          _qr_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_qr_decomp, 2),\n          Q = _qr_decomp2[0],\n          R = _qr_decomp2[1],\n          _svd_jac_2sided = svd_jac_2sided(R),\n          _svd_jac_2sided2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_svd_jac_2sided, 3),\n          _U = _svd_jac_2sided2[0],\n          _sv = _svd_jac_2sided2[1],\n          _V = _svd_jac_2sided2[2];\n\n      return [Object(_matmul__WEBPACK_IMPORTED_MODULE_2__[\"matmul2\"])(Q, _U), _sv, _V];\n    }\n\n    if (N < M) {\n      var _qr_decomp3 = Object(_qr__WEBPACK_IMPORTED_MODULE_3__[\"qr_decomp\"])(A.T),\n          _qr_decomp4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_qr_decomp3, 2),\n          _Q = _qr_decomp4[0],\n          _R = _qr_decomp4[1],\n          _svd_jac_2sided3 = svd_jac_2sided(_R),\n          _svd_jac_2sided4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_svd_jac_2sided3, 3),\n          _U2 = _svd_jac_2sided4[0],\n          _sv2 = _svd_jac_2sided4[1],\n          _V2 = _svd_jac_2sided4[2];\n\n      Object(_transpose_inplace__WEBPACK_IMPORTED_MODULE_5__[\"transpose_inplace\"])(_V2);\n      return [_V2, _sv2, Object(_matmul__WEBPACK_IMPORTED_MODULE_2__[\"matmul2\"])(_Q, _U2).T];\n    }\n  } // ALLOCATE RESULT DATA\n\n  var DType = A.dtype === 'float32' ? 'float32' : 'float64',\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_4__[\"ARRAY_TYPES\"][DType],\n      TOL = Object(_dt__WEBPACK_IMPORTED_MODULE_4__[\"eps\"])(DType),\n      U = DTypeArray.from(A.data);\n  A = undefined; // <- potentially allow GC\n\n  var D = new DTypeArray(N * N),\n      // <- tempory storage for decomposition\n  V = new DTypeArray(U.length),\n      sv = new DTypeArray(U.length / N);\n  if (1 > N) throw new Error('Assertion failed.');\n\n  if (1 == N) {\n    for (var i = U.length; i-- > 0;) {\n      if (U[i] < +0.0) {\n        U[i] *= -1.0;\n        sv[i] = -1.0;\n      } else sv[i] = +1.0;\n    }\n\n    return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, sv), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape.slice(0, -1), U), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, V.fill(1))];\n  }\n\n  for (var UV_off = 0, sv_off = 0; sv_off < sv.length; UV_off += N * N, sv_off += N) {\n    // MOVE FROM U TO D\n    for (var _i = 0; _i < N; _i++) {\n      for (var j = 0; j < N; j++) {\n        D[N * _i + j] = U[UV_off + N * _i + j];\n        U[UV_off + N * _i + j] = _i != j ? 0 : 1;\n      }\n    }\n\n    ; // INIT V TO IDENTITY\n\n    for (var _i2 = 0; _i2 < N; _i2++) {\n      for (var _j = 0; _j < N; _j++) {\n        V[UV_off + N * _i2 + _j] = _i2 != _j ? 0 : 1;\n      }\n    } //\n    // JACOBI SVD ITERATIONS\n    //\n\n\n    var finished = false;\n\n    while (!finished) {\n      finished = true;\n\n      for (var k = 0; k < N; k++) {\n        var _loop = function _loop(l) {\n          var D_kk = D[N * k + k],\n              D_kl = D[N * k + l],\n              D_lk = D[N * l + k],\n              D_ll = D[N * l + l];\n          if (!(Math.hypot(D_kl, D_lk) / Math.max(Math.abs(D_kk), Math.abs(D_ll)) > TOL)) return \"continue\"; // <- TODO check if really a good stopping criterion (there may be smaller off-diag. entries larger relative to their respective diag. entries)\n\n          finished = false; // determine rotation angles\n          // ┌                ┐ ┌            ┐ ┌                ┐   ┌        ┐\n          // │ cos(β) -sin(β) │ │ D_kk  D_kl │ │ cos(α) -sin(α) │ ! │ d1   0 │\n          // │                │ │            │ │                │ = │        │\n          // │ sin(β)  cos(β) │ │ D_lk  D_ll │ │ sin(α)  cos(α) │   │  0  d2 │\n          // └                ┘ └            ┘ └                ┘   └        ┘\n          //\n          // such that: |d1| >= |d2|\n          //\n          // => 0 = cos(α)*{D_kl*cos(β) - D_ll*sin(β)} + sin(α)*{D_kk*cos(β) - D_lk*sin(β)} = ½⋅{(D_ll - D_kk)⋅sin(α-β) - (D_kk + D_ll)⋅sin(α+β) + (D_kl + D_lk)⋅cos(α-β) + (D_kl - D_lk)⋅cos(α+β)}\n          //    0 = cos(α)*{D_kk*sin(β) + D_lk*cos(β)} - sin(α)*{D_kl*sin(β) + D_ll*cos(β)} = ½⋅{(D_ll - D_kk)⋅sin(α-β) + (D_kk + D_ll)⋅sin(α+β) + (D_kl + D_lk)⋅cos(α-β) - (D_kl - D_lk)⋅cos(α+β)}\n          //   d1 = cos(α)*{D_kk*cos(β) - D_lk*sin(β)} - sin(α)*{D_kl*cos(β) - D_ll*sin(β)}\n          //   d2 = cos(α)*{D_kl*sin(β) + D_ll*cos(β)} + sin(α)*{D_kk*sin(β) + D_lk*cos(β)}\n          //\n          // => 0 = {D_kl⋅cos(α) - D_kk⋅sin(α)}⋅cos(β) + {D_lk⋅sin(α) - D_ll⋅cos(α)}⋅sin(β)\n          //    0 = {D_kl⋅sin(α) + D_kk⋅cos(α)}⋅sin(β) + {D_lk⋅cos(α) + D_ll⋅sin(α)}⋅cos(β)\n          //   d1 = {D_kl⋅sin(α) + D_kk⋅cos(α)}⋅cos(β) + {D_lk⋅cos(α) - D_ll⋅sin(α)}⋅sin(β)\n          //   d2 = {D_kl⋅cos(α) - D_kk⋅sin(α)}⋅sin(β) + {D_lk⋅sin(α) + D_ll⋅cos(α)}⋅cos(β)\n          //\n          // => 0 = (D_kk+D_ll)⋅sin(α-β) + (D_kl-D_lk)⋅cos(α-β)  \n          //    0 = (D_kk-D_ll)⋅sin(α+β) + (D_kl+D_lk)⋅cos(α+β)  \n\n          var _ref = function () {\n            var Cα, Sα, Cβ, Sβ; // ANGLE COMPUTATION VARIANT A (SEE ASCII ART ABOVE)\n\n            {\n              var m = Math.atan2(D_lk - D_kl, D_ll + D_kk),\n                  // = α - β\n              p = Math.atan2(D_lk + D_kl, D_ll - D_kk),\n                  // = α + β\n              α = (p + m) / 2,\n                  β = (p - m) / 2;\n              Cα = Math.cos(α);\n              Sα = Math.sin(α);\n              Cβ = Math.cos(β);\n              Sβ = Math.sin(β);\n            } // tan is 180°-periodical so lets try all possible solutions\n\n            var _arr = [[Cα, Sα, Cβ, Sβ], // [p,m]+[  0°,  0°]\n            [-Sα, Cα, Sβ, -Cβ], // [p,m]+[  0°,180°]\n            [-Sα, Cα, -Sβ, Cβ], // [p,m]+[180°,  0°]\n            [-Cα, -Sα, Cβ, Sβ] // [p,m]+[180°,180°]\n            ];\n\n            for (var _i3 = 0; _i3 < _arr.length; _i3++) {\n              var _arr$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_arr[_i3], 4),\n                  _c = _arr$_i[0],\n                  _s = _arr$_i[1],\n                  _c2 = _arr$_i[2],\n                  _s2 = _arr$_i[3];\n\n              var d00 = (D_kl * _s + D_kk * _c) * _c2 + (D_lk * _c - D_ll * _s) * _s2,\n                  d11 = (D_kl * _c - D_kk * _s) * _s2 + (D_lk * _s + D_ll * _c) * _c2; // ROTATE IN A WAY THAT ENSURES DESCENDING ORDER\n\n              if (d11 >= Math.abs(d00)) {\n                if (d00 >= -0.0) return [_c, _s, _c2, _s2];\n                Cα = _c;\n                Sα = _s;\n                Cβ = _c2;\n                Sβ = _s2;\n              }\n            }\n\n            return [Cα, Sα, Cβ, Sβ];\n          }(),\n              _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_ref, 4),\n              cα = _ref2[0],\n              sα = _ref2[1],\n              cβ = _ref2[2],\n              sβ = _ref2[3]; // ROTATE COLUMNS IN D\n\n\n          for (var _i4 = N; _i4-- > 0;) {\n            var D_ik = D[N * _i4 + k],\n                D_il = D[N * _i4 + l];\n            D[N * _i4 + k] = D_ik * cα - D_il * sα;\n            D[N * _i4 + l] = D_il * cα + D_ik * sα;\n          } // ROTATE ROWS IN D\n\n\n          for (var _i5 = N; _i5-- > 0;) {\n            var D_ki = D[N * k + _i5],\n                D_li = D[N * l + _i5];\n            D[N * k + _i5] = D_ki * cβ - D_li * sβ;\n            D[N * l + _i5] = D_li * cβ + D_ki * sβ;\n          } //        if( ! math.is_close(0, D[N*k+l]) ) throw new Error(`Assertion failed: 0 =/= ${D[N*k+l]}.`)\n          //        if( ! math.is_close(0, D[N*l+k]) ) throw new Error(`Assertion failed: 0 =/= ${D[N*l+k]}.`)\n          // ENTRIES (k,l) AND (l,k) ARE REMAINDERS (CANCELLATION ERROR) FROM ELIMINATION => SHOULD BE SAFELY ZEROABLE\n\n\n          D[N * k + l] = 0.0;\n          D[N * l + k] = 0.0; // ROTATE ROWS IN U (TRANSPOSED FOR CACHE LOCALITY REASONS)\n\n          for (var _i6 = 0; _i6 < N; _i6++) {\n            var ki = UV_off + N * k + _i6,\n                U_ki = U[ki],\n                li = UV_off + N * l + _i6,\n                U_li = U[li];\n            U[ki] = U_ki * cβ - U_li * sβ;\n            U[li] = U_li * cβ + U_ki * sβ;\n          } // ROTATE ROWS IN V\n\n\n          for (var _i7 = 0; _i7 < N; _i7++) {\n            var _ki = UV_off + N * k + _i7,\n                V_ki = V[_ki],\n                _li = UV_off + N * l + _i7,\n                V_li = V[_li];\n\n            V[_ki] = V_ki * cα - V_li * sα;\n            V[_li] = V_li * cα + V_ki * sα;\n          }\n        };\n\n        for (var l = 0; l < k; l++) {\n          var _ret = _loop(l);\n\n          if (_ret === \"continue\") continue;\n        }\n      }\n    } // MOVE D TO SV\n\n\n    for (var _i8 = 0; _i8 < N; _i8++) {\n      sv[sv_off + _i8] = D[N * _i8 + _i8];\n    } // USE INSERTION SORT SV (should take as most O(N) because it is heavily pre-sorted by choosing the rotation angles accordingly)\n\n\n    for (var _i9 = 0; _i9 < N; _i9++) {\n      var sv_i = sv[sv_off + _i9]; // flip sign\n\n      if (sv_i < 0.0) {\n        sv[sv_off + _i9] = sv_i *= -1;\n\n        for (var _k = 0; _k < N; _k++) {\n          U[UV_off + N * _i9 + _k] *= -1;\n        }\n      } // insertion sort\n\n\n      for (var _j2 = _i9; _j2-- > 0;) {\n        var sv_j = sv[sv_off + _j2];\n        if (sv_j >= sv_i) break; // swap sv\n\n        sv[sv_off + _j2 + 1] = sv[sv_off + _j2];\n        sv[sv_off + _j2] = sv_i; // swap U and V rows\n\n        var rowJ = UV_off + N * _j2,\n            rowI = rowJ + N;\n\n        for (var _k2 = 0; _k2 < N; _k2++) {\n          var U_ik = U[rowI + _k2];\n          U[rowI + _k2] = U[rowJ + _k2];\n          U[rowJ + _k2] = U_ik;\n        }\n\n        for (var _k3 = 0; _k3 < N; _k3++) {\n          var V_ik = V[rowI + _k3];\n          V[rowI + _k3] = V[rowJ + _k3];\n          V[rowJ + _k3] = V_ik;\n        }\n      }\n    } // TRANSPOSE U IN-PLACE (TRANSPOSED FOR CACHE LOCALITY REASONS)\n\n\n    for (var _i10 = 0; _i10 < N - 1; _i10++) {\n      for (var _j3 = 1 + _i10; _j3 < N; _j3++) {\n        var ij = UV_off + N * _i10 + _j3,\n            ji = UV_off + N * _j3 + _i10,\n            U_ij = U[ij];\n        U[ij] = U[ji];\n        U[ji] = U_ij;\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, U), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape.slice(0, -1), sv), new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, V)];\n}\n\n//# sourceURL=webpack://nd/./src/la/svd_jac_2sided.js?");

/***/ }),

/***/ "./src/la/svd_jac_classic.js":
/*!***********************************!*\
  !*** ./src/la/svd_jac_classic.js ***!
  \***********************************/
/*! exports provided: svd_jac_classic */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"svd_jac_classic\", function() { return svd_jac_classic; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _matmul__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./matmul */ \"./src/la/matmul.js\");\n/* harmony import */ var _qr__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./qr */ \"./src/la/qr.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _transpose_inplace__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./transpose_inplace */ \"./src/la/transpose_inplace.js\");\n/* harmony import */ var _math__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../math */ \"./src/math.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\nfunction svd_jac_classic(A) {\n  A = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(A);\n  if (A.dtype.startsWith('complex')) throw new Error('svd_jac_1sided(A): A.dtype must be float.');\n  var shape = A.shape,\n      N = shape[shape.length - 2]; // QR DECOMPOSE RECTANGULAR MATRICES AND WORK ON (QUADRATIC) R\n\n  {\n    var M = shape[shape.length - 1]; // if A is not square use QR Decomposition\n\n    if (N > M) {\n      var _qr_decomp = Object(_qr__WEBPACK_IMPORTED_MODULE_4__[\"qr_decomp\"])(A),\n          _qr_decomp2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_qr_decomp, 2),\n          Q = _qr_decomp2[0],\n          R = _qr_decomp2[1],\n          _svd_jac_classic = svd_jac_classic(R),\n          _svd_jac_classic2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_svd_jac_classic, 3),\n          _U = _svd_jac_classic2[0],\n          _sv = _svd_jac_classic2[1],\n          _V = _svd_jac_classic2[2];\n\n      return [Object(_matmul__WEBPACK_IMPORTED_MODULE_3__[\"matmul2\"])(Q, _U), _sv, _V];\n    }\n\n    if (N < M) {\n      var _qr_decomp3 = Object(_qr__WEBPACK_IMPORTED_MODULE_4__[\"qr_decomp\"])(A.T),\n          _qr_decomp4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_qr_decomp3, 2),\n          _Q = _qr_decomp4[0],\n          _R = _qr_decomp4[1],\n          _svd_jac_classic3 = svd_jac_classic(_R),\n          _svd_jac_classic4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_svd_jac_classic3, 3),\n          _U2 = _svd_jac_classic4[0],\n          _sv2 = _svd_jac_classic4[1],\n          _V2 = _svd_jac_classic4[2];\n\n      Object(_transpose_inplace__WEBPACK_IMPORTED_MODULE_6__[\"transpose_inplace\"])(_V2);\n      return [_V2, _sv2, Object(_matmul__WEBPACK_IMPORTED_MODULE_3__[\"matmul2\"])(_Q, _U2).T];\n    }\n  } // ALLOCATE RESULT DATA\n\n  var DType = A.dtype === 'float32' ? 'float32' : 'float64',\n      DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_5__[\"ARRAY_TYPES\"][DType],\n      TOL = Object(_dt__WEBPACK_IMPORTED_MODULE_5__[\"eps\"])(DType),\n      U = DTypeArray.from(A.data);\n  A = undefined; // <- potentially allow GC\n\n  var D = new DTypeArray(N * N),\n      // <- tempory storage for decomposition\n  V = new DTypeArray(U.length),\n      sv = new DTypeArray(U.length / N);\n  if (1 > N) throw new Error('Assertion failed.');\n\n  if (1 == N) {\n    for (var i = U.length; i-- > 0;) {\n      if (U[i] < +0.0) {\n        U[i] *= -1.0;\n        sv[i] = -1.0;\n      } else sv[i] = +1.0;\n    }\n\n    return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, sv), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape.slice(0, -1), U), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, V.fill(1))];\n  } //\n  // BUILD TRIANGLE TREE\n  //\n  // the size of each level of the tree\n\n\n  var treeSizes = Int32Array.from(\n  /*#__PURE__*/\n  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n    var n;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            n = N;\n\n          case 1:\n            if (!(n > 1)) {\n              _context.next = 7;\n              break;\n            }\n\n            n = n + 1 >>> 1;\n            _context.next = 5;\n            return n;\n\n          case 5:\n            _context.next = 1;\n            break;\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  })());\n  var treeData = new DTypeArray(treeSizes.reduce(function (len, N) {\n    return len + (N * N + N >>> 1);\n  }, 0));\n  /** updates the specified row in the triangle tree.\n   */\n\n  var update_row = function update_row(row) {\n    row = row >>> 1 << 1; // <- round down to pow2\n    // build bottom tree level\n\n    for (var _i = row; _i < row + 2 && _i < N; _i++) {\n      var r = _i >>> 1,\n          off = r * r + r >>> 1;\n\n      for (var j = 0; j < row + 1; j++) {\n        var x = D[N * _i + j],\n            y = D[N * j + _i],\n            D_ij = _i === j ? -Infinity : x * x + y * y,\n            k = off + (j >>> 1);\n        treeData[k] = _i % 2 || j % 2 ? Math.max(treeData[k], D_ij) : D_ij;\n      }\n    } // build remaining tree levels\n\n\n    for (var _off = 0, h = 1; h < treeSizes.length; h++) {\n      var _N = treeSizes[h - 1],\n          OFF = _off;\n      _off += _N * _N + _N >>> 1;\n      row = row >>> 2 << 1;\n\n      for (var _R2 = row; _R2 < row + 2 && _R2 < _N; _R2++) {\n        var ROFF = OFF + (_R2 * _R2 + _R2 >>> 1),\n            _r = _R2 >>> 1,\n            roff = _off + (_r * _r + _r >>> 1);\n\n        for (var C = 0; C <= _R2; C++) {\n          var _k = roff + (C >>> 1),\n              T = treeData[ROFF + C];\n\n          treeData[_k] = _R2 % 2 || C % 2 ? Math.max(treeData[_k], T) : T;\n        }\n      }\n    }\n  };\n  /** updates the specified column in the triangle tree.\n   */\n\n\n  var update_col = function update_col(col) {\n    col = col >>> 1 << 1; // <- round down to pow2\n    // build bottom tree level\n\n    var J = Math.min(col + 2, N);\n\n    for (var _i2 = col; _i2 < N; _i2++) {\n      var r = _i2 >>> 1,\n          off = r * r + r >>> 1;\n\n      for (var j = col; j < J; j++) {\n        var x = D[N * _i2 + j],\n            y = D[N * j + _i2],\n            D_ij = _i2 === j ? -Infinity : x * x + y * y,\n            k = off + (j >>> 1);\n        treeData[k] = _i2 % 2 || j % 2 ? Math.max(treeData[k], D_ij) : D_ij;\n      }\n    } // build remaining tree levels\n\n\n    for (var _off2 = 0, h = 1; h < treeSizes.length; h++) {\n      col = col >>> 2 << 1;\n\n      var _N2 = treeSizes[h - 1],\n          _J = Math.min(col + 2, _N2),\n          OFF = _off2;\n\n      _off2 += _N2 * _N2 + _N2 >>> 1;\n\n      for (var _R3 = col; _R3 < _N2; _R3++) {\n        var ROFF = OFF + (_R3 * _R3 + _R3 >>> 1),\n            _r2 = _R3 >>> 1,\n            roff = _off2 + (_r2 * _r2 + _r2 >>> 1);\n\n        for (var C = col; C < _J && C <= _R3; C++) {\n          var _k2 = roff + (C >>> 1),\n              T = treeData[ROFF + C];\n\n          treeData[_k2] = _R3 % 2 || C % 2 ? Math.max(treeData[_k2], T) : T;\n        }\n      }\n    }\n  };\n\n  for (var UV_off = 0, sv_off = 0; sv_off < sv.length; UV_off += N * N, sv_off += N) {\n    // MOVE FROM U TO D\n    for (var _i3 = 0; _i3 < N; _i3++) {\n      for (var j = 0; j < N; j++) {\n        D[N * _i3 + j] = U[UV_off + N * _i3 + j];\n        U[UV_off + N * _i3 + j] = _i3 != j ? 0 : 1;\n      }\n    }\n\n    ; // INIT V TO IDENTITY\n\n    for (var _i4 = 0; _i4 < N; _i4++) {\n      for (var _j = 0; _j < N; _j++) {\n        V[UV_off + N * _i4 + _j] = _i4 != _j ? 0 : 1;\n      }\n    } // INIT TRIANGLE TREE\n\n\n    for (var _i5 = 0; _i5 < N; _i5 += 2) {\n      update_row(_i5);\n    } //\n    // (CLASSICAL) JACOBI SVD ITERATIONS\n    //\n\n\n    var nIter = 0;\n\n    var _loop = function _loop(_s, _t) {\n      // FIND THE OFF DIAGONAL PAIR WITH THE LARGEST HYPOTHENUSE\n      var k = void 0,\n          l = void 0;\n      {\n        (function () {\n          var i = 0,\n              j = 0;\n\n          var _loop2 = function _loop2(_off3, h) {\n            var val = function val(k, l) {\n              k += i;\n              l += j;\n              s = _s;\n              t = _t;\n              off = _off3;\n              return treeData[_off3 + (k * k + k >>> 1) + l];\n            };\n\n            var n = treeSizes[h];\n            _off3 -= n * n + n >>> 1;\n            var max = val(0, 0);\n            k = i;\n            l = j;\n\n            if (i + 1 < n) {\n              var v10 = val(1, 0);\n\n              if (v10 > max) {\n                max = v10;\n                k = i + 1;\n                l = j;\n              }\n\n              var v11 = val(1, 1);\n\n              if (v11 > max) {\n                max = v11;\n                k = i + 1;\n                l = j + 1;\n              }\n            }\n\n            if (i != j) {\n              var v01 = val(0, 1);\n\n              if (v01 > max) {\n                max = v01;\n                k = i;\n                l = j + 1;\n              }\n            }\n\n            i = 2 * k;\n            j = 2 * l;\n            off = _off3;\n          };\n\n          for (var off = treeData.length, h = treeSizes.length; h-- > 0;) {\n            _loop2(off, h);\n          }\n\n          var max = -Infinity;\n\n          var hyp = function hyp(s, t) {\n            s += i;\n            t += j;\n            var D_st = D[N * s + t],\n                D_ts = D[N * t + s];\n            s = _s;\n            t = _t;\n            return D_st * D_st + D_ts * D_ts;\n          };\n\n          if (i + 1 < N) {\n            var h10 = hyp(1, 0);\n\n            if (h10 > max) {\n              max = h10;\n              k = i + 1;\n              l = j;\n            }\n          }\n\n          if (j + 1 < N) {\n            var h01 = hyp(0, 1);\n\n            if (h01 > max) {\n              max = h01;\n              k = i;\n              l = j + 1;\n            }\n          }\n\n          if (i != j) {\n            var h00 = hyp(0, 0);\n\n            if (h00 > max) {\n              max = h00;\n              k = i;\n              l = j;\n            }\n\n            if (i + 1 < N) {\n              var h11 = hyp(1, 1);\n\n              if (h11 > max) {\n                k = i + 1;\n                l = j + 1;\n              }\n            }\n          }\n        })();\n      }\n      ;\n      if (l > k) throw new Error('Assertion failed.');\n\n      if (_s == k && _t == l) {\n        t = _t;\n        {\n          s = _s;\n          return \"break\";\n        }\n      } // <- DRY PRINCIPLE\n\n\n      _s = k;\n      _t = l; //      {\n      //        // CHECK THAT THIS IS TRULY THE MAXIMUM (TODO: COMMENT OUT)\n      //        const hyp = (i,j) => {\n      //          const D_ij = D[N*i+j],\n      //                D_ji = D[N*j+i]; return D_ij*D_ij + D_ji*D_ji;\n      //        };\n      //        for( let i=1; i < N; i++ )\n      //        for( let j=0; j < i; j++ )\n      //          if( ! (hyp(i,j) <= hyp(k,l)) ) throw new Error(`Assertion failed: ${i}, ${j}.`);\n      //      }\n\n      var D_kk = D[N * k + k],\n          D_kl = D[N * k + l],\n          D_lk = D[N * l + k],\n          D_ll = D[N * l + l]; //      if( ! ( Math.hypot(D_kl,D_lk) / Math.sqrt(Math.abs(D_kk)) / Math.sqrt(Math.abs(D_ll)) > TOL ) )\n\n      if (!(Math.hypot(D_kl, D_lk) / Math.max(Math.abs(D_kk), Math.abs(D_ll)) > TOL)) {\n        t = _t;\n        {\n          s = _s;\n          return \"break\";\n        }\n      } // <- TODO check if really a good stopping criterion (there may be smaller off-diag. entries larger relative to their respective diag. entries)\n      // determine rotation angles\n      // ┌                ┐ ┌            ┐ ┌                ┐   ┌        ┐\n      // │ cos(β) -sin(β) │ │ D_kk  D_kl │ │ cos(α) -sin(α) │ ! │ d1   0 │\n      // │                │ │            │ │                │ = │        │\n      // │ sin(β)  cos(β) │ │ D_lk  D_ll │ │ sin(α)  cos(α) │   │  0  d2 │\n      // └                ┘ └            ┘ └                ┘   └        ┘\n      //\n      // such that: |d1| >= |d2|\n      //\n      // => 0 = cos(α)*{D_kl*cos(β) - D_ll*sin(β)} + sin(α)*{D_kk*cos(β) - D_lk*sin(β)} = ½⋅{(D_ll - D_kk)⋅sin(α-β) - (D_kk + D_ll)⋅sin(α+β) + (D_kl + D_lk)⋅cos(α-β) + (D_kl - D_lk)⋅cos(α+β)}\n      //    0 = cos(α)*{D_kk*sin(β) + D_lk*cos(β)} - sin(α)*{D_kl*sin(β) + D_ll*cos(β)} = ½⋅{(D_ll - D_kk)⋅sin(α-β) + (D_kk + D_ll)⋅sin(α+β) + (D_kl + D_lk)⋅cos(α-β) - (D_kl - D_lk)⋅cos(α+β)}\n      //   d1 = cos(α)*{D_kk*cos(β) - D_lk*sin(β)} - sin(α)*{D_kl*cos(β) - D_ll*sin(β)}\n      //   d2 = cos(α)*{D_kl*sin(β) + D_ll*cos(β)} + sin(α)*{D_kk*sin(β) + D_lk*cos(β)}\n      //\n      // => 0 = {D_kl⋅cos(α) - D_kk⋅sin(α)}⋅cos(β) + {D_lk⋅sin(α) - D_ll⋅cos(α)}⋅sin(β)\n      //    0 = {D_kl⋅sin(α) + D_kk⋅cos(α)}⋅sin(β) + {D_lk⋅cos(α) + D_ll⋅sin(α)}⋅cos(β)\n      //   d1 = {D_kl⋅sin(α) + D_kk⋅cos(α)}⋅cos(β) + {D_lk⋅cos(α) - D_ll⋅sin(α)}⋅sin(β)\n      //   d2 = {D_kl⋅cos(α) - D_kk⋅sin(α)}⋅sin(β) + {D_lk⋅sin(α) + D_ll⋅cos(α)}⋅cos(β)\n      //\n      // => 0 = (D_kk+D_ll)⋅sin(α-β) + (D_kl-D_lk)⋅cos(α-β)  \n      //    0 = (D_kk-D_ll)⋅sin(α+β) + (D_kl+D_lk)⋅cos(α+β)  \n\n\n      var _ref = function () {\n        var Cα, Sα, Cβ, Sβ; // ANGLE COMPUTATION VARIANT A (SEE ASCII ART ABOVE)\n\n        {\n          var m = Math.atan2(D_lk - D_kl, D_ll + D_kk),\n              // = α - β\n          p = Math.atan2(D_lk + D_kl, D_ll - D_kk),\n              // = α + β\n          α = (p + m) / 2,\n              β = (p - m) / 2;\n          Cα = Math.cos(α);\n          Sα = Math.sin(α);\n          Cβ = Math.cos(β);\n          Sβ = Math.sin(β);\n        } //        // ANGLE COMPUTATION VARIANT B\n        //        { // FIRST, FIND GIVENS ROT. THAT SYMMETRIZES\n        //          //   see: see: https://github.com/eigenteam/eigen-git-mirror/blob/master/Eigen/src/misc/RealSvd2x2.h\n        //          let y = D_lk - D_kl,\n        //              Cγ = 1, d_kk=D_kk, d_kl=D_kl,\n        //              Sγ = 0, d_lk=D_lk, d_ll=D_ll;\n        //          if( 0 !== y ) {\n        //            const x = D_kk + D_ll,\n        //                  h = Math.hypot(x,y);\n        //            Cγ = +x / h;\n        //            Sγ = -y / h;\n        //            d_kk = Cγ*D_kk - Sγ*D_lk; d_kl = Cγ*D_kl - Sγ*D_ll;\n        //            d_lk = Sγ*D_kk + Cγ*D_lk; d_ll = Sγ*D_kl + Cγ*D_ll;\n        //            if( ! math.is_close(d_kl,d_lk) )\n        //              throw new Error(`Assertion failed: ${d_kl} =/= ${d_lk}`);\n        //          }\n        //          // SECOND, FIND JACOBI ROTATION TO SYMMETRIZED PROBLEM\n        //          // see:\n        //          //   * https://en.wikipedia.org/wiki/Jacobi_rotation\n        //          //   * https://github.com/eigenteam/eigen-git-mirror/blob/master/Eigen/src/Jacobi/Jacobi.h\n        //          d_kl *= 2\n        //          if( 0 === d_kl ) {\n        //            Sα = -Sγ;\n        //            Sβ = +Sγ; Cα = Cβ = Cγ;\n        //          } else {\n        //            const b = (d_ll - d_kk) / d_kl,\n        //                  t = Math.sign(b) / ( Math.abs(b) + Math.sqrt(1 + b*b) )\n        //            Cα = 1 / Math.sqrt(1 + t*t)\n        //            Sα = Cα*t\n        //            Cβ = Cα*Cγ - Sα*Sγ\n        //            Sβ = Cα*Sγ + Sα*Cγ\n        //          }\n        //        }\n        // tan is 180°-periodical so lets try all possible solutions\n\n        var _arr = [[Cα, Sα, Cβ, Sβ], // [p,m]+[  0°,  0°]\n        [-Sα, Cα, Sβ, -Cβ], // [p,m]+[  0°,180°]\n        [-Sα, Cα, -Sβ, Cβ], // [p,m]+[180°,  0°]\n        [-Cα, -Sα, Cβ, Sβ] // [p,m]+[180°,180°]\n        ];\n\n        for (var _i9 = 0; _i9 < _arr.length; _i9++) {\n          var _arr$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_arr[_i9], 4),\n              _c = _arr$_i[0],\n              _s2 = _arr$_i[1],\n              _c2 = _arr$_i[2],\n              _s3 = _arr$_i[3];\n\n          var d00 = (D_kl * _s2 + D_kk * _c) * _c2 + (D_lk * _c - D_ll * _s2) * _s3,\n              d11 = (D_kl * _c - D_kk * _s2) * _s3 + (D_lk * _s2 + D_ll * _c) * _c2; // ROTATE IN A WAY THAT ENSURES DESCENDING ORDER\n\n          if (d11 >= Math.abs(d00)) {\n            if (d00 >= -0.0) {\n              t = _t;\n              {\n                s = _s;\n                return [_c, _s2, _c2, _s3];\n              }\n            }\n\n            Cα = _c;\n            Sα = _s2;\n            Cβ = _c2;\n            Sβ = _s3;\n          }\n        }\n\n        s = _s;\n        t = _t;\n        return [Cα, Sα, Cβ, Sβ];\n      }(),\n          _ref2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_ref, 4),\n          cα = _ref2[0],\n          sα = _ref2[1],\n          cβ = _ref2[2],\n          sβ = _ref2[3]; // ROTATE COLUMNS IN D\n\n\n      for (var _i10 = N; _i10-- > 0;) {\n        var D_ik = D[N * _i10 + k],\n            D_il = D[N * _i10 + l];\n        D[N * _i10 + k] = D_ik * cα - D_il * sα;\n        D[N * _i10 + l] = D_il * cα + D_ik * sα;\n      } // ROTATE ROWS IN D\n\n\n      for (var _i11 = N; _i11-- > 0;) {\n        var D_ki = D[N * k + _i11],\n            D_li = D[N * l + _i11];\n        D[N * k + _i11] = D_ki * cβ - D_li * sβ;\n        D[N * l + _i11] = D_li * cβ + D_ki * sβ;\n      } //      if( ! math.is_close(0, D[N*k+l]) ) throw new Error(`Assertion failed: 0 =/= ${D[N*k+l]}.`)\n      //      if( ! math.is_close(0, D[N*l+k]) ) throw new Error(`Assertion failed: 0 =/= ${D[N*l+k]}.`)\n      // ENTRIES (k,l) AND (l,k) ARE REMAINDERS (CANCELLATION ERROR) FROM ELIMINATION => SHOULD BE SAFELY ZEROABLE\n\n\n      D[N * k + l] = 0.0;\n      D[N * l + k] = 0.0; // UPDATE TRIANGLE TREE ROWS AND COLUMNS\n\n      update_row(k);\n      update_row(l);\n      update_col(k);\n      update_col(l); // ROTATE ROWS IN U (TRANSPOSED FOR CACHE LOCALITY REASONS)\n\n      for (var _i12 = 0; _i12 < N; _i12++) {\n        var ki = UV_off + N * k + _i12,\n            U_ki = U[ki],\n            li = UV_off + N * l + _i12,\n            U_li = U[li];\n        U[ki] = U_ki * cβ - U_li * sβ;\n        U[li] = U_li * cβ + U_ki * sβ;\n      } // ROTATE ROWS IN V\n\n\n      for (var _i13 = 0; _i13 < N; _i13++) {\n        var _ki = UV_off + N * k + _i13,\n            V_ki = V[_ki],\n            _li = UV_off + N * l + _i13,\n            V_li = V[_li];\n\n        V[_ki] = V_ki * cα - V_li * sα;\n        V[_li] = V_li * cα + V_ki * sα;\n      }\n\n      s = _s;\n      t = _t;\n    };\n\n    for (var s = -1, t = -1;; nIter++) {\n      var _ret = _loop(s, t);\n\n      if (_ret === \"break\") break;\n    } //    console.log('Sweep ratio:', nIter / (N*N-N) )\n    // MOVE D TO SV\n\n\n    for (var _i6 = 0; _i6 < N; _i6++) {\n      sv[sv_off + _i6] = D[N * _i6 + _i6];\n    } //    // SHUFFLE (FIXME: FOR TESTING PURPOSED ONLY)\n    //    for( let i=N; i-- > 0; )\n    //    {\n    //      const j = Math.trunc( Math.random()*(i+1) );\n    //      // swap sv\n    //      { const sv_j = sv[sv_off + j];\n    //                     sv[sv_off + j] = sv[sv_off + i];\n    //                                      sv[sv_off + i] = sv_j; }\n    //      // swap U and V rows\n    //      for( let k=0; k < N; k++ ) { const U_a = U[UV_off + N*i+k]; U[UV_off + N*i+k] = U[UV_off + N*j+k]; U[UV_off + N*j+k] = U_a; }\n    //      for( let k=0; k < N; k++ ) { const V_a = V[UV_off + N*i+k]; V[UV_off + N*i+k] = V[UV_off + N*j+k]; V[UV_off + N*j+k] = V_a; }\n    //    }\n    // USE INSERTION SORT SV (should take as most O(N) because it is heavily pre-sorted by choosing the rotation angles accordingly)\n\n\n    for (var _i7 = 0; _i7 < N; _i7++) {\n      var sv_i = sv[sv_off + _i7]; // flip sign\n\n      if (sv_i < 0.0) {\n        sv[sv_off + _i7] = sv_i *= -1;\n\n        for (var k = 0; k < N; k++) {\n          U[UV_off + N * _i7 + k] *= -1;\n        }\n      } // insertion sort\n\n\n      for (var _j2 = _i7; _j2-- > 0;) {\n        var sv_j = sv[sv_off + _j2];\n        if (sv_j >= sv_i) break; // swap sv\n\n        sv[sv_off + _j2 + 1] = sv[sv_off + _j2];\n        sv[sv_off + _j2] = sv_i; // swap U and V rows\n\n        var rowJ = UV_off + N * _j2,\n            rowI = rowJ + N;\n\n        for (var _k3 = 0; _k3 < N; _k3++) {\n          var U_ik = U[rowI + _k3];\n          U[rowI + _k3] = U[rowJ + _k3];\n          U[rowJ + _k3] = U_ik;\n        }\n\n        for (var _k4 = 0; _k4 < N; _k4++) {\n          var V_ik = V[rowI + _k4];\n          V[rowI + _k4] = V[rowJ + _k4];\n          V[rowJ + _k4] = V_ik;\n        }\n      }\n    } // TRANSPOSE U IN-PLACE (TRANSPOSED FOR CACHE LOCALITY REASONS)\n\n\n    for (var _i8 = 0; _i8 < N - 1; _i8++) {\n      for (var _j3 = 1 + _i8; _j3 < N; _j3++) {\n        var ij = UV_off + N * _i8 + _j3,\n            ji = UV_off + N * _j3 + _i8,\n            U_ij = U[ij];\n        U[ij] = U[ji];\n        U[ji] = U_ij;\n      }\n    }\n  }\n\n  return [new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, U), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape.slice(0, -1), sv), new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, V)];\n}\n\n//# sourceURL=webpack://nd/./src/la/svd_jac_classic.js?");

/***/ }),

/***/ "./src/la/transpose_inplace.js":
/*!*************************************!*\
  !*** ./src/la/transpose_inplace.js ***!
  \*************************************/
/*! exports provided: transpose_inplace */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"transpose_inplace\", function() { return transpose_inplace; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction transpose_inplace(A) {\n  var _A$shape$slice = A.shape.slice(-2),\n      _A$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_A$shape$slice, 2),\n      N = _A$shape$slice2[0],\n      M = _A$shape$slice2[1];\n\n  if (N != M) throw new Error('In-place transposition is only supported for square matrices.');\n  A = A.data;\n\n  for (var off = 0; off < A.length; off += N * N) {\n    for (var i = 0; i < N - 1; i++) {\n      for (var j = 1 + i; j < N; j++) {\n        var ij = off + N * i + j,\n            ji = off + N * j + i,\n            A_ij = A[ij];\n        A[ij] = A[ji];\n        A[ji] = A_ij;\n      }\n    }\n  }\n}\n\n//# sourceURL=webpack://nd/./src/la/transpose_inplace.js?");

/***/ }),

/***/ "./src/la/tri.js":
/*!***********************!*\
  !*** ./src/la/tri.js ***!
  \***********************/
/*! exports provided: tril, triu, tril_solve, triu_solve */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tril\", function() { return tril; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"triu\", function() { return triu; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tril_solve\", function() { return tril_solve; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"triu_solve\", function() { return triu_solve; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction tril(m) {\n  var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  m = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(m);\n  if (m.ndim < 2) throw new Error('Input must be at least 2D.');\n  return m.mapElems(m.dtype, function (x) {\n    for (var _len = arguments.length, indices = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      indices[_key - 1] = arguments[_key];\n    }\n\n    var _indices$slice = indices.slice(-2),\n        _indices$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_indices$slice, 2),\n        i = _indices$slice2[0],\n        j = _indices$slice2[1];\n\n    return i < j - k ? 0 : x;\n  });\n}\nfunction triu(m) {\n  var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  m = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(m);\n  if (m.ndim < 2) throw new Error('Input must be at least 2D.');\n  return m.mapElems(m.dtype, function (x) {\n    for (var _len2 = arguments.length, indices = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      indices[_key2 - 1] = arguments[_key2];\n    }\n\n    var _indices$slice3 = indices.slice(-2),\n        _indices$slice4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_indices$slice3, 2),\n        i = _indices$slice4[0],\n        j = _indices$slice4[1];\n\n    return i > j - k ? 0 : x;\n  });\n}\nfunction tril_solve(L, y) {\n  L = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(L);\n  if (L.ndim < 2) throw new Error('tril_solve(L,y): L.ndim must be at least 2.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('tril_solve(L,y): y.ndim must be at least 2.');\n\n  var _L$shape$slice = L.shape.slice(-2),\n      _L$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_L$shape$slice, 2),\n      N = _L$shape$slice2[0],\n      M = _L$shape$slice2[1],\n      _y$shape$slice = y.shape.slice(-2),\n      _y$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice, 2),\n      I = _y$shape$slice2[0],\n      J = _y$shape$slice2[1];\n\n  if (N != M) throw new Error('Last two dimensions of L must be quadratic.');\n  if (I != M) throw new Error(\"L and y don't match.\");\n  var ndim = Math.max(L.ndim, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr = [L, y];\n\n  for (var _i = 0; _i < _arr.length; _i++) {\n    var arr = _arr[_i];\n\n    for (var i = ndim - 2, j = arr.ndim - 2; i-- > 0 && j-- > 0;) {\n      if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n    }\n  } // GENERATE RESULT DATA\n\n\n  var dtype = [L, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64',\n      x_dat = new _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      L_dat = L.data,\n      y_dat = y.data;\n  var L_off = 0,\n      L_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      L_stride = N * N;\n      y_stride = N * J; // COPYING y\n\n      for (var i = 0; i < y_stride; i++) {\n        x_dat[x_off + i] = y_dat[y_off + i];\n      } // FORWARD SUBSTITUTION\n\n\n      for (var _i2 = 0; _i2 < I; _i2++) {\n        for (var j = 0; j < J; j++) {\n          for (var k = 0; k < _i2; k++) {\n            x_dat[x_off + _i2 * J + j] -= L_dat[L_off + N * _i2 + k] * x_dat[x_off + k * J + j];\n          }\n\n          x_dat[x_off + _i2 * J + j] /= L_dat[L_off + N * _i2 + _i2];\n        }\n      }\n\n      L_off += L_stride;\n      y_off += y_stride;\n      x_off += y_stride;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(L.shape[d - ndim + L.ndim] > 1)) L_off -= L_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    L_stride *= L.shape[d - ndim + L.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, x_dat);\n}\nfunction triu_solve(U, y) {\n  U = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(U);\n  if (U.ndim < 2) throw new Error('triu_solve(U,y): U.ndim must be at least 2.');\n  y = Object(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"])(y);\n  if (y.ndim < 2) throw new Error('triu_solve(U,y): y.ndim must be at least 2.');\n\n  var _U$shape$slice = U.shape.slice(-2),\n      _U$shape$slice2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_U$shape$slice, 2),\n      K = _U$shape$slice2[0],\n      N = _U$shape$slice2[1],\n      _y$shape$slice3 = y.shape.slice(-2),\n      _y$shape$slice4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_y$shape$slice3, 2),\n      I = _y$shape$slice4[0],\n      J = _y$shape$slice4[1];\n\n  if (K != N) throw new Error('Last two dimensions of U must be quadratic.');\n  if (I != N) throw new Error(\"U and y don't match.\");\n  var ndim = Math.max(U.ndim, y.ndim),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  });\n  shape[ndim - 2] = I;\n  shape[ndim - 1] = J; // FIND COMMON (BROADCASTED) SHAPE\n\n  var _arr2 = [U, y];\n\n  for (var _i3 = 0; _i3 < _arr2.length; _i3++) {\n    var arr = _arr2[_i3];\n\n    for (var i = ndim - 2, j = arr.ndim - 2; i-- > 0 && j-- > 0;) {\n      if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n    }\n  } // GENERATE RESULT DATA\n\n\n  var dtype = [U, y].every(function (a) {\n    return a.dtype === 'float32';\n  }) ? 'float32' : 'float64',\n      x_dat = new _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  })),\n      U_dat = U.data,\n      y_dat = y.data;\n  var U_off = 0,\n      U_stride = 1,\n      y_off = 0,\n      y_stride = 1,\n      x_off = 0;\n\n  function solv(d) {\n    if (d === ndim - 2) {\n      U_stride = N * N;\n      y_stride = N * J; // COPYING y\n\n      for (var i = 0; i < y_stride; i++) {\n        x_dat[x_off + i] = y_dat[y_off + i];\n      } // BACKWARD SUBSTITUTION\n\n\n      for (var _i4 = I; _i4-- > 0;) {\n        for (var j = J; j-- > 0;) {\n          for (var k = K; --k > _i4;) {\n            x_dat[x_off + _i4 * J + j] -= U_dat[U_off + N * _i4 + k] * x_dat[x_off + k * J + j];\n          }\n\n          x_dat[x_off + _i4 * J + j] /= U_dat[U_off + N * _i4 + _i4];\n        }\n      }\n\n      U_off += U_stride;\n      y_off += y_stride;\n      x_off += y_stride;\n      return;\n    }\n\n    for (var l = shape[d];; l--) {\n      solv(d + 1);\n      if (l == 1) break;\n      if (!(U.shape[d - ndim + U.ndim] > 1)) U_off -= U_stride;\n      if (!(y.shape[d - ndim + y.ndim] > 1)) y_off -= y_stride;\n    }\n\n    U_stride *= U.shape[d - ndim + U.ndim] || 1;\n    y_stride *= y.shape[d - ndim + y.ndim] || 1;\n  }\n\n  solv(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, x_dat);\n}\n\n//# sourceURL=webpack://nd/./src/la/tri.js?");

/***/ }),

/***/ "./src/math.js":
/*!*********************!*\
  !*** ./src/math.js ***!
  \*********************/
/*! exports provided: math, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"math\", function() { return math; });\n/* harmony import */ var _dt_complex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dt/complex */ \"./src/dt/complex.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nvar math = {\n  nextUp: function nextUp(x) {\n    // FIXME implement this completely\n    // https://gist.github.com/Yaffle/4654250\n    var EPSILON = Number.EPSILON,\n        MIN_VALUE = Number.MIN_VALUE;\n    var y = x * (x < 0 ? 1 - EPSILON / 2 : 1 + EPSILON);\n    if (!isFinite(x)) throw new Error('Assertion failed!');\n    if (!isFinite(y)) throw new Error('Assertion failed!');\n    if (y === x) y += MIN_VALUE;\n    var b = x + (y - x) / 2;\n\n    if (x < b && b < y) {\n      y = b;\n    }\n\n    var c = (y + x) / 2;\n\n    if (x < c && c < y) {\n      y = c;\n    }\n\n    return y === 0 ? -0 : y;\n  },\n  add: function add(x, y) {\n    if (x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return x.add(y);\n    if (y instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return y.add(x);\n    return x + y;\n  },\n  sub: function sub(x, y) {\n    if (x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return x.sub(y);\n    if (y instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return new _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"](x).sub(y);\n    return x - y;\n  },\n  mul: function mul(x, y) {\n    if (x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return x.mul(y);\n    if (y instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return y.mul(x);\n    return x * y;\n  },\n  div: function div(x, y) {\n    if (x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return x.div(y);\n    if (y instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return new _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"](x).div(y);\n    return x / y;\n  },\n  zero: function zero(dtype) {\n    return math.cast(0, dtype);\n  },\n  one: function one(dtype) {\n    return math.cast(1, dtype);\n  },\n  neg: function neg(x) {\n    return x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x.neg() : -x;\n  },\n  abs: function abs(x) {\n    return x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x.abs() : Math.abs(x);\n  },\n  sqrt: function sqrt(x) {\n    return x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x.sqrt() : x >= 0 ? Math.sqrt(x) : new _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"](x).sqrt();\n  },\n  exp: function exp(x) {\n    return x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x.exp() : Math.exp(x);\n  },\n  min: function min(x, y) {\n    return Math.min(x, y);\n  },\n  max: function max(x, y) {\n    return Math.max(x, y);\n  },\n  hypot: function hypot(x, y) {\n    return Math.hypot(x, y);\n  },\n  atan2: function atan2(x, y) {\n    return Math.atan2(x, y);\n  },\n  conj: function conj(x) {\n    return x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"] ? x.conj() : x;\n  },\n  is_equal: function is_equal(x, y) {\n    if (x instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return x.equals(y);\n    if (y instanceof _dt_complex__WEBPACK_IMPORTED_MODULE_0__[\"Complex\"]) return y.equals(x);\n    return x == y;\n  },\n  is_close: function is_close(x, y) {\n    var atol = 1e-8,\n        rtol = 1e-5,\n        tol = atol + rtol * math.max(math.abs(x), math.abs(y));\n    return math.abs(math.sub(x, y)) <= tol;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (math);\n\n//# sourceURL=webpack://nd/./src/math.js?");

/***/ }),

/***/ "./src/nd_array.js":
/*!*************************!*\
  !*** ./src/nd_array.js ***!
  \*************************/
/*! exports provided: array, asarray, NDArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"array\", function() { return array; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"asarray\", function() { return asarray; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NDArray\", function() { return NDArray; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/createClass */ \"./node_modules/@babel/runtime/helpers/createClass.js\");\n/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime/helpers/wrapNativeSuper */ \"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js\");\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime/helpers/typeof */ \"./node_modules/@babel/runtime/helpers/typeof.js\");\n/* harmony import */ var _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _zip_elems__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./zip_elems */ \"./src/zip_elems.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n\n\n\n\nfunction array(dtype, content) {\n  var _marked =\n  /*#__PURE__*/\n  _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(shape);\n\n  if (null == content) {\n    content = dtype;\n    dtype = undefined;\n  }\n\n  if ('object' == _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8___default()(content) && 'shape' in content && 'data' in content) {\n    var _data = content.data;\n    if (null != dtype && !(_data instanceof _dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"][dtype])) _data = _dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"][dtype].from(_data);\n    return new NDArray(content.shape, _data.slice());\n  }\n\n  function shape(content) {\n    var len;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function shape$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!('object' === _babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_8___default()(content) && 'length' in content)) {\n              _context.next = 7;\n              break;\n            }\n\n            len = content.length;\n\n            if (!(typeof len !== 'number' || !(len % 1 === 0) || len === 0)) {\n              _context.next = 4;\n              break;\n            }\n\n            throw 'Illegal argument(s).';\n\n          case 4:\n            _context.next = 6;\n            return len;\n\n          case 6:\n            return _context.delegateYield(shape(content[0]), \"t0\", 7);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _marked, this);\n  }\n\n  shape = Int32Array.from(shape(content));\n  if (null == dtype) dtype = function dtype(d, content) {\n    if (d === shape.length) return Object(_dt__WEBPACK_IMPORTED_MODULE_10__[\"dtypeof\"])(content);else {\n      var j = shape[d] - 1,\n          dt = dtype(d + 1, content[j]);\n\n      for (; j >= 0; j--) {\n        dt = Object(_dt__WEBPACK_IMPORTED_MODULE_10__[\"super_dtype\"])(dt, dtype(d + 1, content[j]));\n      }\n\n      return dt;\n    }\n  }(0, content);\n\n  Object(_dt__WEBPACK_IMPORTED_MODULE_10__[\"_check_dtype\"])(dtype);\n\n  var data = new _dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  }, 1));\n  var idx = 0;\n\n  function fill(d, content) {\n    if (d === shape.length) data[idx++] = content;else {\n      if (content.length !== shape[d]) throw new Error('Nested array not axis-aligned.');\n\n      for (var j = 0; j < shape[d]; j++) {\n        fill(d + 1, content[j]);\n      }\n    }\n  }\n\n  fill(0, content);\n  return new NDArray(shape, data);\n}\nfunction asarray(arrayLike) // <- TODO: add dtype\n{\n  if (arrayLike instanceof NDArray) return arrayLike;\n  return array(arrayLike);\n}\nvar NDArray =\n/*#__PURE__*/\nfunction (_Function) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(NDArray, _Function);\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(NDArray, null, [{\n    key: \"name\",\n    get: function get() {\n      return 'nd.Array';\n    } //\n    // FACTORY METHODS\n    //\n\n  }]);\n\n  function NDArray(shape, data) {\n    var _this;\n\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default()(this, NDArray);\n\n    if (!(shape instanceof Int32Array)) throw new Error('Shape must be Int32Array.');\n    if (shape.some(function (s) {\n      return s < 1;\n    })) throw new Error(\"Invalid shape: \".concat(shape, \".\"));\n    if (data.length != shape.reduce(function (x, y) {\n      return x * y;\n    }, 1)) throw new Error(\"Shape [\".concat(shape, \"] does not match array length of \").concat(data.length, \".\"));\n\n    var self = function self() {\n      for (var _len = arguments.length, indices = new Array(_len), _key = 0; _key < _len; _key++) {\n        indices[_key] = arguments[_key];\n      }\n\n      return self.data[self._flat_idx(indices)];\n    };\n\n    Object.setPrototypeOf(self, NDArray.prototype);\n    Object.freeze(shape.buffer);\n    self.shape = shape;\n    self.data = data;\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(_this, self);\n  } //\n  // GENERAL\n  //\n\n\n  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_4___default()(NDArray, [{\n    key: \"set\",\n    //    TODO implements this in combination with a PROXY\n    //    get length() {\n    //      return this.shape[0];\n    //    }\n    value: function set(indices, value) {\n      this.data[this._flat_idx(indices)] = value;\n    }\n  }, {\n    key: \"modify\",\n    value: function modify(indices, modifier) {\n      var i = this._flat_idx(indices);\n\n      this.data[i] = modifier.apply(void 0, [this.data[i]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(indices)));\n    }\n  }, {\n    key: \"_flat_idx\",\n    value: function _flat_idx(indices) {\n      var shape = this.shape;\n      if (indices.length != shape.length) throw new Error(\"Multi-index [\".concat(indices, \"] does not have expected length of \").concat(shape.length, \".\"));\n      var flat_idx = 0,\n          stride = 1;\n\n      for (var i = shape.length; i-- > 0; stride *= shape[i]) {\n        var idx = indices[i];\n        if (idx % 1 != 0) throw new Error(\"Multi-index [\".concat(indices, \"] contains non-integer entries.\"));\n        if (idx < 0) idx += shape[i];\n        if (idx < 0 || idx >= shape[i]) throw new Error(\"Multi-index [\".concat(indices, \"] out of bounds [\").concat(shape, \"].\"));\n        flat_idx += idx * stride;\n      }\n\n      return flat_idx;\n    }\n  }, {\n    key: Symbol.for('nodejs.util.inspect.custom'),\n    value: function value(depth, options) {\n      return this.toString();\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var _marked2 =\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(entries),\n          _marked3 =\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(str);\n\n      var max_len_fn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (d, shape) {\n        return d >= shape.length - 2 ? 6 : 6;\n      };\n\n      if (!(max_len_fn instanceof Function)) {\n        var max_len = max_len_fn * 1;\n\n        max_len_fn = function max_len_fn() {\n          return max_len;\n        };\n      }\n\n      var shape = this.shape,\n          data = this.data,\n          strides = new Int32Array(shape.length);\n      strides[strides.length - 1] = 1;\n\n      for (var i = strides.length; --i > 0;) {\n        strides[i - 1] = strides[i] * shape[i];\n      }\n      /** Collects the String representations of all (displayed) entries.\n       */\n\n\n      function entries(d, idx) {\n        var max_len, last, first, data_idx, j, _j, _j2;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function entries$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                max_len = max_len_fn(d, shape), last = max_len >>> 1, first = max_len - last;\n\n                if (!(shape.length === d)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                data_idx = data[idx];\n                _context2.t0 = data_idx;\n                _context2.next = _context2.t0 === null ? 6 : _context2.t0 === undefined ? 9 : 12;\n                break;\n\n              case 6:\n                _context2.next = 8;\n                return 'null';\n\n              case 8:\n                return _context2.abrupt(\"break\", 14);\n\n              case 9:\n                _context2.next = 11;\n                return 'undefined';\n\n              case 11:\n                return _context2.abrupt(\"break\", 14);\n\n              case 12:\n                _context2.next = 14;\n                return data_idx.toString();\n\n              case 14:\n                _context2.next = 37;\n                break;\n\n              case 16:\n                if (!(shape[d] > max_len + 1)) {\n                  _context2.next = 31;\n                  break;\n                }\n\n                j = 0;\n\n              case 18:\n                if (!(j < first)) {\n                  _context2.next = 23;\n                  break;\n                }\n\n                return _context2.delegateYield(entries(d + 1, idx + j * strides[d]), \"t1\", 20);\n\n              case 20:\n                j++;\n                _context2.next = 18;\n                break;\n\n              case 23:\n                _j = shape[d] - last;\n\n              case 24:\n                if (!(_j < shape[d])) {\n                  _context2.next = 29;\n                  break;\n                }\n\n                return _context2.delegateYield(entries(d + 1, idx + _j * strides[d]), \"t2\", 26);\n\n              case 26:\n                _j++;\n                _context2.next = 24;\n                break;\n\n              case 29:\n                _context2.next = 37;\n                break;\n\n              case 31:\n                _j2 = 0;\n\n              case 32:\n                if (!(_j2 < shape[d])) {\n                  _context2.next = 37;\n                  break;\n                }\n\n                return _context2.delegateYield(entries(d + 1, idx + _j2 * strides[d]), \"t3\", 34);\n\n              case 34:\n                _j2++;\n                _context2.next = 32;\n                break;\n\n              case 37:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _marked2, this);\n      }\n\n      entries = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(entries(0, 0)); // pad all entries to the same string length\n\n      if (this.ndim > 1) {\n        var padLen = entries.reduce(function (a, b) {\n          return Math.max(a, b.length);\n        }, 0);\n        entries = entries.map(function (e) {\n          return e.padStart(padLen);\n        });\n      }\n\n      var iEntries = 0;\n\n      function str(indent, d, idx) {\n        var prefix, infix, suffix, max_len, last, first, j, _j3, _j4;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function str$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(shape.length === d)) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                _context3.next = 3;\n                return entries[iEntries++];\n\n              case 3:\n                return _context3.abrupt(\"return\");\n\n              case 4:\n                indent += ' ';\n                prefix = '[ ', infix = ', ', suffix = ' ]';\n\n                if (d < shape.length - 1) {\n                  infix = ',\\n' + indent;\n                  prefix = '[';\n                  suffix = ']';\n                }\n\n                _context3.next = 9;\n                return prefix;\n\n              case 9:\n                max_len = max_len_fn(d, shape), last = max_len >>> 1, first = max_len - last;\n\n                if (!(shape[d] > max_len + 1)) {\n                  _context3.next = 31;\n                  break;\n                }\n\n                j = 0;\n\n              case 12:\n                if (!(j < first)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                return _context3.delegateYield(str(indent, d + 1, idx + j * strides[d]), \"t0\", 14);\n\n              case 14:\n                _context3.next = 16;\n                return infix;\n\n              case 16:\n                j++;\n                _context3.next = 12;\n                break;\n\n              case 19:\n                _context3.next = 21;\n                return \"...\".concat(shape[d] - max_len, \" more...\");\n\n              case 21:\n                _j3 = shape[d] - last;\n\n              case 22:\n                if (!(_j3 < shape[d])) {\n                  _context3.next = 29;\n                  break;\n                }\n\n                _context3.next = 25;\n                return infix;\n\n              case 25:\n                return _context3.delegateYield(str(indent, d + 1, idx + _j3 * strides[d]), \"t1\", 26);\n\n              case 26:\n                _j3++;\n                _context3.next = 22;\n                break;\n\n              case 29:\n                _context3.next = 40;\n                break;\n\n              case 31:\n                _j4 = 0;\n\n              case 32:\n                if (!(_j4 < shape[d])) {\n                  _context3.next = 40;\n                  break;\n                }\n\n                if (!(_j4 > 0)) {\n                  _context3.next = 36;\n                  break;\n                }\n\n                _context3.next = 36;\n                return infix;\n\n              case 36:\n                return _context3.delegateYield(str(indent, d + 1, idx + _j4 * strides[d]), \"t2\", 37);\n\n              case 37:\n                _j4++;\n                _context3.next = 32;\n                break;\n\n              case 40:\n                _context3.next = 42;\n                return suffix;\n\n              case 42:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _marked3, this);\n      }\n\n      return _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(str('', 0, 0)).join('');\n    } //\n    // ITERATION\n    //\n\n  }, {\n    key: Symbol.iterator,\n    value:\n    /*#__PURE__*/\n    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function value() {\n      var shape, stride, i;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function value$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              shape = this.shape.slice(1), stride = shape.reduce(function (a, b) {\n                return a * b;\n              }, 1);\n              i = 0;\n\n            case 2:\n              if (!(i < this.data.length)) {\n                _context4.next = 7;\n                break;\n              }\n\n              _context4.next = 5;\n              return new NDArray(shape, this.data.slice(i, i += stride));\n\n            case 5:\n              _context4.next = 2;\n              break;\n\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, value, this);\n    })\n  }, {\n    key: \"forEach\",\n    value: function forEach(consumer) {\n      var len = this.shape[0],\n          shape = this.shape.slice(1),\n          stride = shape.reduce(function (a, b) {\n        return a * b;\n      }, 1);\n\n      for (var i = 0, idx = 0; i < len; i++, idx += stride) {\n        consumer(new NDArray(shape, this.data.slice(idx, idx + stride)), i);\n      }\n    }\n  }, {\n    key: \"elems\",\n    value:\n    /*#__PURE__*/\n    _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function elems() {\n      var _marked4, shape, data, multi_idx, flat_idx, elems;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function elems$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              elems = function _ref(d) {\n                return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function elems$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        if (!(d === shape.length)) {\n                          _context5.next = 5;\n                          break;\n                        }\n\n                        _context5.next = 3;\n                        return [multi_idx.slice(), data[flat_idx++]];\n\n                      case 3:\n                        _context5.next = 11;\n                        break;\n\n                      case 5:\n                        multi_idx[d] = 0;\n\n                      case 6:\n                        if (!(multi_idx[d] < shape[d])) {\n                          _context5.next = 11;\n                          break;\n                        }\n\n                        return _context5.delegateYield(elems(d + 1), \"t0\", 8);\n\n                      case 8:\n                        multi_idx[d]++;\n                        _context5.next = 6;\n                        break;\n\n                      case 11:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }\n                }, _marked4, this);\n              };\n\n              _marked4 =\n              /*#__PURE__*/\n              _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(elems);\n              shape = this.shape, data = this.data, multi_idx = new Int32Array(shape.length); // <- index in result\n\n              flat_idx = 0;\n              return _context6.delegateYield(elems(0), \"t0\", 5);\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, elems, this);\n    })\n  }, {\n    key: \"forElems\",\n    value: function forElems(consumer) {\n      var shape = this.shape,\n          data = this.data,\n          multi_idx = new Int32Array(shape.length); // <- index in result\n\n      var flat_idx = 0;\n\n      function forEntries(d) {\n        if (d === shape.length) consumer.apply(void 0, [data[flat_idx++]].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(multi_idx)));else for (multi_idx[d] = 0; multi_idx[d] < shape[d]; multi_idx[d]++) {\n          forEntries(d + 1);\n        }\n      }\n\n      forEntries(0);\n    } //\n    // TRANSFORMATION\n    //\n\n  }, {\n    key: \"valueOf\",\n    value: function valueOf() {\n      if (this.shape.length === 0) return this.data[0];\n      return this;\n    }\n  }, {\n    key: \"mapElems\",\n    value: function mapElems(dtype, mapper) {\n      if (null == mapper && dtype instanceof Function) {\n        mapper = dtype;\n        dtype = undefined;\n      }\n\n      if (null == mapper) mapper = function mapper(x) {\n        return x;\n      };\n      return Object(_zip_elems__WEBPACK_IMPORTED_MODULE_9__[\"zip_elems\"])([this], dtype, mapper);\n    }\n  }, {\n    key: \"transpose\",\n    value: function transpose() // <- TODO allow for ellipsis '...' as input\n    {\n      for (var _len2 = arguments.length, axes = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        axes[_key2] = arguments[_key2];\n      }\n\n      axes = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default()(axes);\n      var newShape = Int32Array.from(this.shape),\n          ndim = newShape.length;\n      var strides = new Int32Array(ndim);\n      if (ndim > 0) strides[ndim - 1] = 1;\n\n      for (var i = ndim; --i > 0;) {\n        strides[i - 1] = newShape[i] * strides[i];\n      } // BY DEFAULT THE LAST 2 AXES ARE SWAPPED\n\n\n      if (axes.length == 0) {\n        if (ndim <= 1) return this.sliceElems();\n        newShape[ndim - 2] = this.shape[ndim - 1];\n        newShape[ndim - 1] = this.shape[ndim - 2];\n        var tmp = strides[ndim - 2];\n        strides[ndim - 2] = strides[ndim - 1];\n        strides[ndim - 1] = tmp;\n      } // \n      else {\n          var set = new Set(axes),\n              _strides = strides;\n          strides = new Int32Array(ndim);\n          if (set.size != axes.length) throw new Error('Duplicate axes are not allowed.');\n\n          for (var _i = axes.length; _i-- > 0;) {\n            var j = axes[_i];\n            if (0 > j || j >= ndim) throw new Error('Axis out of bounds.');\n            newShape[_i] = this.shape[j];\n            strides[_i] = _strides[j];\n          } // COMPLETE WITH REMAINING/MISSING/IMPLIED INDICES\n\n\n          for (var _i2 = 0, _j5 = set.size; _i2 < ndim; _i2++) {\n            if (!set.has(_i2)) {\n              newShape[_j5] = this.shape[_i2];\n              strides[_j5++] = _strides[_i2];\n            }\n          }\n        }\n\n      var oldData = this.data,\n          newData = new oldData.__proto__.constructor(oldData.length);\n      var newI = oldData.length;\n\n      function copy(d, oldI) {\n        if (ndim > d) for (var _i3 = newShape[d]; _i3-- > 0; oldI -= strides[d]) {\n          copy(d + 1, oldI);\n        } else newData[--newI] = oldData[oldI];\n      }\n\n      copy(0, newI - 1);\n      return new NDArray(newShape, newData);\n    }\n  }, {\n    key: \"reshape\",\n    value: function reshape() {\n      for (var _len3 = arguments.length, shape = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        shape[_key3] = arguments[_key3];\n      }\n\n      shape = Int32Array.from(shape);\n      var len = this.data.length;\n      var rest = 1,\n          infer = -1;\n\n      for (var i = shape.length; --i >= 0;) {\n        if (shape[i] < 0) {\n          if (shape[i] !== -1) throw new Error('Invalid dimension: ' + shape[i]);\n          if (infer !== -1) throw new Error('At most on dimension may be -1.');\n          infer = i;\n        } else rest *= shape[i];\n      }\n\n      if (infer !== -1) {\n        if (0 !== len % rest) throw new Error('Shape cannot be inferred.');\n        shape[infer] = len / rest;\n      }\n\n      return new NDArray(shape, this.data);\n    }\n  }, {\n    key: \"reduceElems\",\n    value: function reduceElems(axes, dtype, reducer) {\n      if (null == reducer) {\n        if (null == dtype) return this.data.reduce(axes);\n        if ('string' === typeof axes) return this.data.reduce(dtype);\n        reducer = dtype;\n        dtype = undefined;\n      }\n\n      if (null == dtype) dtype = 'object';\n      if (!Object(_dt__WEBPACK_IMPORTED_MODULE_10__[\"is_subdtype\"])(this.dtype, dtype)) throw new Error('New dtype must be a super-dtype.');\n      var oldNDim = this.ndim;\n      if ('number' === typeof axes) axes = [axes];\n\n      if (axes instanceof NDArray) {\n        if (!Object(_dt__WEBPACK_IMPORTED_MODULE_10__[\"is_subdtype\"])(axes.dtype, 'int32')) throw new Error(\"Invalid dtype \".concat(axes.dtype, \" for axes.\"));\n        if (axes.ndim === 1) axes = axes.data;else throw new Error('Only 1D nd.Array allowed for axes.');\n      }\n\n      axes = new Set(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee() {\n        var _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, ax;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context7.prev = 3;\n                _iterator = axes[Symbol.iterator]();\n\n              case 5:\n                if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                ax = _step.value;\n                if (0 > ax) ax += oldNDim;\n\n                if (!(0 > ax || ax >= oldNDim)) {\n                  _context7.next = 10;\n                  break;\n                }\n\n                throw new Error('Reduction axis ' + ax + ' out of bounds.');\n\n              case 10:\n                _context7.next = 12;\n                return +ax;\n\n              case 12:\n                _iteratorNormalCompletion = true;\n                _context7.next = 5;\n                break;\n\n              case 15:\n                _context7.next = 21;\n                break;\n\n              case 17:\n                _context7.prev = 17;\n                _context7.t0 = _context7[\"catch\"](3);\n                _didIteratorError = true;\n                _iteratorError = _context7.t0;\n\n              case 21:\n                _context7.prev = 21;\n                _context7.prev = 22;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 24:\n                _context7.prev = 24;\n\n                if (!_didIteratorError) {\n                  _context7.next = 27;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 27:\n                return _context7.finish(24);\n\n              case 28:\n                return _context7.finish(21);\n\n              case 29:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee, this, [[3, 17, 21, 29], [22,, 24, 28]]);\n      })());\n      var oldShape = this.shape,\n          newShape = oldShape.filter(function (size, i) {\n        return !axes.has(i);\n      }),\n          newData = new _dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"][dtype](newShape.reduce(function (a, b) {\n        return a * b;\n      }, 1)),\n          oldData = this.data;\n      var newIdx = 0,\n          oldIdx = 0;\n\n      function fill(d, reduce) {\n        if (oldShape.length === d) {\n          if (reduce) newData[newIdx] = reducer(oldData[oldIdx++], newData[newIdx]);else newData[newIdx] = oldData[oldIdx++];\n          ++newIdx;\n        } else if (axes.has(d)) {\n          var idx = newIdx;\n\n          for (var j = oldShape[d]; j-- > 0; reduce = true) {\n            newIdx = idx;\n            fill(d + 1, reduce);\n          }\n        } else for (var _j6 = oldShape[d]; _j6-- > 0;) {\n          fill(d + 1, reduce);\n        }\n      }\n\n      fill(0, false);\n      if (newIdx != newData.length) throw new Error([newIdx, newData.length]);\n      if (oldIdx != this.data.length) throw new Error([oldIdx, this.data.length]);\n      return new NDArray(newShape, newData);\n    }\n  }, {\n    key: \"sliceElems\",\n    value: function sliceElems() {\n      for (var _len4 = arguments.length, slices = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        slices[_key4] = arguments[_key4];\n      }\n\n      var oldNdim = this.ndim,\n          oldShape = this.shape;\n      var nEllipses = 0,\n          nNew = 0,\n          nReduced = 0,\n          // <- dimensions of this matrix that to not appear in the sliced one\n      nSliced = 0; // some basic acCOUNTing\n\n      for (var _i4 = 0; _i4 < slices.length; _i4++) {\n        var slc = slices[_i4];\n        if (slc === '...') ++nEllipses;else if (slc === 'new') ++nNew;else if (typeof slc === 'number') {\n          if (!(slc % 1 == 0)) throw new Error('Only integral indices allowed.');else ++nReduced;\n        } else {\n          var len = slc.length;\n          if (typeof len !== 'number' || !(len % 1 == 0) || len > 3 || len == 1) throw new Error('Illegal argument(s).');\n          ++nSliced;\n        }\n      }\n\n      if (nEllipses > 1) throw new Error('Highlander! There can be only one ... (ellipsis).');\n      if (nEllipses == 0) slices.push('...');\n      if (nReduced + nSliced > oldNdim) throw new Error('Cannot sliced more dimensions than available.'); // fill in omitted slice arguments and replace ellipsis\n\n      var off = 0;\n      var strides = [],\n          newShape = Int32Array.from(\n      /*#__PURE__*/\n      _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.mark(function _callee2() {\n        var d, stride, i, slc, _i5, _slc, _slc2, _slc2$, start, _slc2$2, end, _slc2$3, step;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default.a.wrap(function _callee2$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                d = oldNdim, stride = 1;\n                i = slices.length;\n\n              case 2:\n                if (!(--i >= 0)) {\n                  _context8.next = 54;\n                  break;\n                }\n\n                slc = slices[i];\n                _context8.t0 = slc;\n                _context8.next = _context8.t0 === 'new' ? 7 : _context8.t0 === '...' ? 11 : 21;\n                break;\n\n              case 7:\n                strides.push(0);\n                _context8.next = 10;\n                return 1;\n\n              case 10:\n                return _context8.abrupt(\"break\", 52);\n\n              case 11:\n                _i5 = nReduced + nSliced;\n\n              case 12:\n                if (!(_i5 < oldNdim)) {\n                  _context8.next = 20;\n                  break;\n                }\n\n                strides.push(stride);\n                stride *= oldShape[--d];\n                _context8.next = 17;\n                return oldShape[d];\n\n              case 17:\n                _i5++;\n                _context8.next = 12;\n                break;\n\n              case 20:\n                return _context8.abrupt(\"break\", 52);\n\n              case 21:\n                --d;\n\n                if (!('number' === typeof slc)) {\n                  _context8.next = 29;\n                  break;\n                }\n\n                if (0 > slc) slc += oldShape[d];\n\n                if (!(0 > slc || slc >= oldShape[d])) {\n                  _context8.next = 26;\n                  break;\n                }\n\n                throw new Error('Index out of bounds.');\n\n              case 26:\n                off += stride * slc;\n                _context8.next = 51;\n                break;\n\n              case 29:\n                _slc = slc, _slc2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_slc, 3), _slc2$ = _slc2[0], start = _slc2$ === void 0 ? undefined : _slc2$, _slc2$2 = _slc2[1], end = _slc2$2 === void 0 ? undefined : _slc2$2, _slc2$3 = _slc2[2], step = _slc2$3 === void 0 ? 1 : _slc2$3;\n                if (end < 0) end += oldShape[d];\n                if (start < 0) start += oldShape[d];\n\n                if (!(0 > start || start >= oldShape[d])) {\n                  _context8.next = 34;\n                  break;\n                }\n\n                throw new Error('Slice start out of bounds.');\n\n              case 34:\n                if (!(step == 0)) {\n                  _context8.next = 36;\n                  break;\n                }\n\n                throw new Error('Stride/step cannot be zero.');\n\n              case 36:\n                if (!(step < 0)) {\n                  _context8.next = 43;\n                  break;\n                }\n\n                if (start == null) start = oldShape[d] - 1;\n                if (end == null) end = -1;\n\n                if (!(-1 > end || end >= oldShape[d])) {\n                  _context8.next = 41;\n                  break;\n                }\n\n                throw new Error('Slice end out of bounds.');\n\n              case 41:\n                _context8.next = 47;\n                break;\n\n              case 43:\n                if (start == null) start = 0;\n                if (end == null) end = oldShape[d];\n\n                if (!(0 > end || end > oldShape[d])) {\n                  _context8.next = 47;\n                  break;\n                }\n\n                throw new Error('Slice end out of bounds.');\n\n              case 47:\n                strides.push(stride * step);\n                off += stride * start;\n                _context8.next = 51;\n                return 1 + Math.trunc((-Math.sign(step) + end - start) / step);\n\n              case 51:\n                stride *= oldShape[d];\n\n              case 52:\n                _context8.next = 2;\n                break;\n\n              case 54:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee2, this);\n      })());\n      var oldData = this.data,\n          newData = new _dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"][this.dtype](newShape.reduce(function (a, b) {\n        return a * b;\n      }, 1));\n      var newIdx = 0;\n\n      function fill(d, oldIdx) {\n        if (0 === d) newData[newIdx++] = oldData[oldIdx];else for (var i = newShape[--d]; i-- > 0; oldIdx += strides[d]) {\n          fill(d, oldIdx);\n        }\n      }\n\n      fill(newShape.length, off);\n      newShape.reverse();\n      return new NDArray(newShape, newData);\n    } //    convolve(options, conv_op) // <- IDEA: img.convolve({shape=[4,4,3], paddings=['same','same','none']}, (values, ...indices) => values.sum() )\n\n  }, {\n    key: \"ndim\",\n    get: function get() {\n      return this.shape.length;\n    }\n  }, {\n    key: \"dtype\",\n    get: function get() {\n      var _arr = Object.entries(_dt__WEBPACK_IMPORTED_MODULE_10__[\"ARRAY_TYPES\"]);\n\n      for (var _i6 = 0; _i6 < _arr.length; _i6++) {\n        var _arr$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_arr[_i6], 2),\n            dtype = _arr$_i[0],\n            ArrayType = _arr$_i[1];\n\n        if (this.data instanceof ArrayType) return dtype;\n      }\n\n      throw new Error('Data type could not determined.');\n    }\n  }, {\n    key: \"T\",\n    get: function get() {\n      if (this.ndim == 0) return this.sliceElems(); // <- TODO maybe [[]]\n\n      if (this.ndim == 1) return this.sliceElems([], 'new');\n      return this.transpose();\n    }\n  }, {\n    key: \"H\",\n    get: function get() {\n      var result = this.T;\n      if (this.dtype != 'object' && this.dtype != 'complex128') return result;\n      return result.mapElems(math.conj);\n    }\n  }]);\n\n  return NDArray;\n}(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_6___default()(Function));\n\n//# sourceURL=webpack://nd/./src/nd_array.js?");

/***/ }),

/***/ "./src/opt/index.js":
/*!**************************!*\
  !*** ./src/opt/index.js ***!
  \**************************/
/*! exports provided: line_search, min_lbfgs_gen, num_grad, root1d_bisect, strong_wolfe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _line_search__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./line_search */ \"./src/opt/line_search/index.js\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"line_search\", function() { return _line_search__WEBPACK_IMPORTED_MODULE_0__; });\n/* harmony import */ var _lbfgs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lbfgs */ \"./src/opt/lbfgs.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"min_lbfgs_gen\", function() { return _lbfgs__WEBPACK_IMPORTED_MODULE_1__[\"min_lbfgs_gen\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"strong_wolfe\", function() { return _line_search__WEBPACK_IMPORTED_MODULE_0__[\"strong_wolfe\"]; });\n\n/* harmony import */ var _num_grad__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./num_grad */ \"./src/opt/num_grad.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"num_grad\", function() { return _num_grad__WEBPACK_IMPORTED_MODULE_2__[\"num_grad\"]; });\n\n/* harmony import */ var _root1d_bisect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./root1d_bisect */ \"./src/opt/root1d_bisect.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"root1d_bisect\", function() { return _root1d_bisect__WEBPACK_IMPORTED_MODULE_3__[\"root1d_bisect\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://nd/./src/opt/index.js?");

/***/ }),

/***/ "./src/opt/lbfgs.js":
/*!**************************!*\
  !*** ./src/opt/lbfgs.js ***!
  \**************************/
/*! exports provided: min_lbfgs_gen */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"min_lbfgs_gen\", function() { return min_lbfgs_gen; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _line_search_strong_wolfe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./line_search/strong_wolfe */ \"./src/opt/line_search/strong_wolfe.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _line_search_line_search_error__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./line_search/line_search_error */ \"./src/opt/line_search/line_search_error.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nvar _marked =\n/*#__PURE__*/\n_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(min_lbfgs_gen);\n\n\n\n\n\nfunction dot(u, v) {\n  if (u.length !== v.length) throw new Error();\n  var result = 0;\n\n  for (var i = u.length; i-- > 0;) {\n    result += u[i] * v[i];\n  }\n\n  return result;\n}\n\nfunction min_lbfgs_gen(fg, x0) {\n  var _ref,\n      _ref$historySize,\n      historySize,\n      _ref$lineSearch,\n      lineSearch,\n      _ref$negDir,\n      negDir0,\n      x,\n      _fg,\n      _fg2,\n      f,\n      g,\n      _x$shape,\n      L,\n      shape,\n      dX,\n      dGdX,\n      dG,\n      negDir,\n      step,\n      _args = arguments;\n\n  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function min_lbfgs_gen$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _ref = _args.length > 2 && _args[2] !== undefined ? _args[2] : {}, _ref$historySize = _ref.historySize, historySize = _ref$historySize === void 0 ? 8 : _ref$historySize, _ref$lineSearch = _ref.lineSearch, lineSearch = _ref$lineSearch === void 0 ? Object(_line_search_strong_wolfe__WEBPACK_IMPORTED_MODULE_2__[\"strong_wolfe\"])() : _ref$lineSearch, _ref$negDir = _ref.negDir0, negDir0 = _ref$negDir === void 0 ? function (g) {\n            return g;\n          } : _ref$negDir;\n          x = Object(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"])(x0); //; x0 = undefined\n\n          _fg = fg(x), _fg2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_fg, 2), f = _fg2[0], g = _fg2[1];\n          _x$shape = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(x.shape, 1), L = _x$shape[0], shape = x.shape;\n          lineSearch = lineSearch(fg);\n          dX = [], dGdX = [], dG = [];\n\n          negDir = function negDir(g) {\n            //SEE:\n            // Jorge Nocedal \"Updating Quasi-Newton Matrices with Limited Storage\"\n            // MATHEMATICS OF COMPUTATION, VOL. 35, NO. 151, JULY 1980, PAGES 773-78\n            // https://courses.engr.illinois.edu/ece544na/fa2014/nocedal80.pdf\n            g = Float64Array.from(g.data);\n            var α = new Float64Array(dX.length);\n\n            for (var i = dGdX.length; i-- > 0;) {\n              α[i] = dot(dX[i], g) / dGdX[i];\n\n              for (var j = L; j-- > 0;) {\n                g[j] -= α[i] * dG[i][j];\n              }\n            }\n\n            g = negDir0(new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](shape, g));\n            g = Float64Array.from(g.data);\n\n            for (var _i = 0; _i < dGdX.length; _i++) {\n              var βi = dot(dG[_i], g) / dGdX[_i];\n\n              for (var _j = L; _j-- > 0;) {\n                g[_j] += (α[_i] - βi) * dX[_i][_j];\n              }\n            }\n\n            return new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](shape, g);\n          };\n\n          step = function step() {\n            var _lineSearch = lineSearch(x, f, g, negDir(g)),\n                _lineSearch2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1___default()(_lineSearch, 3),\n                X = _lineSearch2[0],\n                F = _lineSearch2[1],\n                G = _lineSearch2[2];\n\n            x = x.data;\n            g = g.data;\n            var dg = Float64Array.from(G.data, function (Gi, i) {\n              return Gi - g[i];\n            }),\n                dx = Float64Array.from(X.data, function (Xi, i) {\n              return Xi - x[i];\n            });\n            dG.push(dg);\n            dGdX.push(dot(dg, dx));\n            dX.push(dx); // LIMIT THE NUMBER OF MEMOIZED GRADIENTS\n            // (while loop in case historySize was changed)\n\n            if (dX.length > historySize) {\n              dX.shift();\n              dGdX.shift();\n              dG.shift();\n            }\n\n            if (dX.length > historySize) throw new Error('Assertion#1 failed.');\n            if (dX.length !== dGdX.length) throw new Error('Assertion#2 failed.');\n            if (dX.length !== dG.length) throw new Error('Assertion#3 failed.');\n            x = X;\n            f = F;\n            g = G;\n          };\n\n        case 8:\n          if (!(x.ndim !== 1)) {\n            _context.next = 10;\n            break;\n          }\n\n          throw new Error('Assertion#4 failed.');\n\n        case 10:\n          if (!(f.ndim !== 0)) {\n            _context.next = 12;\n            break;\n          }\n\n          throw new Error('Assertion#5 failed.');\n\n        case 12:\n          if (!(g.ndim !== 1)) {\n            _context.next = 14;\n            break;\n          }\n\n          throw new Error('Assertion#6 failed.');\n\n        case 14:\n          if (!(x.shape[0] !== L)) {\n            _context.next = 16;\n            break;\n          }\n\n          throw new Error('Assertion#7 failed.');\n\n        case 16:\n          if (!(g.shape[0] !== L)) {\n            _context.next = 18;\n            break;\n          }\n\n          throw new Error('Assertion#8 failed.');\n\n        case 18:\n          _context.next = 20;\n          return [x, f, g].map(function (a) {\n            return new _nd_array__WEBPACK_IMPORTED_MODULE_3__[\"NDArray\"](a.shape, a.data.slice());\n          });\n\n        case 20:\n          _context.prev = 20;\n          step();\n          _context.next = 32;\n          break;\n\n        case 24:\n          _context.prev = 24;\n          _context.t0 = _context[\"catch\"](20);\n\n          if (!(_context.t0 instanceof _line_search_line_search_error__WEBPACK_IMPORTED_MODULE_4__[\"LineSearchNoProgressError\"])) {\n            _context.next = 31;\n            break;\n          }\n\n          // single attempt to restart\n          dX = [], dGdX = [], dG = [];\n          step();\n          _context.next = 32;\n          break;\n\n        case 31:\n          throw _context.t0;\n\n        case 32:\n          _context.next = 8;\n          break;\n\n        case 34:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[20, 24]]);\n}\n\n//# sourceURL=webpack://nd/./src/opt/lbfgs.js?");

/***/ }),

/***/ "./src/opt/line_search/index.js":
/*!**************************************!*\
  !*** ./src/opt/line_search/index.js ***!
  \**************************************/
/*! exports provided: strong_wolfe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _strong_wolfe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./strong_wolfe */ \"./src/opt/line_search/strong_wolfe.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"strong_wolfe\", function() { return _strong_wolfe__WEBPACK_IMPORTED_MODULE_0__[\"strong_wolfe\"]; });\n\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n//# sourceURL=webpack://nd/./src/opt/line_search/index.js?");

/***/ }),

/***/ "./src/opt/line_search/line_search_error.js":
/*!**************************************************!*\
  !*** ./src/opt/line_search/line_search_error.js ***!
  \**************************************************/
/*! exports provided: LineSearchError, LineSearchNoProgressError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LineSearchError\", function() { return LineSearchError; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LineSearchNoProgressError\", function() { return LineSearchNoProgressError; });\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/classCallCheck */ \"./node_modules/@babel/runtime/helpers/classCallCheck.js\");\n/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/possibleConstructorReturn */ \"./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js\");\n/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/getPrototypeOf */ \"./node_modules/@babel/runtime/helpers/getPrototypeOf.js\");\n/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/helpers/inherits */ \"./node_modules/@babel/runtime/helpers/inherits.js\");\n/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime/helpers/wrapNativeSuper */ \"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js\");\n/* harmony import */ var _babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4__);\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\n\nvar LineSearchError =\n/*#__PURE__*/\nfunction (_Error) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(LineSearchError, _Error);\n\n  function LineSearchError() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, LineSearchError);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(LineSearchError).apply(this, arguments));\n  }\n\n  return LineSearchError;\n}(_babel_runtime_helpers_wrapNativeSuper__WEBPACK_IMPORTED_MODULE_4___default()(Error));\nvar LineSearchNoProgressError =\n/*#__PURE__*/\nfunction (_LineSearchError) {\n  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(LineSearchNoProgressError, _LineSearchError);\n\n  function LineSearchNoProgressError() {\n    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, LineSearchNoProgressError);\n\n    return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_1___default()(this, _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_2___default()(LineSearchNoProgressError).apply(this, arguments));\n  }\n\n  return LineSearchNoProgressError;\n}(LineSearchError);\n\n//# sourceURL=webpack://nd/./src/opt/line_search/line_search_error.js?");

/***/ }),

/***/ "./src/opt/line_search/strong_wolfe.js":
/*!*********************************************!*\
  !*** ./src/opt/line_search/strong_wolfe.js ***!
  \*********************************************/
/*! exports provided: strong_wolfe */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"strong_wolfe\", function() { return strong_wolfe; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _zip_elems__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../zip_elems */ \"./src/zip_elems.js\");\n/* harmony import */ var _line_search_error__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./line_search_error */ \"./src/opt/line_search/line_search_error.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\n\nvar strong_wolfe = function strong_wolfe() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$c = _ref.c1,\n      c1 = _ref$c === void 0 ? 0.4 : _ref$c,\n      _ref$c2 = _ref.c2,\n      c2 = _ref$c2 === void 0 ? 0.8 : _ref$c2,\n      _ref$c3 = _ref.c3,\n      c3 = _ref$c3 === void 0 ? 1.6 : _ref$c3;\n\n  // SEE:\n  //   \"Numerical Optimization\" 2n Edition,\n  //   Jorge Nocedal Stephen J. Wright,\n  //   Chapter 3. Line Search Methods, page 60.\n  // CHECK 0 < c1 < c2 < 1 < c3\n  if (c1 <= 0) throw new Error('strong_wolfe({c1,c2,c3}): c1 must be positive.');\n  if (c1 >= c2) throw new Error('strong_wolfe({c1,c2,c3}): c1 must less than c2.');\n  if (1 <= c2) throw new Error('strong_wolfe({c1,c2,c3}): c2 must less than 1.');\n  if (1 >= c3) throw new Error('strong_wolfe({c1,c2,c3}): c3 must larger than 1.');\n  return function (fg) {\n    return function (X0, f0, G0, negDir) {\n      X0 = Object(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"])(X0);\n      G0 = Object(_nd_array__WEBPACK_IMPORTED_MODULE_3__[\"asarray\"])(G0);\n      if (X0.ndim !== 1) throw new Error('strong_wolfe()(fg)(X0,f0,G0): X0.ndim must be 1.');\n      if (G0.ndim !== 1) throw new Error('strong_wolfe()(fg)(X0,f0,G0): G0.ndim must be 1.');\n      if (X0.shape[0] !== G0.shape[0]) throw new Error('strong_wolfe()(fg)(X0,f0,G0): X0 and G0 must have the same shape.');\n      if (isNaN(f0)) throw new Error('strong_wolfe()(fg)(X0,f0,G0): f0 is NaN.');\n      var dtype = [X0, G0].every(function (x) {\n        return x.dtype === 'float32';\n      }) ? 'float32' : 'float64';\n\n      var projGrad = function projGrad(g) {\n        // <- projected gradient\n        var pg = 0;\n\n        for (var _negDir$shape = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(negDir.shape, 1), i = _negDir$shape[0]; i-- > 0;) {\n          pg -= negDir.data[i] * g.data[i];\n        }\n\n        return pg;\n      };\n\n      var p0 = projGrad(G0); // <- projected gradient\n\n      if (p0 >= 0) throw new Error('strong_wolfe: Initial projected gradient not negative.');\n      var αMin = 0,\n          α = 1,\n          αMax = Infinity,\n          fMin = f0; // STEP 1: BRACKETING PHASE\n      //   Find a range guaranteed to contain an α satisfying strong Wolfe.\n\n      bracketing: while (true) {\n        var X = Object(_zip_elems__WEBPACK_IMPORTED_MODULE_1__[\"zip_elems\"])([X0, negDir], dtype, function (x, nDir) {\n          return x - α * nDir;\n        }),\n            _fg = fg(X),\n            _fg2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_fg, 2),\n            f = _fg2[0],\n            G = _fg2[1],\n            p = projGrad(G);\n\n        if (f - f0 > c1 * α * p0 || 0 < αMin && f >= fMin) {\n          αMax = α;\n          break bracketing;\n        }\n\n        if (Math.abs(p) <= -c2 * p0) return [X, f, G];\n\n        if (p >= 0) {\n          αMax = αMin;\n          αMin = α;\n          fMin = f;\n          break bracketing;\n        }\n\n        if (!(α < αMax)) throw new _line_search_error__WEBPACK_IMPORTED_MODULE_2__[\"LineSearchError\"]('strong_wolfe: Strong Wolfe condition not satisfiable in range.');\n        αMin = α;\n        α *= c3;\n        fMin = f;\n      }\n\n      if (αMin === αMax) throw new _line_search_error__WEBPACK_IMPORTED_MODULE_2__[\"LineSearchError\"]('strong_wolfe: bracketing failed.');\n\n      var noProgress = function noProgress() {\n        if (αMin === 0) throw new _line_search_error__WEBPACK_IMPORTED_MODULE_2__[\"LineSearchNoProgressError\"]('strongWolfeLineSearch(): no progress.');\n        throw new _line_search_error__WEBPACK_IMPORTED_MODULE_2__[\"LineSearchError\"](\"strong_wolfe: bisection failed \".concat(JSON.stringify({\n          αMin: αMin,\n          α: α,\n          αMax: αMax\n        }), \".\"));\n      }; // STEP 2: BISECTION PHASE\n      //   Given a range that is guaranteed to contain a valid\n      //   strong Wolfe α values, this method finds such a value.\n\n\n      while (true) {\n        α = (αMin + αMax) / 2;\n\n        var X = Object(_zip_elems__WEBPACK_IMPORTED_MODULE_1__[\"zip_elems\"])([X0, negDir], dtype, function (x, nDir) {\n          return x - α * nDir;\n        }),\n            _fg3 = fg(X),\n            _fg4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_fg3, 2),\n            f = _fg4[0],\n            G = _fg4[1],\n            p = projGrad(G);\n\n        if (f - f0 > c1 * α * p0 || f >= fMin) {\n          if (αMax === α) noProgress();\n          αMax = α;\n        } else {\n          if (Math.abs(p) <= -c2 * p0) return [X, f, G];\n          if (p * (αMax - αMin) >= 0) αMax = αMin;\n          if (αMin === α) noProgress();\n          αMin = α;\n          fMin = f;\n        }\n      }\n    };\n  };\n};\n\n//# sourceURL=webpack://nd/./src/opt/line_search/strong_wolfe.js?");

/***/ }),

/***/ "./src/opt/num_grad.js":
/*!*****************************!*\
  !*** ./src/opt/num_grad.js ***!
  \*****************************/
/*! exports provided: num_grad */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"num_grad\", function() { return num_grad; });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nvar num_grad = function num_grad(f) {\n  var eps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Math.pow(2, -12);\n  return function (x) {\n    x = Object(_nd_array__WEBPACK_IMPORTED_MODULE_1__[\"asarray\"])(x);\n    var DTypeArray = _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][x.dtype === 'float32' ? 'float32' : 'float64'],\n        shape = x.shape;\n    x = x.data;\n    var g = new DTypeArray(x.length),\n        eps = Math.sqrt(Number.EPSILON); // https://en.wikipedia.org/wiki/Finite_difference#Forward,_backward,_and_central_differences\n    // https://www.geometrictools.com/Documentation/FiniteDifferences.pdf\n\n    var _loop = function _loop(i) {\n      var h = Math.max(Math.abs(x[i]) * eps, eps);\n      var _arr = [[+2 * h, -1], [+1 * h, +8], [-1 * h, -8], [-2 * h, +1]];\n\n      var _loop2 = function _loop2() {\n        var _arr$_i = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_arr[_i], 2),\n            d = _arr$_i[0],\n            w = _arr$_i[1];\n\n        var X = new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, DTypeArray.from(x, function (xj, j) {\n          return xj + d * (i === j);\n        }));\n        g[i] += w * f(X);\n      };\n\n      for (var _i = 0; _i < _arr.length; _i++) {\n        _loop2();\n      }\n\n      g[i] /= 12 * h;\n    };\n\n    for (var i = x.length; i-- > 0;) {\n      _loop(i);\n    }\n\n    return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, g);\n  };\n};\n\n//# sourceURL=webpack://nd/./src/opt/num_grad.js?");

/***/ }),

/***/ "./src/opt/root1d_bisect.js":
/*!**********************************!*\
  !*** ./src/opt/root1d_bisect.js ***!
  \**********************************/
/*! exports provided: root1d_bisect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"root1d_bisect\", function() { return root1d_bisect; });\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\nfunction root1d_bisect(F, x_min, x_max) {\n  var f_min = F(x_min),\n      f_max = F(x_max);\n\n  if (f_min > f_max) {\n    var _ref = [f_max, f_min, x_max, x_min];\n    f_min = _ref[0];\n    f_max = _ref[1];\n    x_min = _ref[2];\n    x_max = _ref[3];\n  }\n\n  if (f_min > 0) {\n    if (f_min <= +Number.EPSILON) return x_min;else throw new Error('Assertion failed.');\n  }\n\n  if (f_max < 0) {\n    if (f_max >= -Number.EPSILON) return x_max;else throw new Error('Assertion failed.');\n  }\n\n  if (f_min > 0) {\n    return x_min;\n  }\n\n  if (f_max < 0) {\n    return x_max;\n  }\n\n  for (;;) {\n    var x = (x_min + x_max) / 2;\n    if (x_min == x || x_max == x) break;\n    var f = F(x);\n    if (isNaN(f)) throw new Error('NaN encountered.');\n\n    if (f <= 0) {\n      x_min = x;\n      f_min = f;\n    }\n\n    if (f >= 0) {\n      x_max = x;\n      f_max = f;\n    }\n  }\n\n  return Math.abs(f_min) <= Math.abs(f_max) ? x_min : x_max;\n}\n\n//# sourceURL=webpack://nd/./src/opt/root1d_bisect.js?");

/***/ }),

/***/ "./src/stack.js":
/*!**********************!*\
  !*** ./src/stack.js ***!
  \**********************/
/*! exports provided: stack */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stack\", function() { return stack; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _concat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./concat */ \"./src/concat.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\nfunction stack(axis, dtype, ndarrays) {\n  if (null == ndarrays) {\n    if (null == dtype) {\n      ndarrays = axis;\n      axis = undefined;\n    } else {\n      ndarrays = dtype;\n      dtype = undefined;\n\n      if ('string' === typeof axis) {\n        dtype = axis;\n        axis = undefined;\n      }\n    }\n  }\n\n  if (!('length' in ndarrays)) ndarrays = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(ndarrays);\n  if (null == axis) axis = 0;\n  if (0 > axis) axis += ndarrays[0].shape.length + 1;\n  if (0 > axis || axis > ndarrays[0].shape.length) throw new Error('Axis out of bounds.');\n  ndarrays = ndarrays.map(function (arr) {\n    return arr.reshape.apply(arr, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(arr.shape.slice(0, axis)).concat([1], _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(arr.shape.slice(axis))));\n  });\n  return Object(_concat__WEBPACK_IMPORTED_MODULE_1__[\"concat\"])(axis, dtype, ndarrays);\n}\n\n//# sourceURL=webpack://nd/./src/stack.js?");

/***/ }),

/***/ "./src/tabulate.js":
/*!*************************!*\
  !*** ./src/tabulate.js ***!
  \*************************/
/*! exports provided: tabulate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"tabulate\", function() { return tabulate; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nd_array */ \"./src/nd_array.js\");\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dt */ \"./src/dt/index.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction tabulate(shape, dtype, idx2val) {\n  shape = Int32Array.from(shape, function (s) {\n    if (s % 1 !== 0) throw new Error(\"tabulate(shape, dtype='object', idx2val): Invalid shape [\".concat(shape, \"].\"));\n    return s;\n  });\n\n  if (null == idx2val) {\n    idx2val = dtype;\n    dtype = undefined;\n  }\n\n  if (null == idx2val) throw new Error(\"tabulate(shape, dtype='object', idx2val): idx2val missing.\");\n  if (null == dtype) dtype = 'object';\n\n  Object(_dt__WEBPACK_IMPORTED_MODULE_2__[\"_check_dtype\"])(dtype);\n\n  var multi_idx = new Int32Array(shape.length),\n      // <- index in result\n  data = new _dt__WEBPACK_IMPORTED_MODULE_2__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  }, 1));\n  var flat_idx = 0;\n\n  function write(d) {\n    if (d === shape.length) data[flat_idx++] = idx2val.apply(void 0, _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(multi_idx));else for (multi_idx[d] = 0; multi_idx[d] < shape[d]; multi_idx[d]++) {\n      write(d + 1);\n    }\n  }\n\n  write(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_1__[\"NDArray\"](shape, data);\n}\n\n//# sourceURL=webpack://nd/./src/tabulate.js?");

/***/ }),

/***/ "./src/zip_elems.js":
/*!**************************!*\
  !*** ./src/zip_elems.js ***!
  \**************************/
/*! exports provided: zip_elems */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zip_elems\", function() { return zip_elems; });\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _dt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dt */ \"./src/dt/index.js\");\n/* harmony import */ var _nd_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./nd_array */ \"./src/nd_array.js\");\n\n/* This file is part of ND.JS.\n *\n * ND.JS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * ND.JS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with ND.JS. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n\n\nfunction zip_elems(ndarrays, dtype, zip_fn) {\n  // PREPROCESS ARGUMENTS\n  if (null == zip_fn && dtype instanceof Function) {\n    zip_fn = dtype;\n    dtype = undefined;\n  }\n\n  if (!(ndarrays instanceof Array)) ndarrays = _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(ndarrays);\n  ndarrays = ndarrays.map(_nd_array__WEBPACK_IMPORTED_MODULE_2__[\"asarray\"]);\n  if (null == dtype) dtype = 'object';\n\n  if (null == zip_fn) {\n    if ('object' !== dtype) throw new Error('If zip_fn is undefined, dtype must be \"object\" or undefined.');\n    var L = ndarrays.length;\n\n    zip_fn = function zip_fn() {\n      for (var _len = arguments.length, x = new Array(_len), _key = 0; _key < _len; _key++) {\n        x[_key] = arguments[_key];\n      }\n\n      return x.slice(0, L);\n    };\n  }\n\n  Object(_dt__WEBPACK_IMPORTED_MODULE_1__[\"_check_dtype\"])(dtype);\n\n  var ndim = ndarrays.reduce(function (ndim, arr) {\n    return Math.max(ndim, arr.ndim);\n  }, 0),\n      shape = Int32Array.from({\n    length: ndim\n  }, function () {\n    return 1;\n  }); // FIND COMMON (BROADCASTED) SHAPE\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = ndarrays[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var arr = _step.value;\n\n      for (var i = ndim, j = arr.ndim; i-- > 0 && j-- > 0;) {\n        if (1 === shape[i]) shape[i] = arr.shape[j];else if (shape[i] != arr.shape[j] && arr.shape[j] != 1) throw new Error('Shapes are not broadcast-compatible.');\n      }\n    } // GENERATE RESULT DATA\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  var multi_idx = new Int32Array(ndim),\n      // <- index in result\n  data = new _dt__WEBPACK_IMPORTED_MODULE_1__[\"ARRAY_TYPES\"][dtype](shape.reduce(function (a, b) {\n    return a * b;\n  }, 1)),\n      values = new Array(ndarrays.length),\n      // <- cache of ndarrays[indices]\n  indices = new Int32Array(ndarrays.length),\n      // <- indices in ndarrays(s)\n  strides = new Int32Array(ndarrays.length);\n  var flat_idx = 0;\n\n  function write(d) {\n    if (d === ndim) {\n      strides.fill(1);\n\n      for (var i = ndarrays.length; i-- > 0;) {\n        values[i] = ndarrays[i].data[indices[i]++];\n      }\n\n      data[flat_idx++] = zip_fn.apply(void 0, values.concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default()(multi_idx)));\n      return;\n    }\n\n    for (multi_idx[d] = 0;;) {\n      write(d + 1);\n      if (++multi_idx[d] >= shape[d]) break;\n\n      for (var _i = ndarrays.length; _i-- > 0;) {\n        if (!(ndarrays[_i].shape[d - ndim + ndarrays[_i].ndim] > 1)) // <- handles undefined (index out of bounds)\n          indices[_i] -= strides[_i];\n      }\n    }\n\n    for (var _i2 = ndarrays.length; _i2-- > 0;) {\n      strides[_i2] *= ndarrays[_i2].shape[d - ndim + ndarrays[_i2].ndim] || 1;\n    }\n  }\n\n  write(0);\n  return new _nd_array__WEBPACK_IMPORTED_MODULE_2__[\"NDArray\"](shape, data);\n}\n\n//# sourceURL=webpack://nd/./src/zip_elems.js?");

/***/ })

/******/ });
});